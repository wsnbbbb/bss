(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{1570:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ye}));a(172);var n,o,s,r=a(105),i=a.n(r),l=(a(152),a(78)),c=a.n(l),u=(a(47),a(17)),p=a.n(u),m=(a(98),a(55)),d=a.n(m),h=(a(254),a(116)),f=a.n(h),y=(a(255),a(133)),g=a.n(y),k=(a(173),a(84)),v=a.n(k),w=a(15),E=a.n(w),S=a(19),C=a.n(S),b=a(6),D=a.n(b),R=a(20),N=a.n(R),L=a(21),T=a.n(L),O=a(13),_=a.n(O),M=a(2),z=a.n(M),x=(a(65),a(25)),U=a.n(x),F=(a(60),a(12)),I=a.n(F),P=(a(58),a(11)),j=a.n(P),G=a(0),K=a.n(G),A=a(1),B=a.n(A),q=a(1591),J=a(1596),V=a(1592),Q=a(1589),H=a(23),W=a(9),X=(a(71),a(5)),Y=a.n(X),Z=a(18),$=(a(171),a(89)),ee=a.n($),te=(a(193),a(75)),ae=a.n(te),ne=a(33),oe=a.n(ne);a(3),a(153);function se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var re,ie,le,ce=I.a.Item,ue=d.a.TextArea,pe=j.a.Option,me=Object(H.b)("root")(n=Object(H.b)("authManage")(n=Object(H.b)("pageUserstore")(n=Object(H.c)((s=o=function(e){N()(n,e);var t,a=(t=n,function(){var e,a=_()(t);if(se()){var n=_()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return T()(this,e)});function n(e){var t;return E()(this,n),t=a.call(this,e),z()(D()(t),"onClose",(function(){t.props.pageUserstore.changeShowmodal("off")})),z()(D()(t),"onFinish",(function(e){if("see"!==t.props.operateType){if("add"===t.props.operateType&&t.props.onOk(e),"up"===t.props.operateType){var a=t.props.nowData.id;t.props.edit(a,e)}}else t.onClose()})),z()(D()(t),"reset",(function(){t.formRef.current.resetFields()})),t.formRef=K.a.createRef(),t.state={modalLoading:!1,nowData:null,targetKeys:[]},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.operateType,n=t.nowData,o=t.dictLists,s=(this.props.root.powers,{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}}),r=this.props.pageUserstore.showmodal;this.state.targetKeys;return K.a.createElement("div",null,K.a.createElement(U.a,{title:{add:"字典添加",up:"字典修改",see:"字典查看"}[a],maskClosable:!1,width:"40%",destroyOnClose:!0,visible:r,onCancel:this.onClose,confirmLoading:this.state.modalLoading,footer:null},K.a.createElement(I.a,{name:"form_in_modal",ref:this.formRef,initialValues:n,onFinish:function(t){e.onFinish(t)},className:"g-modal-field"},K.a.createElement(ee.a,null,K.a.createElement(ae.a,{span:24},K.a.createElement(ce,oe()({label:"字典描述",name:"keyDesc"},s,{rules:[{required:!0,message:"必填"},{max:40,message:"最多输入40个字符"}]}),K.a.createElement(j.a,{allowClear:!0,placeholder:"请选择",disabled:"see"===a||"up"===a},o.map((function(e){return K.a.createElement(pe,{value:e,key:e},e)})))))),K.a.createElement(ee.a,null,K.a.createElement(ae.a,{span:24},K.a.createElement(ce,oe()({label:"字典名称",name:"keyNames"},s,{rules:[{required:!0,message:"必填"}]}),K.a.createElement(d.a,{placeholder:"请输入字典名称",disabled:"see"===a,allowClear:!0})))),K.a.createElement(ee.a,null,K.a.createElement(ae.a,{span:24},K.a.createElement(ce,oe()({label:"备注",name:"remark"},s,{rules:[{max:250,message:"最多输入250个字符"}]}),K.a.createElement(ue,{placeholder:"请输入备注",disabled:"see"===a,style:{height:"100px"},allowClear:!0})))),K.a.createElement(ee.a,null,K.a.createElement(ae.a,{span:24},K.a.createElement("div",{className:"actions-btn"},K.a.createElement(p.a,{htmlType:"submit",className:"action-btn ok",style:"see"===a?{display:"none"}:{display:"inline-block"}},"提交"),K.a.createElement(p.a,{htmlType:"reset",className:"action-btn ok",onClick:this.reset,style:"see"===a?{display:"none"}:{display:"inline-block"}},"重置"),K.a.createElement(p.a,{onClick:this.onClose,className:"action-btn ok"},"取消")))))))}}]),n}(K.a.Component),z()(o,"propTypes",{location:B.a.any,history:B.a.any,userinfo:B.a.any,powers:B.a.array,authManage:B.a.any,match:B.a.any,pageUserstore:B.a.any,root:B.a.any,serverPartDict:B.a.any,serverDict:B.a.any}),n=s))||n)||n)||n)||n;function de(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var he=j.a.Option,fe=(I.a.Item,U.a.confirm);var ye=Object(H.b)("root")(re=Object(H.b)("authManage")(re=Object(H.b)("pageUserstore")(re=Object(H.b)("serverPartDict")(re=Object(H.c)((le=ie=function(e){N()(n,e);var t,a=(t=n,function(){var e,a=_()(t);if(de()){var n=_()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return T()(this,e)});function n(e){var t;return E()(this,n),t=a.call(this,e),z()(D()(t),"updateURL",(function(){var e,a,n,o,s=(e={query:t.state.inputValue},a=e.query,n=void 0===a?"":a,(o=new URLSearchParams).set("query",n),o.toString());t.props.history.push("?".concat(s))})),z()(D()(t),"onReset",(function(){t.searchFormRef.current.resetFields()})),z()(D()(t),"onModalOk",(function(e){Z.a.post("".concat(BSS_ADMIN_URL,"/api/user/userdict/add"),e).then((function(e){2e4===(e=e.data).code?(t.onClose(),t.onGetListData({page:1}),W.a.auto_close_result("ok","操作成功")):W.a.dealFail(e)})).catch((function(){t.setState({modalLoading:!1})}))})),z()(D()(t),"edit",(function(e,a){Z.a.put("".concat(BSS_ADMIN_URL,"/api/user/userdict/").concat(e,"/update"),a).then((function(e){2e4===(e=e.data).code?(t.onClose(),t.onGetListData({page:1}),W.a.auto_close_result("ok","操作成功")):W.a.dealFail(e)})).catch((function(){t.setState({modalLoading:!1})}))})),z()(D()(t),"onClose",(function(){t.props.pageUserstore.changeShowmodal("off")})),z()(D()(t),"onModalClose",(function(){t.props.pageUserstore.changeShowmodal("off")})),z()(D()(t),"onSelectChange",(function(e){t.setState({selectedRowKeys:e})})),z()(D()(t),"showTotal",(function(e){return"一共".concat(e,"条数据")})),z()(D()(t),"showDeleteConfirm",(function(){var e=t.state.selectedRowKeys,a=D()(t);if(e.length<1)return U.a.warning({title:"提示",content:"请选择至少一条数据！",destroyOnClose:!0}),!1;fe({title:"你确定要删除吗？",icon:K.a.createElement(q.a,null),okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){a.onDel(e),a.setState({selectedRowKeys:[]})},onCancel:function(){}})})),t.searchFormRef=K.a.createRef(),t.searchCondition={},t.state={lists:[],operateType:"add",loading:!1,modalShow:!1,modalLoading:!1,nowData:{},pageNum:1,page_size:20,total:0,pages:0,selectedRowKeys:[],version:0,dictLists:[]},t}return C()(n,[{key:"componentDidMount",value:function(){this.onGetListData(this.state.pageNum,this.state.page_size),this.onGetDictList()}},{key:"onGetListData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Y.a.assign({},this.searchCondition,t);this.setState({loading:!0}),Z.a.get("".concat(BSS_ADMIN_URL,"/api/user/userdict/list"),{params:W.a.clearNull(a)}).then((function(t){if(t=t.data,W.a.hasStatusOk(t)){var a=t.data.records;e.setState({lists:a,total:t.data.total,pages:t.data.pages,pageNum:t.data.current})}else W.a.dealFail(t);e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"onGetDictList",value:function(){var e=this;Z.a.get("".concat(BSS_ADMIN_URL,"/api/user/userdict/keytype/distinct")).then((function(t){t=t.data,W.a.hasStatusOk(t)?e.setState({dictLists:t.data}):W.a.dealFail(t)})).catch((function(){}))}},{key:"makeColumns",value:function(){var e=this;return[{title:"名称",dataIndex:"keyNames",key:"keyNames"},{title:"描述",dataIndex:"keyDesc",key:"keyDesc"},{title:"备注",dataIndex:"remark",key:"remark"},{title:"操作",key:"control",fixed:"right",width:100,render:function(t,a){var n=[];n.push(K.a.createElement("span",{key:"0",className:"control-btn green",onClick:function(){return e.onModalShow("see",a)}},K.a.createElement(v.a,{placement:"top",title:"查看"},K.a.createElement(J.a,null)))),n.push(K.a.createElement("span",{key:"1",className:"control-btn blue",onClick:function(){return e.onModalShow("up",a)}},K.a.createElement(v.a,{placement:"top",title:"修改"},K.a.createElement(V.a,null)))),n.push(K.a.createElement(g.a,{key:"2",title:"确定删除吗?",onConfirm:function(){return e.onDel(a.id)},okText:"确定",cancelText:"取消"},K.a.createElement("span",{className:"control-btn red"},K.a.createElement(v.a,{placement:"top",title:"删除"},K.a.createElement(Q.a,null)))));var o=[];return n.forEach((function(e,t){t&&o.push(K.a.createElement(f.a,{key:"line".concat(t),type:"vertical"})),o.push(e)})),o}}]}},{key:"onSearch",value:function(e){this.searchCondition=e,this.onGetListData(e)}},{key:"onPageChange",value:function(e,t){this.onGetListData({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.onGetListData({page:e,pageSize:t})}},{key:"onModalShow",value:function(e,t){this.props.pageUserstore.changeShowmodal("on"),this.setState({modalShow:!0,nowData:{id:t.id||"",keyDesc:t.keyDesc||"",keyNames:t.keyNames||"",remark:t.remark||""},operateType:e})}},{key:"onDel",value:function(e){var t=this;this.setState({loading:!0});var a=[];"string"==typeof e?a.push(e):a=e,Z.a.delete("".concat(BSS_ADMIN_URL,"/api/user/userdict/alldel"),{data:a}).then((function(e){2e4===(e=e.data).code?(t.onGetListData({page:1}),W.a.auto_close_result("ok","操作成功")):(W.a.dealFail(e),t.setState({loading:!1}))})).catch((function(){t.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=(this.props.root.powers,this.state),a=t.loading,n=t.operateType,o=t.lists,s=t.pageNum,r=t.page_size,l=t.modalShow,u=t.nowData,m=t.total,h=t.selectedRowKeys,f=(t.pages,t.dictLists),y={selectedRowKeys:h,onChange:this.onSelectChange};return K.a.createElement("main",{className:"mian"},K.a.createElement("div",{className:"c-search"},K.a.createElement(I.a,{ref:this.searchFormRef,name:"horizontal_login",layout:"inline",onFinish:function(t){e.onSearch(t)}},K.a.createElement(I.a.Item,{name:"keyNames"},K.a.createElement(d.a,{placeholder:"请输入名称",allowClear:!0})),K.a.createElement(I.a.Item,{name:"keyDesc"},K.a.createElement(j.a,{allowClear:!0,placeholder:"请选择字典描述",style:{width:"240px"}},f.map((function(e){return K.a.createElement(he,{value:e,key:e},e)})))),K.a.createElement(I.a.Item,{shouldUpdate:!0},K.a.createElement(p.a,{type:"primary",htmlType:"submit"},"搜索")),K.a.createElement(I.a.Item,{shouldUpdate:!0},K.a.createElement(p.a,{type:"primary",htmlType:"reset",onClick:this.onReset},"重置")))),K.a.createElement("div",{className:"c-operate"},K.a.createElement(p.a,{size:"middle",onClick:function(){e.onModalShow("add",{})},className:"actions-btn"},"添加"),K.a.createElement(p.a,{size:"middle",onClick:this.showDeleteConfirm,className:"actions-btn"},"批量删除")),K.a.createElement("div",{className:"g-table"},K.a.createElement(c.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:a,dataSource:o,pagination:!1,rowSelection:y,size:"small"})),K.a.createElement("div",{className:"pagination"},K.a.createElement(i.a,{className:"g-pagination",size:"middle",current:s,total:m,showSizeChanger:!0,showQuickJumper:!0,showTotal:this.showTotal,defaultPageSize:r,onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}})),K.a.createElement(me,{operateType:n,nowData:u,visible:l,onOk:this.onModalOk,edit:this.edit,onClose:this.onModalClose,lists:o,dictLists:f}))}}]),n}(K.a.Component),z()(ie,"propTypes",{location:B.a.any,history:B.a.any,userinfo:B.a.any,powers:B.a.array,authManage:B.a.any,match:B.a.any,pageUserstore:B.a.any,root:B.a.any,serverPartDict:B.a.any,serverDict:B.a.any}),re=le))||re)||re)||re)||re)||re},1596:function(e,t,a){"use strict";var n=a(0),o={name:"eye",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]}},s=a(69),r=function(e,t){return n.createElement(s.a,Object.assign({},e,{ref:t,icon:o}))};r.displayName="EyeOutlined";t.a=n.forwardRef(r)}}]);