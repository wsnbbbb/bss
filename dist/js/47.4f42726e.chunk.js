(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1550:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Kt}));a(172);var n=a(105),l=a.n(n),r=(a(152),a(78)),o=a.n(r),i=(a(47),a(17)),s=a.n(i),c=(a(60),a(12)),d=a.n(c),u=(a(98),a(55)),m=a.n(u),p=(a(254),a(116)),h=a.n(p),f=(a(173),a(84)),y=a.n(f),E=a(15),v=a.n(E),b=a(19),g=a.n(b),w=a(6),k=a.n(w),S=a(20),I=a.n(S),D=a(21),x=a.n(D),O=a(13),R=a.n(O),C=a(2),N=a.n(C),P=(a(58),a(11)),L=a.n(P),M=(a(65),a(25)),j=a.n(M),T=a(0),q=a.n(T),U=a(1),F=a.n(U),B=a(1596),A=a(1592),z=a(1589),K={name:"api",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917.7 148.8l-42.4-42.4c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-76.1 76.1a199.27 199.27 0 00-112.1-34.3c-51.2 0-102.4 19.5-141.5 58.6L432.3 308.7a8.03 8.03 0 000 11.3L704 591.7c1.6 1.6 3.6 2.3 5.7 2.3 2 0 4.1-.8 5.7-2.3l101.9-101.9c68.9-69 77-175.7 24.3-253.5l76.1-76.1c3.1-3.2 3.1-8.3 0-11.4zM769.1 441.7l-59.4 59.4-186.8-186.8 59.4-59.4c24.9-24.9 58.1-38.7 93.4-38.7 35.3 0 68.4 13.7 93.4 38.7 24.9 24.9 38.7 58.1 38.7 93.4 0 35.3-13.8 68.4-38.7 93.4zm-190.2 105a8.03 8.03 0 00-11.3 0L501 613.3 410.7 523l66.7-66.7c3.1-3.1 3.1-8.2 0-11.3L441 408.6a8.03 8.03 0 00-11.3 0L363 475.3l-43-43a7.85 7.85 0 00-5.7-2.3c-2 0-4.1.8-5.7 2.3L206.8 534.2c-68.9 69-77 175.7-24.3 253.5l-76.1 76.1a8.03 8.03 0 000 11.3l42.4 42.4c1.6 1.6 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3l76.1-76.1c33.7 22.9 72.9 34.3 112.1 34.3 51.2 0 102.4-19.5 141.5-58.6l101.9-101.9c3.1-3.1 3.1-8.2 0-11.3l-43-43 66.7-66.7c3.1-3.1 3.1-8.2 0-11.3l-36.6-36.2zM441.7 769.1a131.32 131.32 0 01-93.4 38.7c-35.3 0-68.4-13.7-93.4-38.7a131.32 131.32 0 01-38.7-93.4c0-35.3 13.7-68.4 38.7-93.4l59.4-59.4 186.8 186.8-59.4 59.4z"}}]}},G=a(69),W=function(e,t){return T.createElement(G.a,Object.assign({},e,{ref:t,icon:K}))};W.displayName="ApiOutlined";var V,J,$,H,Q=T.forwardRef(W),X=a(1590),Y=a(1591),Z=a(23),ee=a(18),te=a(9),ae=a(26),ne=(a(174),a(107)),le=a.n(ne),re=(a(171),a(89)),oe=a.n(re),ie=(a(724),a(417)),se=a.n(ie),ce=(a(193),a(75)),de=a.n(ce),ue=a(33),me=a.n(ue),pe=a(5),he=a.n(pe),fe=a(28),ye=a(153),Ee=a(1629),ve=(a(194),a(106)),be=a.n(ve),ge=a(99);function we(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?we(Object(a),!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):we(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ie,De,xe,Oe=d.a.Item,Re=m.a.TextArea,Ce=L.a.Option,Ne=(V=Object(Z.b)("portDict"),Object(ge.g)(J=V(J=Object(Z.c)((H=$=function(e){I()(n,e);var t,a=(t=n,function(){var e,a=R()(t);if(Se()){var n=R()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return x()(this,e)});function n(e){var t;return v()(this,n),t=a.call(this,e),N()(k()(t),"formRefAdd",q.a.createRef()),N()(k()(t),"formRefPortEdit",q.a.createRef()),N()(k()(t),"onOk",(function(){var e=t.state.lists;if(t.newDataLen<=0)return j.a.error({title:"没有新增数据可保存"}),!1;t.props.onSelect(e),t.setState({showModal:!1})})),N()(k()(t),"onClose",(function(){t.setState({showModal:!1})})),N()(k()(t),"onOkEdit",(function(e){e=te.a.clearNull(e);var a=he.a.cloneDeep(t.state.lists);if("one"==t.editType){var n=t.state.nowData,l=he.a.findIndex(a,(function(e){return n.port==e.port}));a[l]=ke({sult:null==n.sult?null:n.sult,status:n.status,url:n.url||"",port:null==n.port?null:n.port,speed:null==n.speed?null:n.speed,remark:n.remark||null},e)}else he.a.map(t.selectedRows,(function(t){var n=he.a.findIndex(a,(function(e){return t.port==e.port}));a[n]=ke({sult:null==t.sult?null:t.sult,status:t.status,url:t.url||"",port:t.port||null,speed:t.speed||null,remark:t.remark||null},e)}));t.setState({nowData:{},lists:a,showModalEdit:!1})})),N()(k()(t),"onCloseEdit",(function(){t.setState({showModalEdit:!1})})),t.portkeys={},t.newDataLen=0,t.selectedRows=[],t.editType=null,t.state={lists:[],nowData:{},loading:!1,showModal:!1,showModalEdit:!1,Editloading:!1},t}return g()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getTemp",value:function(e){var t=this;this.setState({loading:!0}),ee.a.get("".concat(BSS_ADMIN_URL,"/api/product/network/device/port/template/listPortTemplate"),{params:e}).then((function(e){if(e=e.data,te.a.hasStatusOk(e)){var a=[];he.a.map(e.data,(function(e){a.push(e.port)})),t.newDataLen=e.data.length,t.portkeys=a,t.setState({loading:!1,lists:e.data})}else te.a.dealFail(e),t.setState({loading:!1})})).catch((function(){t.setState({loading:!1})}))}},{key:"GeneratePort",value:function(e){var t=e.prefix,a=e.sult,n=e.start,l=e.ends,r=e.speed;if(n>l)return j.a.error({title:"开始值不能大于结束值"}),!1;var o=[];this.portkeys=[];for(var i=n;i<=l;i++){var s="".concat(t).concat(i);this.portkeys.push(s),this.newDataLen=l-n+1,o.push({id:null,sult:a,port:s,speed:r,status:1,remark:"",url:""})}this.setState({lists:o})}},{key:"onDelOne",value:function(e,t){var a=he.a.cloneDeep(this.state.lists);this.newDataLen=this.newDataLen-1,this.portkeys.splice(this.portkeys.indexOf(t.port),1),a.splice(e,1),this.setState({lists:a})}},{key:"dealSelectedCache",value:function(){var e=this,t=he.a.cloneDeep(this.selectedRows);this.selectedRows=he.a.dropWhile(t,(function(t){return!he.a.includes(e.portkeys,t.port)}))}},{key:"onBatchDel",value:function(){var e=this;if(this.dealSelectedCache(),this.state.selectedRowKeys.length<=0)return j.a.warning({title:"请至少选择一条数据",content:""}),!1;var t=he.a.filter(this.state.lists,(function(t){return!e.state.selectedRowKeys.includes(t.port)}));this.selectedRows=[],this.setState({selectedRowKeys:[],lists:t})}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.setState({selectedRowKeys:e})}},{key:"modalShow",value:function(){if(this.state.lists.length>0)this.setState({showModal:!0});else{var e=this.props.PortTempParam,t=e.deviceModelId,a=e.deviceType;if(null==t||null==a)return j.a.error({title:"请选择设备型号和设备类型!"}),!1;Object.keys(this.props.portDict.portprefix).length<=0&&this.props.portDict.fetchPortPrefix(),this.getTemp(this.props.PortTempParam),this.setState({showModal:!0})}}},{key:"modalShowEdit",value:function(e,t){if(this.editType=e,"one"==e)return this.setState({nowData:t,showModalEdit:!0}),!1;if("batch"==e){if(this.state.selectedRowKeys.length<=0)return j.a.error({title:"请至少选择一条数据"}),!0;this.setState({nowData:{},showModalEdit:!0})}}},{key:"makeColumns",value:function(){var e=this;return[{title:"端口",dataIndex:"port",width:150,key:"port"},{title:"端口类型",dataIndex:"sult",width:150,key:"sult",render:function(e,t){return ae.h.port_type[e]}},{title:"端口状态",dataIndex:"status",width:150,key:"status",render:function(e,t){return null==e&&(e=1),te.a.renderStatus(ae.h.port_use,e)}},{title:"端口速率（Mbps）",dataIndex:"speed",width:150,key:"speed"},{title:"浏览图url",dataIndex:"url",width:150,key:"url"},{title:"备注",dataIndex:"remark",width:150,key:"remark"},{title:"操作",key:"control",fixed:"right",width:160,render:function(t,a,n){var l=[];l.push(q.a.createElement("span",{key:"0",className:"control-btn blue",onClick:function(){return e.modalShowEdit("one",a)}},q.a.createElement(y.a,{placement:"top",title:"编辑"},q.a.createElement(A.a,null)))),l.push(q.a.createElement("span",{key:"1",className:"control-btn red",onClick:function(){return e.onDelOne(n,a)}},q.a.createElement(y.a,{placement:"top",title:"删除"},q.a.createElement(z.a,null))));var r=[];return l.forEach((function(e,t){t&&r.push(q.a.createElement(h.a,{key:"line".concat(t),type:"vertical"})),r.push(e)})),r}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,l=t.showModalEdit,r=t.loading;return q.a.createElement("main",{className:"mian"},q.a.createElement(j.a,{title:this.props.title,maskClosable:!1,width:"90%",destroyOnClose:!0,okText:"保存",onOk:this.onOk,onCancel:this.onClose,visible:n},q.a.createElement("div",{className:"g-search"},q.a.createElement(d.a,{ref:this.formRefAdd,name:"searchbox",layout:"inline",onFinish:function(t){e.GeneratePort(t)}},q.a.createElement(d.a.Item,{name:"prefix",label:"前缀",rules:[{required:!0,message:"请选择"}]},q.a.createElement(L.a,{style:{width:150},placeholder:"前缀"},he.a.map(this.props.portDict.portprefix,(function(e,t){return q.a.createElement(Ce,{value:e,key:t}," ",e," ")})))),q.a.createElement(d.a.Item,{name:"sult",label:"端口类型",rules:[{required:!0,message:"请选择"}]},q.a.createElement(L.a,{style:{width:150},placeholder:"端口类型"},he.a.map(ae.h.port_type,(function(e,t){return q.a.createElement(Ce,{value:parseInt(t),key:t}," ",e," ")})))),q.a.createElement(d.a.Item,{name:"start",label:"开始值",rules:[{required:!0,message:"请输入"},{pattern:ye.a.num,message:"请输入正整数"}]},q.a.createElement(be.a,{style:{width:80},placeholder:"开始值"})),q.a.createElement(d.a.Item,{name:"ends",label:"结束值",rules:[{required:!0,message:"请输入"},{pattern:ye.a.num,message:"请输入正整数"}]},q.a.createElement(be.a,{style:{width:80},placeholder:"结束值"})),q.a.createElement(d.a.Item,{name:"speed",label:"端口速率(Mbps)",rules:[{required:!0,message:"请输入"},{pattern:ye.a.num,message:"请输入正整数"}]},q.a.createElement(m.a,{style:{width:100},placeholder:"端口速率"})),q.a.createElement(d.a.Item,{shouldUpdate:!0},q.a.createElement(s.a,{type:"primary",htmlType:"submit"},"生成端口")))),q.a.createElement("div",{className:"g-operate"},q.a.createElement(s.a,{size:"middle",type:"dashed",onClick:function(){e.modalShowEdit("batch")}},"批量编辑"),q.a.createElement(s.a,{size:"middle",type:"dashed",onClick:function(){e.onBatchDel()}},"批量删除")),q.a.createElement("div",{className:"g-table"},q.a.createElement(o.a,{columns:this.makeColumns(),rowKey:function(e){return e.port},loading:r,dataSource:a,rowSelection:{type:"checkbox",selectedRowKeys:this.state.selectedRowKeys,onChange:function(t,a){e.selectedRow(t,a)}}}))),q.a.createElement(j.a,{title:"one"==this.editType?"编辑":"批量编辑",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onCancel:this.onCloseEdit,visible:l},q.a.createElement(d.a,{ref:this.formRefPortEdit,name:"editbox",initialValues:this.state.nowData,className:"g-modal-field",onFinish:function(t){e.onOkEdit(t)}},q.a.createElement(d.a.Item,me()({name:"sult",label:"端口类型",rules:[{required:"one"==this.editType,message:"请输入"}]},fe.a),q.a.createElement(L.a,{placeholder:"端口类型"},he.a.map(ae.h.port_type,(function(e,t){return q.a.createElement(Ce,{value:parseInt(t),key:t}," ",e," ")})))),q.a.createElement(d.a.Item,me()({name:"speed",label:"端口速率(Mbps)",rules:[{required:"one"==this.editType,message:"请输入"}]},fe.a),q.a.createElement(m.a,{placeholder:"端口速率"})),q.a.createElement(d.a.Item,me()({name:"status",label:"端口状态",rules:[{required:"one"==this.editType,message:"请输入"}]},fe.a),q.a.createElement(L.a,{placeholder:"端口状态"},he.a.map(ae.h.port_use,(function(e,t){return q.a.createElement(Ce,{value:parseInt(t),key:t,disabled:"2"==t}," ",e.text," ")})))),q.a.createElement(d.a.Item,me()({name:"url",label:"浏量图url"},fe.a),q.a.createElement(m.a,{placeholder:"浏量图url"})),q.a.createElement(Oe,me()({label:"备注",name:"remark"},fe.a),q.a.createElement(Re,{autoSize:{minRows:5},placeholder:"请输入"})),q.a.createElement("div",{className:"actions-btn"},q.a.createElement(s.a,{type:"primary",className:"action-btn ok",htmlType:"submit"},"保存"),q.a.createElement(s.a,{type:"primary",className:"action-btn ok",onClick:this.onCloseEdit},"取消")))),q.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(q.a.Component),N()($,"propTypes",{location:F.a.any,history:F.a.any,match:F.a.any,portDict:F.a.any,PortTempParam:F.a.any,powers:F.a.array,defaultData:F.a.any,onOk:F.a.func,onClose:F.a.func}),J=H))||J)||J)||J);function Pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(a),!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var je,Te,_e,qe=d.a.Item,Ue=m.a.TextArea,Fe=L.a.Option,Be=Object(Z.b)("deviceDict")(Ie=Object(Z.c)((xe=De=function(e){I()(n,e);var t,a=(t=n,function(){var e,a=R()(t);if(Me()){var n=R()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return x()(this,e)});function n(e){var t;return v()(this,n),t=a.call(this,e),N()(k()(t),"formRefAdd",q.a.createRef()),N()(k()(t),"onResetSearch",(function(){t.formRefAdd.current.resetFields()})),N()(k()(t),"onModalshow",(function(){t.setState({showModal:!0})})),N()(k()(t),"onClose",(function(){t.setState({showModal:!1})})),N()(k()(t),"resetUw",(function(e){var a=e.target.value;a!=t.state.uw&&t.setState({uw:parseInt(a),ubitInfo:{},regionInfo:{},cabinetInfo:{},locationCode:void 0})})),N()(k()(t),"resetDeviceTM",(function(e,a){t.PortTempParam[e]=a})),N()(k()(t),"onSelectUBit",(function(e){var a=e.uBitInfo.uw+t.state.uw-1,n="".concat(e.regionInfo.fullLocationCode,"-").concat(e.cabinetInfo.row,"-").concat(e.cabinetInfo.coulmn,"-").concat(e.uBitInfo.uw,"U-").concat(a,"U");t.setState({ubitInfo:e.uBitInfo,regionInfo:e.regionInfo,cabinetInfo:e.cabinetInfo,locationCode:n})})),t.PortTempParam={deviceModelId:void 0,deviceType:void 0},t.ports=[],t.state={showModal:!1,modalLoading:!1,uw:null,ubitInfo:{},regionInfo:{},cabinetInfo:{},locationCode:void 0},t}return g()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"onFinish",value:function(e){var t=this;if(this.ports.length<=0)j.a.error({title:"请选择端口"});else if(null!=this.state.ubitInfo.uw){var a={networkDevicesAddReq:Le({locationId:this.state.regionInfo.fullLocationId,cabinetId:this.state.cabinetInfo.id,startubat:this.state.ubitInfo.uw},e),devicePortReqList:this.ports};this.setState({modalLoading:!0}),ee.a.post("".concat(BSS_ADMIN_URL,"/api/product/stock/add"),a).then((function(e){e=e.data,te.a.hasStatusOk(e)?(te.a.auto_close_result("ok","操作成功"),t.setState({modalLoading:!1,showModal:!1}),t.props.updateList()):te.a.dealFail(e),t.setState({modalLoading:!1})})).catch((function(){t.setState({modalLoading:!1})}))}else j.a.error({title:"请选择U位"})}},{key:"savePort",value:function(e){this.formRefAdd.current.setFieldsValue({num:e.length}),this.ports=e}},{key:"render",value:function(){var e=this,t=this.props.deviceDict,a=t.devicebrand,n=t.devicemodel,l=this.state,r=l.uw,o=l.regionInfo,i=l.cabinetInfo,c=l.locationCode,u=l.showModal,p=l.modalLoading;return q.a.createElement(q.a.Fragment,null,q.a.createElement(j.a,{title:"新增网络设备",maskClosable:!1,width:"80%",destroyOnClose:!0,footer:null,onCancel:this.onClose,visible:u},q.a.createElement(le.a,{tip:"Loading...",spinning:p},q.a.createElement(d.a,{name:"form_in_modal",ref:this.formRefAdd,className:"g-modal-field",onFinish:function(t){e.onFinish(t)},validateMessages:{required:"'${name}' 是必选字段"}},q.a.createElement(oe.a,null,q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(qe,me()({label:"设备名称",name:"deviceName",rules:[{required:!0,message:"请输入设备名称"}]},fe.a),q.a.createElement(m.a,{maxLength:60,type:"text",placeholder:"请输入"}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(qe,me()({label:q.a.createElement("span",{className:"required"}," U位"),style:{marginBottom:0}},fe.a),q.a.createElement(qe,{name:"uw",rules:[{required:!0,pattern:ye.a.num,message:"请输入数字"}],style:{display:"inline-block",width:150}},q.a.createElement(m.a,{maxLength:2,onChange:this.resetUw})),q.a.createElement(Ee.a,{uw:r,title:"选择U位",onSelect:function(t){e.onSelectUBit(t)}},q.a.createElement(s.a,{style:{width:120},disabled:!r},"选择U位")))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(qe,me()({label:q.a.createElement("span",{className:"required"}," 区域")},fe.a),q.a.createElement(m.a,{placeholder:"地区/机房/区域(自动生成)",type:"text",disabled:!0,value:o.fullLocationName}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(qe,me()({label:q.a.createElement("span",{className:"required"}," 机柜")},fe.a),q.a.createElement(m.a,{placeholder:"自动生成",type:"text",disabled:!0,value:i.name}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(qe,me()({label:q.a.createElement("span",{className:"required"}," 位置码")},fe.a),q.a.createElement(m.a,{placeholder:"自动生成",type:"text",disabled:!0,value:c}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(qe,me()({label:"管理IP",name:"ip",rules:[{required:!0,pattern:ye.a.ipv4,message:"请输入合法的ipv4地址"}]},fe.a),q.a.createElement(m.a,{type:"text"}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(qe,me()({label:"设备类型",name:"deviceType",rules:[{required:!0,message:"请选择设备类型"}]},fe.a),q.a.createElement(L.a,{onChange:function(t){e.resetDeviceTM("deviceType",t)}},he.a.map(ae.f.re_facility,(function(e,t){return q.a.createElement(Fe,{value:parseInt(t),key:t}," ",e," ")}))))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(qe,me()({label:"设备品牌",name:"brand",rules:[{required:!0,message:"请选择设备品牌"}]},fe.a),q.a.createElement(L.a,null,he.a.map(a,(function(e,t){return q.a.createElement(Fe,{value:parseInt(t),key:t}," ",e," ")}))))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(qe,me()({label:"设备型号",name:"modelnumber",rules:[{required:!0,message:"请选择设备型号"}]},fe.a),q.a.createElement(L.a,{onChange:function(t){e.resetDeviceTM("deviceModelId",t)}},he.a.map(n,(function(e,t){return q.a.createElement(Fe,{value:parseInt(t),key:t}," ",e," ")}))))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(qe,me()({label:q.a.createElement("span",{className:"required"}," 端口数量"),style:{marginBottom:0}},fe.a),q.a.createElement(qe,{name:"num",style:{display:"inline-block",width:150}},q.a.createElement(m.a,{disabled:!0})),q.a.createElement("div",{style:{display:"inline-block",width:150}},q.a.createElement(Ne,{PortTempParam:this.PortTempParam,title:"生成端口",onSelect:function(t){e.savePort(t)}},q.a.createElement(s.a,null,"生成端口"))))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(qe,me()({label:"采购时间",name:"purchasingtime",rules:[{required:!0,message:"请选择采购时间"}]},fe.a),q.a.createElement(se.a,{style:{width:"100%"}}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},q.a.createElement(qe,me()({label:"备注",name:"remark"},fe.b),q.a.createElement(Ue,{maxLength:250,autoSize:{minRows:5},placeholder:"请输入"})))),q.a.createElement("div",{className:"actions-btn"},q.a.createElement(s.a,{htmlType:"submit",className:"action-btn ok"},"确认提交"),q.a.createElement(s.a,{onClick:this.onResetSearch,className:"action-btn ok"},"重置"),q.a.createElement(s.a,{onClick:this.onClose,className:"action-btn ok"},"取消"))))),q.a.createElement("span",{onClick:this.onModalshow},this.props.children))}}]),n}(q.a.Component),N()(De,"propTypes",{location:F.a.any,history:F.a.any,deviceDict:F.a.any,updateList:F.a.func,children:F.a.any}),Ie=xe))||Ie)||Ie,Ae=a(16),ze=a.n(Ae);function Ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(a),!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ke(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function We(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ve,Je,$e,He,Qe=d.a.Item,Xe=m.a.TextArea,Ye=L.a.Option,Ze=Object(Z.b)("root")(je=Object(Z.b)("deviceDict")(je=Object(Z.c)((_e=Te=function(e){I()(n,e);var t,a=(t=n,function(){var e,a=R()(t);if(We()){var n=R()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return x()(this,e)});function n(e){var t;return v()(this,n),t=a.call(this,e),N()(k()(t),"onFinish",(function(e){if(!t.state.portsLength)return j.a.error({title:"请选择端口"}),!1;var a=Ge({},e,{version:t.props.defaultData.version});t.state.resetUw&&(a=Ge({},a,{locationId:t.state.regionInfo.fullLocationId,cabinetId:t.state.cabinetInfo.id,startubat:t.state.ubitInfo.uw})),t.props.onOk(a)})),N()(k()(t),"onResetSearch",(function(){t.formRefEdit.current.resetFields()})),N()(k()(t),"onModalshow",(function(){t.setState({showModal:!0})})),N()(k()(t),"onClose",(function(){t.props.onClose()})),N()(k()(t),"resetUw",(function(e){var a=e.target.value;a!=t.state.uw&&t.setState({resetUw:!0,uw:parseInt(a),ubitInfo:{},regionInfo:{},cabinetInfo:{},locationCode:void 0,fullLocationName:void 0,cabinetName:void 0})})),N()(k()(t),"onSelectUBit",(function(e){var a=e.uBitInfo.uw+t.state.uw-1,n="".concat(e.regionInfo.fullLocationCode,"-").concat(e.cabinetInfo.row,"-").concat(e.cabinetInfo.coulmn,"-").concat(e.uBitInfo.uw,"-").concat(a);t.setState({ubitInfo:e.uBitInfo,regionInfo:e.regionInfo,cabinetInfo:e.cabinetInfo,locationCode:n,fullLocationName:e.regionInfo.fullLocationName,cabinetName:e.cabinetInfo.name})})),N()(k()(t),"savePort",(function(e){t.setState({portsLength:e})})),t.formRefEdit=q.a.createRef(),t.devideDetail=t.props.defaultData,t.fullLocationName=t.props.defaultData.fullLocationName,t.locationCode=t.props.defaultData.locationCode,t.cabinetName=t.props.defaultData.cabinetName,t.state={resetUw:!1,showModal:!1,modalLoading:!1,uw:null,ubitInfo:{},regionInfo:{},cabinetInfo:{},devideDetail:{},locationCode:void 0,portsLength:t.props.defaultData.num},t}return g()(n,[{key:"componentDidMount",value:function(){this.getDetail(this.props.deviceId)}},{key:"componentWillReceiveProps",value:function(e){null!=this.props.deviceId&&e.deviceId!==this.props.deviceId&&this.getDetail(this.props.deviceId)}},{key:"getDetail",value:function(e){var t=this;this.setState({modalLoading:!0}),ee.a.get("".concat(BSS_ADMIN_URL,"/api/product/network/devices/").concat(e,"/get")).then((function(e){if(e=e.data,te.a.hasStatusOk(e)){var a=e.data;t.setState({modalLoading:!1,devideDetail:a,locationCode:a.locationCode,fullLocationName:a.fullLocationName,cabinetName:a.cabinetName,portsLength:a.devicePortList.length}),t.formRefEdit.current.setFieldsValue({brand:a.brand,deviceName:a.deviceName,deviceType:a.deviceType,ip:a.ip,modelnumber:a.modelnumber,purchasingtime:ze()(a.purchasingtime),remarks:a.remarks,status:a.status,storagetime:ze()(a.storagetime),uw:a.uw})}else te.a.dealFail(e),t.setState({modalLoading:!1})})).catch((function(){t.setState({modalLoading:!1})}))}},{key:"render",value:function(){var e=this,t=this.props.deviceDict,a=t.devicebrand,n=t.devicemodel,l=this.state,r=l.uw,o=l.locationCode,i=l.fullLocationName,c=l.cabinetName,u=l.portsLength;return q.a.createElement(q.a.Fragment,null,q.a.createElement(d.a,{name:"form_in_modal",ref:this.formRefEdit,className:"g-modal-field",initialValues:this.props.defaultData,onFinish:this.onFinish},q.a.createElement(oe.a,null,q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(Qe,me()({label:"设备名称",name:"deviceName",rules:[{required:!0}]},fe.a),q.a.createElement(m.a,{maxLength:60,type:"text",placeholder:"请输入"}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(Qe,me()({label:q.a.createElement("span",{className:"required"}," U位")},fe.a),q.a.createElement(Qe,{name:"uw",rules:[{required:!0,pattern:ye.a.isNozeroNumber,message:"请输入占用U位数"}],style:{display:"inline-block",width:150}},q.a.createElement(m.a,{maxLength:2,onChange:this.resetUw})),q.a.createElement(Ee.a,{uw:r,title:"选择U位",onSelect:function(t){e.onSelectUBit(t)}},q.a.createElement(s.a,{style:{width:120},disabled:!r},"选择U位")))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(Qe,me()({label:q.a.createElement("span",{className:"required"}," 区域")},fe.a),q.a.createElement(m.a,{placeholder:"地区/机房/区域(自动生成)",type:"text",disabled:!0,value:i}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(Qe,me()({label:q.a.createElement("span",{className:"required"}," 机柜")},fe.a),q.a.createElement(m.a,{placeholder:"自动生成",type:"text",disabled:!0,value:c}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(Qe,me()({label:q.a.createElement("span",{className:"required"}," 位置码")},fe.a),q.a.createElement(m.a,{placeholder:"自动生成",type:"text",disabled:!0,value:o}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(Qe,me()({label:"管理IP",name:"ip",rules:[{required:!0,pattern:ye.a.ipv4,message:"请输入合法的ipv4地址"}]},fe.a),q.a.createElement(m.a,{type:"text"}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(Qe,me()({label:"设备类型",name:"deviceType",rules:[{required:!0}]},fe.a),q.a.createElement(L.a,null,he.a.map(ae.f.re_facility,(function(e,t){return q.a.createElement(Ye,{value:parseInt(t),key:t}," ",e," ")}))))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(Qe,me()({label:"设备品牌",name:"brand",rules:[{required:!0}]},fe.a),q.a.createElement(L.a,null,he.a.map(a,(function(e,t){return q.a.createElement(Ye,{value:parseInt(t),key:t}," ",e," ")}))))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(Qe,me()({label:"设备型号",name:"modelnumber",rules:[{required:!0}]},fe.a),q.a.createElement(L.a,null,he.a.map(n,(function(e,t){return q.a.createElement(Ye,{value:parseInt(t),key:t}," ",e," ")}))))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(Qe,me()({label:q.a.createElement("span",{className:"required"}," 端口数量")},fe.a),q.a.createElement(Qe,{style:{display:"inline-block",width:150}},q.a.createElement(m.a,{value:u,type:"text",disabled:!0})))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},q.a.createElement(Qe,me()({label:"备注",name:"remark"},fe.b),q.a.createElement(Xe,{autoSize:{minRows:5},placeholder:"请输入"})))),q.a.createElement("div",{className:"actions-btn"},q.a.createElement(s.a,{htmlType:"submit",className:"action-btn ok"},"确认提交"),q.a.createElement(s.a,{onClick:this.onResetSearch,className:"action-btn ok"},"重置"),q.a.createElement(s.a,{onClick:this.onClose,className:"action-btn ok"},"取消"))),q.a.createElement("span",{onClick:this.onModalshow},this.props.children))}}]),n}(q.a.Component),N()(Te,"propTypes",{location:F.a.any,history:F.a.any,root:F.a.any,children:F.a.any,deviceDict:F.a.any,powers:F.a.array,onClose:F.a.func,onOk:F.a.func,deviceId:F.a.string,defaultData:F.a.any}),je=_e))||je)||je)||je,et=(a(1673),a(1675)),tt=a.n(et);a(3);function at(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var nt,lt,rt,ot=(Ve=Object(Z.b)("root"),Object(ge.g)(Je=Ve(Je=Object(Z.c)((He=$e=function(e){I()(n,e);var t,a=(t=n,function(){var e,a=R()(t);if(at()){var n=R()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return x()(this,e)});function n(e){var t;return v()(this,n),t=a.call(this,e),N()(k()(t),"formRefSearch",q.a.createRef()),t.state={lists:[]},t}return g()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){e.lists!=this.props.lists&&this.setState({lists:e.lists})}},{key:"makeColumns",value:function(){return[{title:"端口",dataIndex:"port",key:"port"},{title:"端口类型",dataIndex:"sult",key:"sult",render:function(e,t){return ae.h.port_type[e]}},{title:"端口状态",dataIndex:"status",key:"status",render:function(e){return te.a.renderStatus(ae.h.port_use,e)}},{title:"端口速率（Mbps）",dataIndex:"speed",key:"speed"},{title:"浏览图url",dataIndex:"url",key:"url"},{title:"连接信息（管理IP）",dataIndex:"manageIp",width:150,key:"manageIp"},{title:"连接信息（网卡名）",dataIndex:"deviceNetworkName",width:150,key:"deviceNetworkName"},{title:"连接信息（服务器名称）",dataIndex:"deviceName",width:150,key:"deviceName"},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"search",value:function(e){null==e.port&&j.a.warning({title:"请输入查询条件"});var t=new RegExp(e.port),a=he.a.filter(this.props.lists,(function(e){return t.test(e.port)}));this.setState({lists:a})}},{key:"render",value:function(){var e=this,t=this.state.lists;return q.a.createElement(q.a.Fragment,null,q.a.createElement("div",{className:"g-search"},q.a.createElement(d.a,{ref:this.formRefSearch,name:"searchbox",layout:"inline",onFinish:function(t){e.search(t)}},q.a.createElement(d.a.Item,{name:"port",label:"端口"},q.a.createElement(m.a,{style:{width:100},placeholder:"端口"})),q.a.createElement(d.a.Item,{shouldUpdate:!0},q.a.createElement(s.a,{type:"primary",htmlType:"submit"},"查询")))),q.a.createElement("div",{className:"g-table"},q.a.createElement(o.a,{columns:this.makeColumns(),rowKey:function(e){return e.port},dataSource:t,size:"small"})))}}]),n}(q.a.Component),N()($e,"propTypes",{location:F.a.any,history:F.a.any,match:F.a.any,root:F.a.any,PortTempParam:F.a.any,powers:F.a.array,lists:F.a.any}),Je=He))||Je)||Je)||Je);function it(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var st,ct,dt,ut,mt,pt=d.a.Item,ht=m.a.TextArea,ft=L.a.Option,yt=Object(Z.b)("root")(nt=Object(Z.b)("deviceDict")(nt=Object(Z.b)("portDict")(nt=Object(Z.c)((rt=lt=function(e){I()(n,e);var t,a=(t=n,function(){var e,a=R()(t);if(it()){var n=R()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return x()(this,e)});function n(e){var t;return v()(this,n),t=a.call(this,e),N()(k()(t),"formRefAdd",q.a.createRef()),N()(k()(t),"onModalShow",(function(){Object.keys(t.props.portDict.portprefix).length<=0&&t.props.portDict.fetchPortPrefix(),Object.keys(t.props.deviceDict.devicebrand).length<=0&&t.props.deviceDict.fetchDeviceBrand(),Object.keys(t.props.deviceDict.devicemodel).length<=0&&t.props.deviceDict.fetchDeviceModel(),t.getDetail(t.props.deviceId),t.setState({showModal:!0})})),N()(k()(t),"onClose",(function(){t.setState({showModal:!1})})),t.PortTempParam={deviceModelId:void 0,deviceType:void 0},t.ports=[],t.state={showModal:!1,modalLoading:!1,devideDetail:{devicePortList:[]},uw:null,ubitInfo:{},regionInfo:{},cabinetInfo:{}},t}return g()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(e){var t=this;this.setState({modalLoading:!0}),ee.a.get("".concat(BSS_ADMIN_URL,"/api/product/network/devices/").concat(e,"/get")).then((function(e){if(e=e.data,te.a.hasStatusOk(e)){var a=e.data;t.formRefAdd.current.setFieldsValue({brand:a.brand,deviceName:a.deviceName,deviceSn:a.deviceSn,deviceType:a.deviceType,cabinetName:a.cabinetName,fullLocationName:a.fullLocationName,ip:a.ip,locationCode:a.locationCode,modelnumber:a.modelnumber,num:a.num,purchasingtime:ze()(a.purchasingtime),remark:a.remark,startubat:a.startubat,status:a.status,storagetime:ze()(a.storagetime),uw:a.uw}),t.setState({modalLoading:!1,devideDetail:a})}else te.a.dealFail(e),t.setState({modalLoading:!1})})).catch((function(){t.setState({modalLoading:!1})}))}},{key:"render",value:function(){var e=this.props.deviceDict,t=e.devicebrand,a=e.devicemodel,n=this.state,l=n.devideDetail,r=n.showModal,o=n.modalLoading;return q.a.createElement(q.a.Fragment,null,q.a.createElement(j.a,{title:"查看网络设备",maskClosable:!1,width:"80%",destroyOnClose:!0,footer:null,onCancel:this.onClose,visible:r},q.a.createElement(le.a,{tip:"Loading...",spinning:o},q.a.createElement(d.a,{name:"form_in_modal",ref:this.formRefAdd,className:"g-modal-field"},q.a.createElement(oe.a,null,q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(pt,me()({label:"设备名称",name:"deviceName",rules:[{required:!0}]},fe.a),q.a.createElement(m.a,{type:"text",disabled:!0}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(pt,me()({label:q.a.createElement("span",{className:"required"}," U位"),name:"uw"},fe.a),q.a.createElement(m.a,{disabled:!0}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(pt,me()({label:q.a.createElement("span",{className:"required"}," 区域"),name:"fullLocationName"},fe.a),q.a.createElement(m.a,{type:"text",disabled:!0}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(pt,me()({label:q.a.createElement("span",{className:"required"}," 机柜"),name:"cabinetName"},fe.a),q.a.createElement(m.a,{type:"text",disabled:!0}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(pt,me()({label:q.a.createElement("span",{className:"required"}," 位置码"),name:"locationCode"},fe.a),q.a.createElement(m.a,{type:"text",disabled:!0}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(pt,me()({label:"管理IP",name:"ip",rules:[{required:!0}]},fe.a),q.a.createElement(m.a,{type:"text",disabled:!0}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(pt,me()({label:"设备类型",name:"deviceType",rules:[{required:!0}]},fe.a),q.a.createElement(L.a,{disabled:!0},he.a.map(ae.f.re_facility,(function(e,t){return q.a.createElement(ft,{value:parseInt(t),key:t}," ",e," ")}))))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(pt,me()({label:"设备品牌",name:"brand",rules:[{required:!0}]},fe.a),q.a.createElement(L.a,{disabled:!0},he.a.map(t,(function(e,t){return q.a.createElement(ft,{value:parseInt(t),key:t}," ",e," ")}))))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(pt,me()({label:"设备型号",name:"modelnumber",rules:[{required:!0}]},fe.a),q.a.createElement(L.a,{disabled:!0},he.a.map(a,(function(e,t){return q.a.createElement(ft,{value:parseInt(t),key:t}," ",e," ")}))))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(pt,me()({label:q.a.createElement("span",{className:"required"}," 端口数量"),name:"num"},fe.a),q.a.createElement(m.a,{disabled:!0}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(pt,me()({label:"采购时间",name:"purchasingtime",rules:[{required:!0}]},fe.a),q.a.createElement(se.a,{style:{width:"100%"},disabled:!0}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},q.a.createElement(pt,me()({label:"入库时间",name:"storagetime",rules:[{required:!0}]},fe.a),q.a.createElement(se.a,{style:{width:"100%"},disabled:!0}))),q.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},q.a.createElement(pt,me()({label:"备注",name:"remark"},fe.b),q.a.createElement(ht,{autoSize:{minRows:5},disabled:!0}))))),q.a.createElement(tt.a,{defaultActiveKey:["1"]},q.a.createElement(tt.a.Panel,{header:"端口信息",key:"1"},q.a.createElement(ot,{lists:l.devicePortList}))))),q.a.createElement("span",{onClick:this.onModalShow},this.props.children))}}]),n}(q.a.Component),N()(lt,"propTypes",{location:F.a.any,history:F.a.any,root:F.a.any,children:F.a.any,deviceDict:F.a.any,portDict:F.a.any,operateType:F.a.string,powers:F.a.array,deviceId:F.a.string,data:F.a.any,visible:F.a.bool,modalLoading:F.a.bool,onOk:F.a.func,onClose:F.a.func}),nt=rt))||nt)||nt)||nt)||nt;function Et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function vt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(a),!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Et(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function bt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var gt,wt,kt,St,It,Dt=L.a.Option,xt=(st=Object(Z.b)("root"),ct=Object(Z.b)("portDict"),Object(ge.g)(dt=st(dt=ct(dt=Object(Z.c)((mt=ut=function(e){I()(n,e);var t,a=(t=n,function(){var e,a=R()(t);if(bt()){var n=R()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return x()(this,e)});function n(e){var t;return v()(this,n),t=a.call(this,e),N()(k()(t),"formRefAdd",q.a.createRef()),N()(k()(t),"formRefEditPort",q.a.createRef()),N()(k()(t),"onClose",(function(){t.setState({showModal:!1})})),N()(k()(t),"onOkEdit",(function(e){e=te.a.clearNull(e);var a=[];"one"==t.editType?a.push(vt({id:t.nowData.id,version:t.nowData.version,networkDeviceId:t.props.deviceId},e)):he.a.map(t.selectedRows,(function(n){a.push(vt({networkDeviceId:t.props.deviceId,id:n.id,version:n.version},e))})),t.setState({Editloading:!0}),ee.a.post("".concat(BSS_ADMIN_URL,"/api/product/network/devices/port/allupdate"),a).then((function(e){e=e.data,te.a.hasStatusOk(e)?(t.setState({Editloading:!1,showModalEdit:!1}),t.getDetail()):(te.a.dealFail(e),t.setState({Editloading:!1}))})).catch((function(){t.setState({Editloading:!1})}))})),N()(k()(t),"onCloseEdit",(function(){t.setState({showModalEdit:!1})})),t.portkeys={},t.newDataLen=0,t.selectedRows=[],t.editType=null,t.nowData={},t.origionList=[],t.state={lists:[],loading:!1,showModal:!1,showModalEdit:!1,Editloading:!1},t}return g()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(){var e=this;this.setState({loading:!0}),ee.a.get("".concat(BSS_ADMIN_URL,"/api/product/network/devices/port"),{params:{networkDeviceId:this.props.deviceId}}).then((function(t){if(t=t.data,te.a.hasStatusOk(t)){e.origionList=t.data;var a=[];he.a.map(t.data,(function(e){a.push(e.port)})),e.portkeys=a,e.setState({loading:!1,lists:t.data,selectedRowKeys:[]}),e.props.onSelect(t.data.length)}else te.a.dealFail(t),e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"search",value:function(e){if(e.port){var t=new RegExp(e.port),a=he.a.filter(this.origionList,(function(e){return t.test(e.port)}));this.setState({lists:a})}else this.setState({lists:this.origionList})}},{key:"onDelOne",value:function(e,t,a){var n=this,l=[];l.push(e),ee.a.delete("".concat(BSS_ADMIN_URL,"/api/product/network/devices/port/alldel"),{data:l}).then((function(e){e=e.data,te.a.hasStatusOk(e)?(n.selectedRows=[],n.setState({selectedRowKeys:[]}),n.getDetail()):(te.a.dealFail(e),n.setState({loading:!1}))})).catch((function(){n.setState({loading:!1})}))}},{key:"dealSelectedCache",value:function(){var e=this,t=he.a.cloneDeep(this.selectedRows);this.selectedRows=he.a.dropWhile(t,(function(t){return!he.a.includes(e.portkeys,t.port)}))}},{key:"fetchDel",value:function(){var e=this,t=[];he.a.map(this.selectedRows,(function(e){t.push(e.id)})),this.setState({loading:!0}),ee.a.delete("".concat(BSS_ADMIN_URL,"/api/product/network/devices/port/alldel"),{data:t}).then((function(t){t=t.data,te.a.hasStatusOk(t)?(e.selectedRows=[],e.setState({selectedRowKeys:[]}),e.getDetail(),e.onCancel()):(te.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"onBatchDel",value:function(){var e=this;if(this.dealSelectedCache(),this.selectedRows.length<=0)return j.a.warning({title:"请至少选择一条数据",content:""}),!1;j.a.confirm({icon:q.a.createElement(Y.a,null),title:"删除",content:"是否确认删除？",onOk:function(){e.fetchDel()},onCancel:function(){console.log("Cancel")}})}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.setState({selectedRowKeys:e})}},{key:"modalShow",value:function(){Object.keys(this.props.portDict.portprefix).length<=0&&this.props.portDict.fetchPortPrefix(),this.getDetail(),this.setState({showModal:!0})}},{key:"modalShowEdit",value:function(e,t){return this.editType=e,"one"==e?(this.nowData=t,this.setState({showModalEdit:!0}),!1):"batch"==e?(this.dealSelectedCache(),this.selectedRows.length<=0?(j.a.error({title:"请至少选择一条数据"}),!0):(this.nowData={},this.setState({showModalEdit:!0}),!1)):void 0}},{key:"makeColumns",value:function(){var e=this;return[{title:"端口",dataIndex:"port",key:"port"},{title:"端口类型",dataIndex:"sult",key:"sult",render:function(e,t){return ae.h.port_type[e]}},{title:"端口状态",dataIndex:"status",key:"status",render:function(e){return te.a.renderStatus(ae.h.port_use,e)}},{title:"端口速率（Mbps）",dataIndex:"speed",key:"speed"},{title:"浏览图url",dataIndex:"url",key:"url"},{title:"连接信息（管理IP）",dataIndex:"manageIp",width:150,key:"manageIp"},{title:"连接信息（网卡名）",dataIndex:"deviceNetworkName",width:150,key:"deviceNetworkName"},{title:"连接信息（服务器名称）",dataIndex:"deviceName",width:150,key:"deviceName"},{title:"备注",dataIndex:"remark",key:"remark"},{title:"操作",key:"control",fixed:"right",width:100,render:function(t,a,n){var l=[];a.id&&l.push(q.a.createElement("span",{key:"0",className:"control-btn blue",onClick:function(){return e.modalShowEdit("one",a)}},q.a.createElement(y.a,{placement:"top",title:"编辑"},q.a.createElement(A.a,null)))),a.id&&2!=a.status&&l.push(q.a.createElement("span",{key:"1",className:"control-btn red",onClick:function(){return e.onDelOne(a.id,n,a)}},q.a.createElement(y.a,{placement:"top",title:"删除"},q.a.createElement(z.a,null))));var r=[];return l.forEach((function(e,t){t&&r.push(q.a.createElement(h.a,{key:"line".concat(t),type:"vertical"})),r.push(e)})),r}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,l=t.showModalEdit,r=t.loading,i=t.selectedRowKeys;return q.a.createElement(q.a.Fragment,null,q.a.createElement(j.a,{title:this.props.title,maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},q.a.createElement("div",{className:"g-search"},q.a.createElement(d.a,{ref:this.formRefAdd,name:"searchbox",layout:"inline",onFinish:function(t){e.search(t)}},q.a.createElement(d.a.Item,{name:"port",label:"端口号"},q.a.createElement(m.a,{style:{width:100},placeholder:"端口号"})),q.a.createElement(d.a.Item,null,q.a.createElement(s.a,{type:"primary",htmlType:"submit"},"查询")))),q.a.createElement("div",{className:"g-operate"},q.a.createElement(s.a,{size:"middle",type:"dashed",onClick:function(){e.modalShowEdit("batch")}},"批量编辑"),q.a.createElement(s.a,{size:"middle",type:"dashed",onClick:function(){e.onBatchDel()}},"批量删除")),q.a.createElement("div",{className:"g-table"},q.a.createElement(o.a,{columns:this.makeColumns(),rowKey:function(e){return e.port},loading:r,dataSource:a,rowSelection:{type:"checkbox",selectedRowKeys:i,onChange:function(t,a){e.selectedRow(t,a)},getCheckboxProps:function(e){return{disabled:2==e.status}}}}))),q.a.createElement(j.a,{title:"one"==this.editType?"编辑":"批量编辑",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onCancel:this.onCloseEdit,visible:l},q.a.createElement(d.a,{ref:this.formRefEditPort,name:"editbox",initialValues:this.nowData,className:"g-modal-field",onFinish:function(t){e.onOkEdit(t)}},q.a.createElement(d.a.Item,me()({name:"port",label:"端口",rules:[{required:"one"==this.editType,message:"请输入"}]},fe.a),q.a.createElement(m.a,{placeholder:"端口",disabled:!0})),q.a.createElement(d.a.Item,me()({name:"sult",label:"端口类型",rules:[{required:"one"==this.editType,message:"请选择"}]},fe.a),q.a.createElement(L.a,{placeholder:"端口类型"},he.a.map(ae.h.port_type,(function(e,t){return q.a.createElement(Dt,{value:parseInt(t),key:t}," ",e," ")})))),q.a.createElement(d.a.Item,me()({name:"status",label:"端口状态",rules:[{required:"one"==this.editType,message:"请选择"}]},fe.a),q.a.createElement(L.a,{disabled:2==this.nowData.status,placeholder:"端口状态"},he.a.map(ae.h.port_use,(function(e,t){return q.a.createElement(Dt,{value:parseInt(t),key:t,disabled:2==t}," ",e.text," ")})))),q.a.createElement(d.a.Item,me()({name:"speed",label:"端口速率(Mbps)",rules:[{required:"one"==this.editType,message:"请输入"}]},fe.a),q.a.createElement(m.a,{placeholder:"端口速率"})),"one"==this.editType&&q.a.createElement(d.a.Item,me()({name:"url",label:"流量图URL"},fe.a),q.a.createElement(m.a,{placeholder:"流量图URL"})),q.a.createElement(d.a.Item,me()({name:"remark",label:"备注"},fe.a),q.a.createElement(m.a,{placeholder:"备注"})),q.a.createElement("div",{className:"actions-btn"},q.a.createElement(s.a,{type:"primary",className:"action-btn ok",htmlType:"submit"},"保存"),q.a.createElement(s.a,{type:"primary",className:"action-btn ok",onClick:this.onCloseEdit},"取消")))),q.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(q.a.Component),N()(ut,"propTypes",{location:F.a.any,history:F.a.any,match:F.a.any,root:F.a.any,cabinetDict:F.a.any,powers:F.a.array,defaultData:F.a.any,onOk:F.a.func,onClose:F.a.func}),dt=mt))||dt)||dt)||dt)||dt),Ot=(a(416),a(192)),Rt=a.n(Ot);function Ct(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Nt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(a),!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ct(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Pt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Lt,Mt,jt,Tt=d.a.Item,_t=m.a.TextArea,qt=L.a.Option,Ut=(Rt.a.TreeNode,gt=Object(Z.b)("root"),wt=Object(Z.b)("portDict"),Object(ge.g)(kt=gt(kt=wt(kt=Object(Z.c)((It=St=function(e){I()(n,e);var t,a=(t=n,function(){var e,a=R()(t);if(Pt()){var n=R()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return x()(this,e)});function n(e){var t;return v()(this,n),t=a.call(this,e),N()(k()(t),"formRefAdd",q.a.createRef()),N()(k()(t),"formRefPortEdit",q.a.createRef()),N()(k()(t),"onOk",(function(){var e=t.state.lists;if(t.newDataLen<=0)return j.a.error({title:"没有新增数据可保存"}),!1;t.setState({modalLoading:!0}),ee.a.post("".concat(BSS_ADMIN_URL,"/api/product/network/devices/port/alladd"),e).then((function(e){e=e.data,te.a.hasStatusOk(e)?(t.props.onSelect(t.portkeys.length),t.setState({modalLoading:!1,showModal:!1})):(te.a.dealFail(e),t.setState({modalLoading:!1,showModal:!1}))})).catch((function(){t.setState({modalLoading:!1,showModal:!1})}))})),N()(k()(t),"onClose",(function(){t.setState({showModal:!1})})),N()(k()(t),"onOkEdit",(function(e){e=te.a.clearNull(e);var a=he.a.cloneDeep(t.state.lists);if("one"==t.editType){var n=he.a.findIndex(a,(function(e){return t.nowData.port==e.port}));a[n]=Nt({},t.nowData,{},e)}else he.a.map(t.selectedRows,(function(t){var n=he.a.findIndex(a,(function(e){return t.port==e.port}));a[n]=Nt({},t,{},e)}));t.setState({lists:a,showModalEdit:!1})})),N()(k()(t),"onCloseEdit",(function(){t.setState({showModalEdit:!1})})),t.portkeys={},t.newDataLen=0,t.selectedRows=[],t.editType=null,t.nowData={},t.state={lists:[],loading:!1,showModal:!1,showModalEdit:!1,Editloading:!1},t}return g()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDevicePorts",value:function(){var e=this;this.setState({loading:!0}),ee.a.get("".concat(BSS_ADMIN_URL,"/api/product/network/devices/port"),{params:{networkDeviceId:this.props.deviceId}}).then((function(t){if(t=t.data,te.a.hasStatusOk(t)){var a=[];he.a.map(t.data,(function(e){a.push(e.port)})),e.portkeys=a,e.setState({loading:!1})}else te.a.dealFail(t),e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"GeneratePort",value:function(e){var t=e.prefix,a=e.sult,n=e.start,l=e.ends,r=e.speed;if(n>l)return j.a.error({title:"开始值不能大于结束值"}),!1;for(var o=[],i=n;i<=l;i++){var s="".concat(t).concat(i);if(he.a.includes(this.portkeys,s))return j.a.error({title:"".concat(s,"端口已存在，请重新选择开始和结束值！")}),!1;this.newDataLen=l-n+1,o.push({id:null,networkDeviceId:this.props.deviceId,sult:a,port:s,speed:r,status:1,remark:"",url:""})}this.setState({lists:o})}},{key:"onDelOne",value:function(e,t){var a=he.a.cloneDeep(this.state.lists);this.newDataLen=this.newDataLen-1,this.portkeys.splice(this.portkeys.indexOf(t.port),1),a.splice(e,1),this.setState({lists:a})}},{key:"dealSelectedCache",value:function(){var e=this,t=he.a.cloneDeep(this.selectedRows);this.selectedRows=he.a.dropWhile(t,(function(t){return!he.a.includes(e.portkeys,t.port)}))}},{key:"onBatchDel",value:function(){var e=this;if(this.dealSelectedCache(),this.state.selectedRowKeys.length<=0)return j.a.warning({title:"请至少选择一条数据",content:""}),!1;var t=he.a.filter(this.state.lists,(function(t){return!e.state.selectedRowKeys.includes(t.port)}));this.selectedRows=[],this.setState({selectedRowKeys:[],lists:t})}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.setState({selectedRowKeys:e})}},{key:"modalShow",value:function(){Object.keys(this.props.portDict.portprefix).length<=0&&this.props.portDict.fetchPortPrefix(),this.getDevicePorts(),this.setState({showModal:!0,lists:[]})}},{key:"modalShowEdit",value:function(e,t){if(this.editType=e,"one"==e)return this.nowData=t,this.setState({showModalEdit:!0}),!1;if("batch"==e){if(this.dealSelectedCache(),this.selectedRows.length<=0)return j.a.error({title:"请至少选择一条数据"}),!0;this.nowData={},this.setState({showModalEdit:!0})}}},{key:"makeColumns",value:function(){var e=this;return[{title:"端口",dataIndex:"port",width:150,key:"port"},{title:"端口类型",dataIndex:"sult",width:150,key:"sult",render:function(e,t){return ae.h.port_type[e]}},{title:"端口状态",dataIndex:"status",width:150,key:"status",render:function(e,t){return null==e&&(e=1),te.a.renderStatus(ae.h.port_use,e)}},{title:"端口速率（Mbps）",dataIndex:"speed",width:150,key:"speed"},{title:"浏览图url",dataIndex:"url",width:150,key:"url"},{title:"备注",dataIndex:"remark",width:150,key:"remark"},{title:"操作",key:"control",fixed:"right",width:160,render:function(t,a,n){var l=[];l.push(q.a.createElement("span",{key:"0",className:"control-btn blue",onClick:function(){return e.modalShowEdit("one",a)}},q.a.createElement(y.a,{placement:"top",title:"编辑"},q.a.createElement(A.a,null)))),l.push(q.a.createElement("span",{key:"1",className:"control-btn red",onClick:function(){return e.onDelOne(n,a)}},q.a.createElement(y.a,{placement:"top",title:"删除"},q.a.createElement(z.a,null))));var r=[];return l.forEach((function(e,t){t&&r.push(q.a.createElement(h.a,{key:"line".concat(t),type:"vertical"})),r.push(e)})),r}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,l=t.showModalEdit,r=t.loading;return q.a.createElement(q.a.Fragment,null,q.a.createElement(j.a,{title:this.props.title,maskClosable:!1,width:"90%",destroyOnClose:!0,okText:"保存",onOk:this.onOk,onCancel:this.onClose,visible:n},q.a.createElement("div",{className:"mian"},q.a.createElement("div",{className:"g-search"},q.a.createElement(d.a,{ref:this.formRefAdd,name:"searchbox",layout:"inline",onFinish:function(t){e.GeneratePort(t)}},q.a.createElement(d.a.Item,{name:"prefix",label:"前缀",rules:[{required:!0,message:"请选择"}]},q.a.createElement(L.a,{style:{width:150},placeholder:"前缀"},he.a.map(this.props.portDict.portprefix,(function(e,t){return q.a.createElement(qt,{value:e,key:t}," ",e," ")})))),q.a.createElement(d.a.Item,{name:"sult",label:"端口类型",rules:[{required:!0,message:"请选择"}]},q.a.createElement(L.a,{style:{width:150},placeholder:"端口类型"},he.a.map(ae.h.port_type,(function(e,t){return q.a.createElement(qt,{value:parseInt(t),key:t}," ",e," ")})))),q.a.createElement(d.a.Item,{name:"start",label:"开始值",rules:[{required:!0,message:"请输入"}]},q.a.createElement(be.a,{style:{width:80},placeholder:"开始值"})),q.a.createElement(d.a.Item,{name:"ends",label:"结束值",rules:[{required:!0,message:"请输入"}]},q.a.createElement(be.a,{style:{width:80},placeholder:"结束值"})),q.a.createElement(d.a.Item,{name:"speed",label:"端口速率(Mbps)",rules:[{required:!0,message:"请输入"}]},q.a.createElement(m.a,{style:{width:100},placeholder:"端口速率"})),q.a.createElement(d.a.Item,{shouldUpdate:!0},q.a.createElement(s.a,{type:"primary",htmlType:"submit"},"生成端口")))),q.a.createElement("div",{className:"g-table"},q.a.createElement(o.a,{columns:this.makeColumns(),rowKey:function(e){return e.port},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"checkbox",onChange:function(t,a){e.selectedRow(t,a)}}})))),q.a.createElement(j.a,{title:"批量编辑",maskClosable:!1,width:"90%",footer:!1,onCancel:this.onCloseEdit,visible:l},q.a.createElement(d.a,{ref:this.formRefPortEdit,name:"editbox",initialValues:this.nowData,className:"g-modal-field",onFinish:function(t){e.onOkEdit(t)}},q.a.createElement(d.a.Item,me()({name:"sult",label:"端口类型"},fe.a),q.a.createElement(L.a,{placeholder:"端口类型"},he.a.map(ae.h.port_type,(function(e,t){return q.a.createElement(qt,{value:parseInt(t),key:t}," ",e," ")})))),q.a.createElement(d.a.Item,me()({name:"speed",label:"端口速率(Mbps)"},fe.a),q.a.createElement(m.a,{placeholder:"端口速率"})),q.a.createElement(d.a.Item,me()({name:"status",label:"端口状态"},fe.a),q.a.createElement(L.a,{placeholder:"端口状态"},he.a.map(ae.h.port_use,(function(e,t){return q.a.createElement(qt,{value:parseInt(t),key:t,disabled:2==t}," ",e.text," ")})))),q.a.createElement(d.a.Item,me()({name:"url",label:"浏量图url"},fe.a),q.a.createElement(m.a,{placeholder:"浏量图url"})),q.a.createElement(Tt,me()({label:"备注",name:"remark"},fe.a),q.a.createElement(_t,{autoSize:{minRows:5},placeholder:"请输入"})),q.a.createElement("div",{className:"actions-btn"},q.a.createElement(s.a,{type:"primary",className:"action-btn ok",htmlType:"submit"},"保存"),q.a.createElement(s.a,{type:"primary",className:"action-btn ok",onClick:this.onCloseEdit},"取消")))),q.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(q.a.Component),N()(St,"propTypes",{location:F.a.any,history:F.a.any,match:F.a.any,root:F.a.any,powers:F.a.array,children:F.a.any,portDict:F.a.any,deviceId:F.a.string,title:F.a.string,onSelect:F.a.func,hardParam:F.a.any,onOk:F.a.func,onClose:F.a.func}),kt=It))||kt)||kt)||kt)||kt),Ft=a(52);function Bt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var At=j.a.confirm,zt=L.a.Option,Kt=Object(Z.b)("deviceDict")(Lt=Object(Z.c)((jt=Mt=function(e){I()(n,e);var t,a=(t=n,function(){var e,a=R()(t);if(Bt()){var n=R()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return x()(this,e)});function n(e){var t;return v()(this,n),t=a.call(this,e),N()(k()(t),"searchFormRef",q.a.createRef()),N()(k()(t),"onResetSearch",(function(){t.searchFormRef.current.resetFields()})),N()(k()(t),"onModalShow",(function(e){t.setState({modalShow:!0,nowDeviceId:e.id,nowData:e})})),N()(k()(t),"onModalOk",(function(e){t.setState({modalLoading:!0}),ee.a.put("".concat(BSS_ADMIN_URL,"/api/product/stock/").concat(t.state.nowData.id,"/update"),te.a.clearNull(e)).then((function(e){e=e.data,te.a.hasStatusOk(e)?(te.a.auto_close_result("ok","操作成功"),t.setState({page:1,modalLoading:!1,modalShow:!1}),t.onGetListData({page:1})):(te.a.dealFail(e),t.setState({modalLoading:!1}))})).catch((function(){t.setState({modalLoading:!1})}))})),N()(k()(t),"onModalClose",(function(){t.setState({modalShow:!1})})),t.selectedRows=[],t.searchParam={},t.state={lists:[],loading:!1,page:1,pageSize:20,total:0,selectedRowKeys:[],modalShow:!1,modalLoading:!1,nowDeviceId:void 0,nowData:{}},t}return g()(n,[{key:"componentDidMount",value:function(){Object.keys(this.props.deviceDict.devicebrand).length<=0&&this.props.deviceDict.fetchDeviceBrand(),Object.keys(this.props.deviceDict.devicemodel).length<=0&&this.props.deviceDict.fetchDeviceModel(),this.onGetListData()}},{key:"makeColumns",value:function(){var e=this;return[{title:"设备名称",dataIndex:"deviceName",key:"deviceName"},{title:"区域",dataIndex:"fullLocationName",key:"fullLocationName"},{title:"机柜",dataIndex:"cabinetName",key:"cabinetName"},{title:"物理位置码",dataIndex:"locationCode",key:"locationCode"},{title:"管理IP",dataIndex:"ip",key:"ip"},{title:"起始U位",dataIndex:"startubat",key:"startubat"},{title:"占用U位",dataIndex:"uw",key:"uw"},{title:"端口数量",dataIndex:"num",key:"num"},{title:"设备类型",dataIndex:"deviceType",key:"deviceType",render:function(e,t){return ae.f.re_facility[e]}},{title:"操作",key:"control",fixed:"right",width:200,render:function(t,a){var n=[],l=Ft.a.getPermission()||[];l.includes("network-devices-view")&&n.push(q.a.createElement("span",{key:"0",className:"control-btn green"},q.a.createElement(y.a,{placement:"top",title:"查看"},q.a.createElement(yt,{deviceId:a.id},q.a.createElement(B.a,null))))),l.includes("network-devices-edit")&&n.push(q.a.createElement("span",{key:"1",className:"control-btn blue"},q.a.createElement(y.a,{placement:"top",title:"修改"},q.a.createElement(A.a,{onClick:function(){e.onModalShow(a)}})))),l.includes("network-devices-delete")&&n.push(q.a.createElement("span",{key:"2",className:"control-btn red"},q.a.createElement(y.a,{placement:"top",title:"删除"},q.a.createElement(z.a,{onClick:function(){e.onDel(a.id)}})))),l.includes("network-devices-edit")&&n.push(q.a.createElement("span",{key:"3",className:"control-btn blue"},q.a.createElement(y.a,{placement:"top",title:"修改端口"},q.a.createElement(xt,{deviceId:a.id,title:"修改端口",onSelect:function(){e.onGetListData()}},q.a.createElement(Q,null))))),l.includes("network-devices-add")&&n.push(q.a.createElement("span",{key:"4",className:"control-btn blue"},q.a.createElement(y.a,{placement:"top",title:"增加端口"},q.a.createElement(Ut,{deviceId:a.id,title:"增加端口",onSelect:function(){e.onGetListData()}},q.a.createElement(X.a,null)))));var r=[];return n.forEach((function(e,t){t&&r.push(q.a.createElement(h.a,{key:"line".concat(t),type:"vertical"})),r.push(e)})),r}}]}},{key:"onGetListData",value:function(e){var t=this,a=_.assign({},{page:this.state.page,pageSize:this.state.pageSize},this.searchParam,e);this.setState({loading:!0}),ee.a.get("".concat(BSS_ADMIN_URL,"/api/product/network/devices"),{params:a}).then((function(e){e=e.data,te.a.hasStatusOk(e)?(t.selectedRows=[],t.setState({lists:e.data.records,total:e.data.total,selectedRowKeys:[]})):te.a.dealFail(e),t.setState({loading:!1})})).catch((function(){t.setState({loading:!1})}))}},{key:"onSearch",value:function(e){this.searchParam=e,this.selectedRows=[],this.setState({page:1}),this.onGetListData(e)}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.onGetListData({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.onGetListData({page:e,pageSize:t})}},{key:"getDetail",value:function(e){var t=this;ee.a.get("".concat(BSS_ADMIN_URL,"/api/product/devices/").concat(e,"/get")).then((function(e){e=e.data,te.a.hasStatusOk(e)?t.setState({nowDataCabinet:e.data,modalShow:!0,modalLoading:!1}):(te.a.dealFail(e),t.setState({modalLoading:!1}))})).catch((function(){t.setState({modalLoading:!1})}))}},{key:"onDel",value:function(e){var t=this;At({icon:q.a.createElement(Y.a,null),content:"确认要删除这条数据吗？",onOk:function(){t.setState({loading:!0}),ee.a.delete("".concat(BSS_ADMIN_URL,"/api/product/stock/").concat(e,"/delete")).then((function(e){e=e.data,te.a.hasStatusOk(e)?(te.a.auto_close_result("ok","操作成功"),t.onGetListData()):(te.a.dealFail(e),t.setState({loading:!1}))})).catch((function(){t.setState({loading:!1})}))},onCancel:function(){console.log("Cancel")}})}},{key:"batchDel",value:function(){var e=this;this.selectedRows.length<=0?j.a.warning({title:"请至少选择一条数据！"}):At({icon:q.a.createElement(Y.a,null),content:"确认执行批量删除操作吗？",onOk:function(){var t=[];console.log(e.selectedRows),_.map(e.selectedRows,(function(e){t.push(e.id)})),console.log(t),e.setState({loading:!0}),ee.a.delete("".concat(BSS_ADMIN_URL,"/api/product/stock/alldel"),{data:t}).then((function(t){t=t.data,te.a.hasStatusOk(t)?(te.a.auto_close_result("ok","操作成功"),e.onGetListData()):(te.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))},onCancel:function(){console.log("Cancel")}})}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.setState({selectedRowKeys:e})}},{key:"onModalShowUBit",value:function(e){this.setState({modalShowUBit:!0,nowCabinetId:e.id})}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.loading,r=t.page,i=t.pageSize,c=t.total,u=t.nowDeviceId,p=t.modalShow,h=t.modalLoading,f=t.nowData,y=t.selectedRowKeys,E=Ft.a.getPermission()||[];return q.a.createElement("main",{className:"mian"},q.a.createElement("div",{className:"g-search"},q.a.createElement(d.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},q.a.createElement(d.a.Item,{name:"cabinet"},q.a.createElement(m.a,{placeholder:"机柜名称",allowClear:!0})),q.a.createElement(d.a.Item,{name:"deviceName"},q.a.createElement(m.a,{placeholder:"设备名称",allowClear:!0})),q.a.createElement(d.a.Item,{name:"deviceType"},q.a.createElement(L.a,{style:{width:150},placeholder:"设备类型",allowClear:!0},_.map(ae.f.re_facility,(function(e,t){return q.a.createElement(zt,{value:parseInt(t),key:t}," ",e," ")})))),q.a.createElement(d.a.Item,{name:"ip"},q.a.createElement(m.a,{placeholder:"管理IP",allowClear:!0})),q.a.createElement(d.a.Item,null,q.a.createElement(s.a,{type:"primary",htmlType:"submit"},"搜索")),q.a.createElement(d.a.Item,null,q.a.createElement(s.a,{type:"primary",onClick:this.onResetSearch},"重置")))),q.a.createElement("div",{className:"g-operate"},E.includes("network-devices-delete")&&q.a.createElement(s.a,{className:"actions-btn",size:"middle",onClick:function(){e.batchDel()}},"批量删除"),E.includes("network-devices-add")&&q.a.createElement(Be,{updateList:function(){e.onGetListData()}},q.a.createElement(s.a,{className:"actions-btn",size:"middle"},"添加网络设备"))),q.a.createElement("div",{className:"g-table"},q.a.createElement(o.a,{scroll:{x:1400},columns:this.makeColumns(),rowKey:function(e){return e.id},loading:n,dataSource:a,pagination:!1,rowSelection:{type:"checkbox",selectedRowKeys:y,onChange:function(t,a){e.selectedRow(t,a)}}}),q.a.createElement("div",{className:"g-pagination"},q.a.createElement(l.a,{current:r,total:c,pageSize:i,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))),q.a.createElement(j.a,{title:"修改网络设备",maskClosable:!1,modalLoading:h,width:"80%",destroyOnClose:!0,footer:null,onCancel:this.onModalClose,visible:p},q.a.createElement(Ze,{onOk:this.onModalOk,onClose:this.onModalClose,defaultData:f,deviceId:u})))}}]),n}(q.a.Component),N()(Mt,"propTypes",{location:F.a.any,history:F.a.any,userinfo:F.a.any,powers:F.a.array,deviceDict:F.a.any}),Lt=jt))||Lt)||Lt}}]);