(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{1546:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return W}));a(172);var n,o,r,c=a(105),s=a.n(c),i=(a(152),a(78)),l=a.n(i),u=(a(60),a(12)),m=a.n(u),d=(a(98),a(55)),h=a.n(d),p=(a(254),a(116)),g=a.n(p),f=(a(47),a(17)),y=a.n(f),S=a(15),k=a.n(S),w=a(19),v=a.n(w),E=a(6),b=a.n(E),O=a(20),I=a.n(O),N=a(21),P=a.n(N),z=a(13),D=a.n(z),R=a(2),x=a.n(R),j=(a(58),a(11)),C=a.n(j),A=a(0),L=a.n(A),T=a(1),F=a.n(T),G=(a(1898),a(23)),J=(a(18),a(9)),M=a(52),K=a(26),U=a(28),Q=a(134),V=a.n(Q);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var H=C.a.Option,W=Object(G.b)("root")(n=Object(G.b)("customerDict")(n=Object(G.c)((r=o=function(e){I()(n,e);var t,a=(t=n,function(){var e,a=D()(t);if(B()){var n=D()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return k()(this,n),t=a.call(this,e),x()(b()(t),"searchFormRef",L.a.createRef()),x()(b()(t),"onResetSearch",(function(){t.searchFormRef.current.resetFields()})),x()(b()(t),"onModalClose",(function(){t.setState({modalShow:!1,changemodalShow:!1})})),console.log(t.props),t.selectedRow={length:0,keys:[],rows:[]},t.hardSearch={},t.searchParam={},t.locationId=void 0,t.state={searchParam:{},lists:[],loading:!1,page:1,pageSize:20,total:0,modalLoading:!1,nowData:{},modalShow:!1,selectedRowKeys:[],regionInfo:{},productList:[]},t}return v()(n,[{key:"componentDidMount",value:function(){this.getProductList(),this.onGetListData()}},{key:"getProductList",value:function(){var e=this;V()({method:"get",url:"".concat(TRADING_API,"/admin/mode/products"),headers:{Authorization:"token "+M.a.getToken()}}).then((function(t){t=t.data,console.log(t),J.a.hasStatusOk(t)?e.setState({productList:t.data}):J.a.dealFail(t),e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"onGetListData",value:function(e){var t=this;e=e||this.state.regionInfo;var a=_.assign({},{page:1},this.searchParam,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){x()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e));this.setState({loading:!0}),V()({method:"get",url:"".concat(TRADING_API,"/admin/order/page"),headers:{Authorization:"token "+M.a.getToken()},params:a}).then((function(e){e=e.data,console.log(e),J.a.hasStatusOk(e)?t.setState({lists:e.data.records,total:e.data.total}):J.a.dealFail(e),t.setState({loading:!1})})).catch((function(){t.setState({loading:!1})}))}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.onGetListData({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.onGetListData({page:e,pageSize:t})}},{key:"onSearchfrom",value:function(e){console.log(e),this.searchParam=e,this.setState({searchValue:e}),this.onGetListData(e)}},{key:"onModalShow",value:function(e,t){this.setState({modalShow:!0,nowData:t,operateType:e})}},{key:"makeColumns",value:function(){var e=this;this.state.productList;return[{title:"订单号",dataIndex:"orderNo",key:"orderNo"},{title:"用户",dataIndex:"productName",key:"productName"},{title:"购买产品",dataIndex:"productName",key:"productName"},{title:"金额",dataIndex:"orderType",key:"orderType"},{title:"申请的发票类型",dataIndex:"orderStatus",key:"orderStatus"},{title:"物流单号",dataIndex:"orderAmount",key:"orderAmount"},{title:"状态",dataIndex:"adjustmentAmount",key:"adjustmentAmount"},{title:"地址信息",dataIndex:"orderActualAmount",key:"orderActualAmount"},{title:"操作",key:"control",fixed:"right",width:540,render:function(t,a){var n=[];e.props.root.userinfo,e.props.root.powers;n.push(L.a.createElement(y.a,{key:"0",size:"small",className:"actions-btn",style:{marginRight:"8px"}},"开始处理")),n.push(L.a.createElement(y.a,{key:"0",size:"small",className:"actions-btn",style:{marginRight:"8px"}},"更新物流")),n.push(L.a.createElement(y.a,{key:"0",size:"small",className:"actions-btn",style:{marginRight:"8px"}},"异常")),n.push(L.a.createElement(y.a,{key:"0",size:"small",className:"actions-btn",style:{marginRight:"8px"}},"完成"));var o=[];return n.forEach((function(e,t){t&&o.push(L.a.createElement(g.a,{key:"line".concat(t),type:"vertical"})),o.push(e)})),o}}]}},{key:"render",value:function(){var e=this,t=(this.props.customerDict.userlist,this.state),a=t.lists,n=t.loading,o=t.page,r=t.pageSize,c=t.total;K.c.customer_sale_type;return L.a.createElement("main",{className:"mian"},L.a.createElement("div",{className:"g-search"},L.a.createElement(m.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearchfrom(t)}},L.a.createElement(m.a.Item,{name:"orderNo"},L.a.createElement(h.a,{placeholder:"请输入订单号",maxLength:"30",allowClear:!0})),L.a.createElement(m.a.Item,{name:"username"},L.a.createElement(h.a,{placeholder:"请输入用户名",maxLength:"30",allowClear:!0})),L.a.createElement(m.a.Item,{name:"orderType"},L.a.createElement(C.a,{placeholder:"请选择发票类型",allowClear:!0,style:{width:170}},_.map(U.g,(function(e,t){return L.a.createElement(H,{value:t,key:t},e)})))),L.a.createElement(m.a.Item,{name:"orderStatus"},L.a.createElement(C.a,{placeholder:"请选择发票状态",allowClear:!0,style:{width:170}},_.map(U.f,(function(e,t){return L.a.createElement(H,{value:t,key:t},e)})))),L.a.createElement(m.a.Item,{shouldUpdate:!0},L.a.createElement(y.a,{type:"primary",htmlType:"submit"},"查询")),L.a.createElement(m.a.Item,{shouldUpdate:!0},L.a.createElement(y.a,{type:"primary",onClick:this.onResetSearch},"重置")))),L.a.createElement("div",{className:"g-operate"},L.a.createElement(y.a,{size:"middle",className:"actions-btn"},"待处理"),L.a.createElement(y.a,{size:"middle",className:"actions-btn"},"待邮寄"),L.a.createElement(y.a,{size:"middle",className:"actions-btn"},"待完成")),L.a.createElement("div",{className:"g-table"},L.a.createElement(l.a,{scroll:{x:1600},columns:this.makeColumns(),rowKey:function(e){return e.id},loading:n,dataSource:a,pagination:!1}),L.a.createElement("div",{className:"g-pagination"},L.a.createElement(s.a,{current:o,total:c,pageSize:r,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))))}}]),n}(L.a.Component),x()(o,"propTypes",{location:F.a.any,history:F.a.any,root:F.a.any,match:F.a.any,customerDict:F.a.any}),n=r))||n)||n)||n},1898:function(e,t,a){}}]);