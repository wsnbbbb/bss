(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1644:function(e,t,a){"use strict";a(173);var n,r,l,o,s=a(84),i=a.n(s),c=(a(65),a(25)),d=a.n(c),m=(a(172),a(105)),u=a.n(m),p=(a(152),a(78)),h=a.n(p),f=a(15),y=a.n(f),g=a(19),v=a.n(g),E=a(6),k=a.n(E),b=a(20),S=a.n(b),w=a(21),I=a.n(w),R=a(13),x=a.n(R),N=a(2),C=a.n(N),M=(a(416),a(192)),D=a.n(M),O=(a(58),a(11)),L=a.n(O),_=(a(98),a(55)),q=a.n(_),A=(a(60),a(12)),P=a.n(A),T=a(0),B=a.n(T),F=a(1),j=a.n(F),K=(a(5),a(18)),z=a(1596),U=a(23),W=a(99),J=(a(3),a(28),a(9));a(153);function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}P.a.Item,q.a.TextArea,L.a.Option,D.a.TreeNode;var G=(n=Object(U.b)("root"),Object(W.g)(r=n(r=Object(U.c)((o=l=function(e){S()(n,e);var t,a=(t=n,function(){var e,a=x()(t);if(V()){var n=x()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return I()(this,e)});function n(e){var t;return y()(this,n),t=a.call(this,e),C()(k()(t),"formRefAdd",B.a.createRef()),C()(k()(t),"onResetSearch",(function(){t.formRefAdd.current.resetFields()})),C()(k()(t),"onClose",(function(){t.setState({modalShow:!1})})),t.selectAreaNode={},t.state={lists:[],loading:!1,modalShow:!1,page:1,pageSize:20,total:0},t}return v()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getLog",value:function(e){var t=this;this.setState({loading:!0}),K.a.get("".concat(BSS_ADMIN_URL,"/api/product/nodeserver/outboundrecord"),{params:{id:this.props.nodeMasterId}}).then((function(e){e=e.data,J.a.hasStatusOk(e)?t.setState({loading:!1,lists:e.data.records}):(J.a.dealFail(e),t.setState({loading:!1}))})).catch((function(){t.setState({loading:!1})}))}},{key:"onFinish",value:function(e){}},{key:"onPageChange",value:function(e,t){this.getLog(e,t)}},{key:"onPageSizeChange",value:function(e,t){this.getLog(e,t)}},{key:"onModalShow",value:function(){this.setState({modalShow:!0}),this.getLog()}},{key:"makeColumns",value:function(){return[{title:"节点位",dataIndex:"node",key:"node"},{title:"服务器IP",dataIndex:"serverIp",key:"serverIp"},{title:"服务器名称",dataIndex:"serverName",key:"serverName"},{title:"出库时间",dataIndex:"serverName",key:"serverName"},{title:"备注",dataIndex:"remark ",key:"remark "}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.modalShow,r=t.loading,l=t.page,o=t.total;return B.a.createElement(B.a.Fragment,null,B.a.createElement("main",{className:"mian"},B.a.createElement(d.a,{title:"出库记录",maskClosable:!1,width:"80%",onCancel:this.onClose,footer:null,visible:n},B.a.createElement("div",{className:"g-table"},B.a.createElement(h.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a}),B.a.createElement("div",{className:"g-pagination"},B.a.createElement(u.a,{size:"small",current:l,total:o,showSizeChanger:!0,onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))))),B.a.createElement("span",{className:"control-btn green",onClick:function(){return e.onModalShow()}},B.a.createElement(i.a,{placement:"top",title:"出库记录"},B.a.createElement(z.a,null))))}}]),n}(B.a.Component),C()(l,"propTypes",{location:j.a.any,history:j.a.any,match:j.a.any,root:j.a.any,powers:j.a.array,nodeMasterId:j.a.string}),r=o))||r)||r)||r);t.a=G},1672:function(e,t,a){"use strict";a(65);var n,r,l,o=a(25),s=a.n(o),i=(a(174),a(107)),c=a.n(i),d=(a(1673),a(1675)),m=a.n(d),u=(a(171),a(89)),p=a.n(u),h=(a(724),a(417)),f=a.n(h),y=(a(193),a(75)),g=a.n(y),v=a(33),E=a.n(v),k=a(15),b=a.n(k),S=a(19),w=a.n(S),I=a(6),R=a.n(I),x=a(20),N=a.n(x),C=a(21),M=a.n(C),D=a(13),O=a.n(D),L=a(2),_=a.n(L),q=(a(58),a(11)),A=a.n(q),P=(a(98),a(55)),T=a.n(P),B=(a(60),a(12)),F=a.n(B),j=a(0),K=a.n(j),z=a(1),U=a.n(z),W=a(5),J=a.n(W),V=a(18),G=a(9),H=a(16),Q=a.n(H),X=a(23),Y=a(28),Z=a(153),$=a(1674);function ee(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var te=F.a.Item,ae=T.a.TextArea,ne=A.a.Option,re=Object(X.b)("root")(n=Object(X.b)("nodeMasterDict")(n=Object(X.c)((l=r=function(e){N()(n,e);var t,a=(t=n,function(){var e,a=O()(t);if(ee()){var n=O()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return M()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),_()(R()(t),"formRefAdd",K.a.createRef()),_()(R()(t),"onModalShow",(function(){t.getDetail(t.props.deviceId),t.setState({showModal:!0})})),_()(R()(t),"onClose",(function(){t.setState({showModal:!1})})),t.state={showModal:!1,modalLoading:!1,devideDetail:{}},t}return w()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(e){var t=this;this.setState({modalLoading:!0}),V.a.get("".concat(BSS_ADMIN_URL,"/api/product/nodeserver/master/").concat(e,"/get")).then((function(e){if(e=e.data,G.a.hasStatusOk(e)){var a=e.data;t.formRefAdd.current.setFieldsValue({remark:a.remark,deviceBrand:a.deviceBrand,deviceModel:a.deviceModel,deviceSpec:a.deviceSpec,nodeNum:a.nodeNum,us:a.us,locationName:a.locationName,fullLocationName:a.locationName,cabinetName:a.cabinetName,purchasingTime:Q()(a.purchasingtime),storageTime:Q()(a.storagetime),name:a.name,positionalCode:a.positionalCode}),t.setState({modalLoading:!1,devideDetail:a})}else G.a.dealFail(e),t.setState({modalLoading:!1})})).catch((function(){t.setState({modalLoading:!1})}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.nodeMasterDict,a=t.device_spec,n=t.device_brand,r=t.device_model,l=this.state,o=l.devideDetail,i=l.showModal,d=l.modalLoading;return K.a.createElement(K.a.Fragment,null,K.a.createElement(s.a,{title:"查看外机",maskClosable:!1,width:"80%",destroyOnClose:!0,footer:null,onCancel:this.onClose,visible:i},K.a.createElement(c.a,{tip:"Loading...",spinning:d},K.a.createElement(F.a,{name:"form_in_modal",ref:this.formRefAdd,className:"g-modal-field"},K.a.createElement(p.a,null,K.a.createElement(g.a,{xs:24,sm:24,md:24,lg:12,xl:12},K.a.createElement(te,E()({label:"外机名称",name:"name",rules:[{required:!0}]},Y.a),K.a.createElement(T.a,{disabled:!0,type:"text",placeholder:"请输入"}))),K.a.createElement(g.a,{xs:24,sm:24,md:24,lg:12,xl:12},K.a.createElement(te,E()({label:K.a.createElement("span",{className:"required"}," 节点数"),style:{marginBottom:0}},Y.a),K.a.createElement(F.a.Item,{name:"sortWay",rules:[{required:!0,message:"请选择节点类型"}],style:{display:"inline-block",width:"33%"}},K.a.createElement(A.a,{placeholder:"节点类型",disabled:!0,onChange:function(t){e.resetNode("sortWay",t)}},K.a.createElement(ne,{value:"0"},"数字 (1)"),K.a.createElement(ne,{value:"1"},"字母 (A)"),K.a.createElement(ne,{value:"2"},"自定义"))),K.a.createElement(F.a.Item,{name:"nodeNum",rules:[{required:!0,message:"请输入节点数"}],style:{display:"inline-block",width:"34%"}},K.a.createElement(T.a,{placeholder:"节点数",disabled:!0,onChange:function(t){e.resetNode("nodeNum",t.target.value)},rules:[{required:!0,pattern:Z.a.num,message:"请输入数字"}]})))),K.a.createElement(g.a,{xs:24,sm:24,md:24,lg:12,xl:12},K.a.createElement(te,E()({label:K.a.createElement("span",{className:"required"}," U位"),style:{marginBottom:0}},Y.a),K.a.createElement(te,{name:"us",rules:[{required:!0,pattern:Z.a.num,message:"请输入数字"}],style:{display:"inline-block",width:150}},K.a.createElement(T.a,{disabled:!0,onChange:this.resetUw})))),K.a.createElement(g.a,{xs:24,sm:24,md:24,lg:12,xl:12},K.a.createElement(te,E()({name:"fullLocationName",label:K.a.createElement("span",{className:"required"}," 区域")},Y.a),K.a.createElement(T.a,{placeholder:"地区/机房/区域(自动生成)",type:"text",disabled:!0}))),K.a.createElement(g.a,{xs:24,sm:24,md:24,lg:12,xl:12},K.a.createElement(te,E()({label:K.a.createElement("span",{className:"required"}," 机柜"),name:"cabinetName"},Y.a),K.a.createElement(T.a,{placeholder:"自动生成",type:"text",disabled:!0}))),K.a.createElement(g.a,{xs:24,sm:24,md:24,lg:12,xl:12},K.a.createElement(te,E()({label:K.a.createElement("span",{className:"required"}," 位置码"),name:"positionalCode"},Y.a),K.a.createElement(T.a,{placeholder:"自动生成",type:"text",disabled:!0}))),K.a.createElement(g.a,{xs:24,sm:24,md:24,lg:12,xl:12},K.a.createElement(F.a.Item,E()({name:"deviceSpec",label:"规格",rules:[{required:!0,message:"请选择规格"}]},Y.a),K.a.createElement(A.a,{disabled:!0},J.a.map(a,(function(e,t){return K.a.createElement(ne,{value:parseInt(t),key:t}," ",e," ")}))))),K.a.createElement(g.a,{xs:24,sm:24,md:24,lg:12,xl:12},K.a.createElement(te,E()({label:"设备品牌",name:"deviceBrand",rules:[{required:!0}]},Y.a),K.a.createElement(A.a,{disabled:!0},J.a.map(n,(function(e,t){return K.a.createElement(ne,{value:parseInt(t),key:t}," ",e," ")}))))),K.a.createElement(g.a,{xs:24,sm:24,md:24,lg:12,xl:12},K.a.createElement(te,E()({label:"设备型号",name:"deviceModel",rules:[{required:!0}]},Y.a),K.a.createElement(A.a,{disabled:!0},J.a.map(r,(function(e,t){return K.a.createElement(ne,{value:parseInt(t),key:t}," ",e," ")}))))),K.a.createElement(g.a,{xs:24,sm:24,md:24,lg:12,xl:12},K.a.createElement(te,E()({label:"采购时间",name:"purchasingTime",rules:[{required:!0}]},Y.a),K.a.createElement(f.a,{disabled:!0,style:{width:"100%"}}))),K.a.createElement(g.a,{xs:24,sm:24,md:24,lg:12,xl:12},K.a.createElement(te,E()({label:"入库时间",name:"storageTime",rules:[{required:!0}]},Y.a),K.a.createElement(f.a,{disabled:!0,style:{width:"100%"}}))),K.a.createElement(g.a,{xs:24,sm:24,md:24,lg:24,xl:24},K.a.createElement(te,E()({label:"备注",name:"remark"},Y.b),K.a.createElement(ae,{disabled:!0,autoSize:{minRows:5},placeholder:"请输入"}))))),K.a.createElement(m.a,{defaultActiveKey:["1"]},K.a.createElement(m.a.Panel,{header:"节点信息",key:"1"},K.a.createElement($.a,{nodeMasterId:this.props.deviceId,canOpt:!0,lists:o.nodeServerDetailList}))))),K.a.createElement("span",{onClick:this.onModalShow},this.props.children))}}]),n}(K.a.Component),_()(r,"propTypes",{location:U.a.any,history:U.a.any,root:U.a.any,children:U.a.any,nodeMasterDict:U.a.any,operateType:U.a.string,deviceId:U.a.string,powers:U.a.array}),n=l))||n)||n)||n;t.a=re},1674:function(e,t,a){"use strict";a(152);var n,r,l,o,s=a(78),i=a.n(s),c=(a(47),a(17)),d=a.n(c),m=(a(98),a(55)),u=a.n(m),p=(a(60),a(12)),h=a.n(p),f=(a(65),a(25)),y=a.n(f),g=a(15),v=a.n(g),E=a(19),k=a.n(E),b=a(6),S=a.n(b),w=a(20),I=a.n(w),R=a(21),x=a.n(R),N=a(13),C=a.n(N),M=a(2),D=a.n(M),O=(a(58),a(11)),L=a.n(O),_=a(0),q=a.n(_),A=a(1),P=a.n(A),T=a(5),B=a.n(T),F=a(18),j=a(1591),K=a(23),z=a(99),U=a(26),W=a(9),J=a(1644);function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var G=L.a.Option,H=(n=Object(K.b)("portDict"),Object(z.g)(r=n(r=Object(K.c)((o=l=function(e){I()(n,e);var t,a=(t=n,function(){var e,a=C()(t);if(V()){var n=C()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return x()(this,e)});function n(e){var t;return v()(this,n),t=a.call(this,e),D()(S()(t),"formRefSearch",q.a.createRef()),D()(S()(t),"getNodeList",(function(e){t.setState({loading:!0}),t.nodeMasterId=t.props.nodeMasterId;var a=B.a.assign({},e,{nodeMasterId:t.nodeMasterId});F.a.get("".concat(BSS_ADMIN_URL,"/api/product/nodeserver/detail"),{params:a}).then((function(e){e=e.data,W.a.hasStatusOk(e)?(t.selectedRows=[],t.setState({lists:e.data,selectedRowKeys:[]})):W.a.dealFail(e),t.setState({loading:!1})})).catch((function(){t.setState({loading:!1})}))})),t.selectedRows=[],t.nodeMasterId=void 0,t.state={lists:t.props.lists,loading:!1,selectedRowKeys:[]},t}return k()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){null==this.nodeMasterId&&this.nodeMasterId!=e.nodeMasterId&&this.getNodeList()}},{key:"makeColumns",value:function(){return[{title:"节点编号",dataIndex:"node",key:"node"},{title:"管理IP",dataIndex:"serverIp",key:"serverIp"},{title:"设备名称",dataIndex:"serverName",key:"serverName"},{title:"是否占用",dataIndex:"isOccupy",key:"isOccupy",render:function(e){return W.a.renderStatus(U.g.machine_node_state,e)}},{title:"销售状态",dataIndex:"status",key:"status",render:function(e){return W.a.renderStatus(U.j.market,e)}},{title:"备注",dataIndex:"remark",key:"remark"},{title:"出库信息",dataIndex:"id",key:"id",render:function(e,t){return q.a.createElement(J.a,{nodeMasterId:t.id})}}]}},{key:"onBatchDel",value:function(){var e=this;if(this.selectedRows.length<=0)return y.a.warning({title:"请至少选择一条数据",content:""}),!1;y.a.confirm({icon:q.a.createElement(j.a,null),content:"确认要删除这条数据吗？",onOk:function(){var t=[];B.a.map(e.selectedRows,(function(e){t.push(e.id)})),e.setState({loading:!0}),F.a.delete("".concat(BSS_ADMIN_URL,"/api/product/nodeserver/detail/alldel"),{data:t}).then((function(t){t=t.data,W.a.hasStatusOk(t)?(W.a.auto_close_result("ok","操作成功"),e.getNodeList()):(W.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))},onCancel:function(){console.log("Cancel")}})}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.setState({selectedRowKeys:e})}},{key:"componentWillUnmount",value:function(){this.selectedRows=[],this.nodeMasterId=null,this.setState=function(e,t){return!1}}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists;t.selectedRowKeys;return q.a.createElement(q.a.Fragment,null,q.a.createElement("div",{className:"g-search"},q.a.createElement(h.a,{ref:this.formRefSearch,name:"searchbox",layout:"inline",onFinish:this.getNodeList},q.a.createElement(h.a.Item,{name:"isOccupy",label:"是否占用"},q.a.createElement(L.a,{style:{width:100},placeholder:"请选择",allowClear:!0},B.a.map(U.g.machine_node_state,(function(e,t){return q.a.createElement(G,{value:t},e.text)})))),q.a.createElement(h.a.Item,{name:"serverIp",label:"管理Ip"},q.a.createElement(u.a,{placeholder:"管理Ip",allowClear:!0})),q.a.createElement(h.a.Item,{name:"serverName",label:"设备名称"},q.a.createElement(u.a,{placeholder:"设备名称",allowClear:!0})),q.a.createElement(h.a.Item,{shouldUpdate:!0},q.a.createElement(d.a,{type:"primary",htmlType:"submit"},"查询")))),W.a.permission(["server-del"])&&this.props.canOpt&&q.a.createElement("div",{className:"g-operate"},q.a.createElement(d.a,{className:"actions-btn",size:"middle",onClick:function(){e.onBatchDel()}},"批量出库")),q.a.createElement("div",{className:"g-table"},q.a.createElement(i.a,{loading:this.state.loading,columns:this.makeColumns(),rowKey:function(e){return e.node},dataSource:a,pagination:!1,size:"small",selectedRowKeys:!0,rowSelection:{type:"checkbox",selectedRowKeys:this.state.selectedRowKeys,onChange:function(t,a){e.selectedRow(t,a)}}})))}}]),n}(q.a.Component),D()(l,"propTypes",{location:P.a.any,history:P.a.any,match:P.a.any,portDict:P.a.any,nodeMasterId:P.a.string,powers:P.a.array,canOpt:P.a.bool,lists:P.a.any}),r=o))||r)||r)||r);t.a=H}}]);