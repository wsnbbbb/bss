(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1555:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Xe}));a(172);var n,r,o,i,s,c,l,d=a(105),u=a.n(d),p=(a(152),a(78)),m=a.n(p),h=(a(98),a(55)),y=a.n(h),f=(a(47),a(17)),g=a.n(f),v=a(15),k=a.n(v),S=a(19),b=a.n(S),w=a(6),C=a.n(w),D=a(20),E=a.n(D),O=a(21),R=a.n(O),M=a(13),I=a.n(M),j=a(2),z=a.n(j),N=(a(65),a(25)),_=a.n(N),x=(a(60),a(12)),L=a.n(x),P=(a(58),a(11)),G=a.n(P),T=a(0),K=a.n(T),U=a(1),B=a.n(U),F=a(23),A=a(9),H=(a(71),a(5)),q=a.n(H),J=a(18),V=(a(416),a(192)),Z=a.n(V),Q=a(1591),W=a(99),X=(a(3),a(28),a(153),a(26));function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}L.a.Item,y.a.TextArea;var ee,te,ae,ne,re,oe,ie,se,ce,le=G.a.Option,de=(Z.a.TreeNode,_.a.confirm),ue=(n=Object(F.b)("root"),r=Object(F.b)("cabinetDict"),o=Object(F.b)("serverDict"),i=Object(F.b)("deviceDict"),Object(W.g)(s=n(s=r(s=o(s=i(s=Object(F.c)((l=c=function(e){E()(n,e);var t,a=(t=n,function(){var e,a=I()(t);if($()){var n=I()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return R()(this,e)});function n(e){var t;return k()(this,n),t=a.call(this,e),z()(C()(t),"onReset",(function(){t.searchFormRef.current.resetFields()})),z()(C()(t),"onClose",(function(){t.setState({showModal:!1})})),z()(C()(t),"selectedRow",(function(e,a){t.setState({selectedRowKeys:e})})),z()(C()(t),"showAddConfirm",(function(){var e=t.state.selectedRowKeys,a=C()(t);if(e.length<1)return _.a.warning({title:"提示",content:"请选择至少一条数据！",destroyOnClose:!0}),!1;de({title:"你确定要批量关联到产品组吗？",icon:K.a.createElement(Q.a,null),okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){a.onModelOk(e),a.setState({selectedRowKeys:[]})},onCancel:function(){}})})),z()(C()(t),"onModelOk",(function(e){var a=[];e.forEach((function(e){a.push({objId:e})})),t.setState({loading:!0}),J.a.post("".concat(BSS_ADMIN_URL,"/api/old/product/server/").concat(t.props.record.id,"/add"),a).then((function(e){2e4===(e=e.data).code?(t.onGetMListData({page:1,inServer:!0}),A.a.auto_close_result("ok","操作成功")):(A.a.dealFail(e),t.setState({loading:!1}))})).catch((function(){t.setState({loading:!1})}))})),t.selectedRowKeys=[],t.searchFormRef=K.a.createRef(),t.searchCondition={},t.state={lists:[],loading:!1,showModal:!1,pageNum:1,page_size:20,total:0,pages:0,selectedRowKeys:[]},t}return b()(n,[{key:"componentDidMount",value:function(){}},{key:"onGetMListData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=q.a.assign({},this.searchCondition,{productId:this.props.record.id},t);this.setState({loading:!0}),J.a.get("".concat(BSS_ADMIN_URL,"/api/old/product/server"),{params:A.a.clearEmpty(a)}).then((function(t){if(t=t.data,A.a.hasStatusOk(t)){var a=t.data.records;e.setState({lists:a,total:t.data.total,pages:t.data.pages,pageNum:t.data.current,selectedRowKeys:[]})}else A.a.dealFail(t);e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"modalShow",value:function(){this.searchCondition={},"see"===this.props.type?this.onGetMListData():this.onGetMListData({inServer:!0}),Object.keys(this.props.serverDict.server_model).length<=0&&this.props.serverDict.fetchServerModel(),Object.keys(this.props.serverDict.server_brand).length<=0&&this.props.serverDict.fetchServerBrand(),this.setState({showModal:!0})}},{key:"onSearch",value:function(e){this.searchCondition=e;var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){z()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{inServer:!0});"see"===this.props.type?this.onGetMListData(e):this.onGetMListData(t)}},{key:"makeColumns",value:function(){var e=this.props.serverDict.server_brand,t=this.props.serverDict.server_model;return[{title:"服务器类型",dataIndex:"serverType",key:"serverType",width:120,render:function(e,t){return X.j.se_unittype[e]||"未知类型"}},{title:"服务器名称",dataIndex:"serverName",key:"serverName",render:function(a,n){var r=t[n.serverModel]||void 0,o=e[n.serverBrand]||void 0;return"".concat(o,"_").concat(r,"_").concat(n.serverSpec)}},{title:"管理IP",dataIndex:"serverIp",key:"serverIp"},{title:"品牌",dataIndex:"serverBrand",key:"serverBrand",render:function(t,a){return t?(t=parseInt(t),e[t]):""}},{title:"型号",dataIndex:"serverModel",key:"serverModel",render:function(e,a){return e?(e=parseInt(e),t[e]):""}},{title:"规格",dataIndex:"serverSpec",key:"serverSpec"},{title:"CPU",dataIndex:"serverCpu",key:"serverCpu",render:function(e,t){return t.serverCpu&&t.serverCpu.cpuName}},{title:"内存",dataIndex:"serverCurrentMemory",key:"serverCurrentMemory"},{title:"硬盘",dataIndex:"serverCurrentDisk",key:"serverCurrentDisk"},{title:"网卡",dataIndex:"networkNumber",key:"networkNumber"},{title:"销售状态",dataIndex:"status",key:"status",render:function(e){return A.a.renderStatus(X.j.market,e)}},{title:"发布状态",dataIndex:"releaseStatus",key:"releaseStatus",render:function(e,t){return X.j.releaseStatus[e]||"unknow"}},{title:"资源备注",dataIndex:"remarks",key:"remarks"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading,o=t.total,i=t.page_size,s=t.pageNum,c=this.props,l=c.type,d=(c.record,{current:s,total:o,size:i,defaultPageSize:i,onChange:function(t,a){return"see"===l?e.onGetMListData({page:t,pageSize:a}):e.onGetMListData({page:t,pageSize:a,inServer:!0})},onShowSizeChange:function(t,a){return"see"===l?e.onGetMListData({page:t,pageSize:a}):e.onGetMListData({page:t,pageSize:a,inServer:!0})},showTotal:function(e){return"一共".concat(e,"条数据")}});return K.a.createElement("main",{style:{float:"left"}},K.a.createElement(_.a,{title:"see"===l?"查看服务器":"关联服务器",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:null,onCancel:this.onClose,visible:n},K.a.createElement("div",{className:"g-search"},K.a.createElement(L.a,{ref:this.searchFormRef,name:"horizontal_login",layout:"inline",onFinish:function(t){e.onSearch(t)}},K.a.createElement(L.a.Item,{name:"serverType"},K.a.createElement(G.a,{style:{width:150},placeholder:"设备类型",allowClear:!0},q.a.map(X.j.se_unittype,(function(e,t){return K.a.createElement(le,{value:parseInt(t),key:t}," ",e," ")})))),K.a.createElement(L.a.Item,{name:"serverIp"},K.a.createElement(y.a,{placeholder:"管理IP",allowClear:!0})),K.a.createElement(L.a.Item,{name:"status"},K.a.createElement(G.a,{style:{width:150},placeholder:"销售状态",allowClear:!0},q.a.map(X.j.market,(function(e,t){return K.a.createElement(le,{value:parseInt(t),key:t}," ",e.text," ")})))),K.a.createElement(L.a.Item,{shouldUpdate:!0},K.a.createElement(g.a,{type:"primary",htmlType:"submit"},"搜索")),K.a.createElement(L.a.Item,{shouldUpdate:!0},K.a.createElement(g.a,{type:"primary",htmlType:"reset",onClick:this.onReset},"重置")))),K.a.createElement("div",{className:"c-operate"},K.a.createElement(g.a,{size:"middle",onClick:this.showAddConfirm,className:"actions-btn",style:"see"===l?{display:"none"}:{display:"inline-block"}},"批量关联"),K.a.createElement(g.a,{size:"middle",onClick:"see"===l?function(){return e.onGetMListData()}:function(){return e.onGetMListData({inServer:!0})},className:"actions-btn"},"刷新")),K.a.createElement("div",{className:"g-table"},K.a.createElement(m.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:d,size:"small",rowSelection:"see"===l?null:{selectedRowKeys:this.state.selectedRowKeys,onChange:function(t,a){e.selectedRow(t,a)}}}))),K.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(K.a.Component),z()(c,"propTypes",{location:B.a.any,history:B.a.any,match:B.a.any,root:B.a.any,cabinetDict:B.a.any,powers:B.a.array,defaultData:B.a.any,onOk:B.a.func,onClose:B.a.func,children:B.a.any,deviceDict:B.a.any,record:B.a.any,serverDict:B.a.any,type:B.a.any}),s=l))||s)||s)||s)||s)||s)||s),pe=(a(132),a(35)),me=a.n(pe);function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ye(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}L.a.Item,y.a.TextArea;var fe,ge,ve,ke,Se,be,we,Ce,De,Ee=G.a.Option,Oe=(Z.a.TreeNode,_.a.confirm),Re=(ee=Object(F.b)("root"),te=Object(F.b)("cabinetDict"),ae=Object(F.b)("serverDict"),ne=Object(F.b)("deviceDict"),re=Object(F.b)("serverPartDict"),oe=Object(F.b)("areaResouse"),Object(W.g)(ie=ee(ie=te(ie=ae(ie=ne(ie=re(ie=oe(ie=Object(F.c)((ce=se=function(e){E()(n,e);var t,a=(t=n,function(){var e,a=I()(t);if(ye()){var n=I()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return R()(this,e)});function n(e){var t;return k()(this,n),t=a.call(this,e),z()(C()(t),"onReset",(function(){t.searchFormRef.current.resetFields()})),z()(C()(t),"onClose",(function(){t.setState({showModal:!1})})),z()(C()(t),"selectedRow",(function(e,a){t.setState({selectedRowKeys:e})})),z()(C()(t),"showAddConfirm",(function(){var e=t.state.selectedRowKeys,a=C()(t);if(e.length<1)return _.a.warning({title:"提示",content:"请选择至少一条数据！",destroyOnClose:!0}),!1;Oe({title:"你确定要批量关联到产品组吗？",icon:K.a.createElement(Q.a,null),okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){a.onModelOk(e),a.setState({selectedRowKeys:[]})},onCancel:function(){}})})),z()(C()(t),"onModelOk",(function(e){var a=[];e.forEach((function(e){a.push({objId:e})})),t.setState({loading:!0}),J.a.post("".concat(BSS_ADMIN_URL,"/api/old/product/memory/").concat(t.props.record.id,"/add"),a).then((function(e){2e4===(e=e.data).code?(t.onGetMListData({page:1,inServer:!0}),A.a.auto_close_result("ok","操作成功")):(A.a.dealFail(e),t.setState({loading:!1}))})).catch((function(){t.setState({loading:!1})}))})),t.selectedRowKeys=[],t.searchFormRef=K.a.createRef(),t.searchCondition={},t.state={lists:[],loading:!1,showModal:!1,pageNum:1,page_size:20,total:0,pages:0,selectedRowKeys:[],lists2:[]},t}return b()(n,[{key:"componentDidMount",value:function(){}},{key:"onGetMListData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=q.a.assign({},this.searchCondition,{productId:this.props.record.id},t);this.setState({loading:!0}),J.a.get("".concat(BSS_ADMIN_URL,"/api/old/product/memory"),{params:A.a.clearEmpty(a)}).then((function(t){if(t=t.data,A.a.hasStatusOk(t)){var a=t.data.records;e.setState({lists:a,total:t.data.total,pages:t.data.pages,pageNum:t.data.current,selectedRowKeys:[]})}else A.a.dealFail(t);e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"onGetBrand",value:function(){var e=this;J.a.get("".concat(BSS_ADMIN_URL,"/api/product/memorymodel/memorybrand")).then((function(t){2e4===(t=t.data).code?e.setState({lists2:t.data}):me.a.error(t.data)})).catch((function(){}))}},{key:"modalShow",value:function(){this.searchCondition={},"see"===this.props.type?this.onGetMListData():this.onGetMListData({inServer:!0}),this.onGetBrand(),this.setState({showModal:!0})}},{key:"onSearch",value:function(e){this.searchCondition=e;var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(Object(a),!0).forEach((function(t){z()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{inServer:!0});"see"===this.props.type?this.onGetMListData(e):this.onGetMListData(t)}},{key:"makeColumns",value:function(){var e=X.k.mem_spec,t=X.k.memory_type,a=X.k.mem_verify;return[{title:"内存型号名称",dataIndex:"memName",key:"memName"},{title:"内存容量(GB)",dataIndex:"memSize",key:"memSize"},{title:"内存主频(MHZ)",dataIndex:"memHz",key:"memHz"},{title:"内存品牌",dataIndex:"memBrand",key:"memBrand"},{title:"内存型号",dataIndex:"memModel",key:"memModel"},{title:"内存规格",dataIndex:"memSpec",key:"memSpec",render:function(t,a){return e[t]}},{title:"内存类型",dataIndex:"memType",key:"memType",render:function(e,a){return t[e]}},{title:"内存校验",dataIndex:"memVerify",key:"memVerify",render:function(e,t){return a[e]}},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading,o=t.total,i=t.page_size,s=t.pageNum,c=t.lists2,l=X.k.mem_spec,d=X.k.memory_type,u=this.props.type,p={current:s,total:o,size:i,defaultPageSize:i,onChange:function(t,a){return"see"===u?e.onGetMListData({page:t,pageSize:a}):e.onGetMListData({page:t,pageSize:a,inServer:!0})},onShowSizeChange:function(t,a){return"see"===u?e.onGetMListData({page:t,pageSize:a}):e.onGetMListData({page:t,pageSize:a,inServer:!0})},showTotal:function(e){return"一共".concat(e,"条数据")}};return K.a.createElement("main",{style:{float:"left"}},K.a.createElement(_.a,{title:"see"===u?"查看内存":"关联内存",maskClosable:!1,width:"80%",destroyOnClose:!0,footer:null,onCancel:this.onClose,visible:n},K.a.createElement("div",{className:"g-search"},K.a.createElement(L.a,{ref:this.searchFormRef,name:"horizontal_login",layout:"inline",onFinish:function(t){e.onSearch(t)}},K.a.createElement(L.a.Item,{name:"memType"},K.a.createElement(G.a,{style:{width:240},allowClear:!0,placeholder:"请选择内存类型"},q.a.map(d,(function(e,t){return K.a.createElement(Ee,{value:t,key:t},e)})))),K.a.createElement(L.a.Item,{name:"memSize"},K.a.createElement(y.a,{placeholder:"请输入内存容量",allowClear:!0})),K.a.createElement(L.a.Item,{name:"memBrand"},K.a.createElement(G.a,{style:{width:240},allowClear:!0,placeholder:"请选择内存品牌"},c.map((function(e){return K.a.createElement(Ee,{key:e},e)})))),K.a.createElement(L.a.Item,{name:"memSpec"},K.a.createElement(G.a,{style:{width:240},allowClear:!0,placeholder:"请选择内存规格"},q.a.map(l,(function(e,t){return K.a.createElement(Ee,{value:t,key:t},e)})))),K.a.createElement(L.a.Item,{shouldUpdate:!0},K.a.createElement(g.a,{type:"primary",htmlType:"submit"},"搜索")),K.a.createElement(L.a.Item,{shouldUpdate:!0},K.a.createElement(g.a,{type:"primary",htmlType:"reset",onClick:this.onReset},"重置")))),K.a.createElement("div",{className:"c-operate"},K.a.createElement(g.a,{size:"middle",onClick:this.showAddConfirm,className:"actions-btn",style:"see"===u?{display:"none"}:{display:"inline-block"}},"批量关联"),K.a.createElement(g.a,{size:"middle",onClick:"see"===u?function(){return e.onGetMListData()}:function(){return e.onGetMListData({inServer:!0})},className:"actions-btn"},"刷新")),K.a.createElement("div",{className:"g-table"},K.a.createElement(m.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:p,size:"small",rowSelection:"see"===u?null:{selectedRowKeys:this.state.selectedRowKeys,onChange:function(t,a){e.selectedRow(t,a)}}}))),K.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(K.a.Component),z()(se,"propTypes",{location:B.a.any,history:B.a.any,match:B.a.any,root:B.a.any,cabinetDict:B.a.any,powers:B.a.array,defaultData:B.a.any,onOk:B.a.func,onClose:B.a.func,children:B.a.any,deviceDict:B.a.any,record:B.a.any,serverDict:B.a.any,type:B.a.any,areaResouse:B.a.any,serverPartDict:B.a.any}),ie=ce))||ie)||ie)||ie)||ie)||ie)||ie)||ie)||ie);function Me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ie(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}L.a.Item,y.a.TextArea;var je,ze,Ne,_e,xe,Le,Pe,Ge,Te,Ke=G.a.Option,Ue=(Z.a.TreeNode,_.a.confirm),Be=(fe=Object(F.b)("root"),ge=Object(F.b)("cabinetDict"),ve=Object(F.b)("serverDict"),ke=Object(F.b)("deviceDict"),Se=Object(F.b)("serverPartDict"),be=Object(F.b)("areaResouse"),Object(W.g)(we=fe(we=ge(we=ve(we=ke(we=Se(we=be(we=Object(F.c)((De=Ce=function(e){E()(n,e);var t,a=(t=n,function(){var e,a=I()(t);if(Ie()){var n=I()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return R()(this,e)});function n(e){var t;return k()(this,n),t=a.call(this,e),z()(C()(t),"onReset",(function(){t.searchFormRef.current.resetFields()})),z()(C()(t),"onClose",(function(){t.setState({showModal:!1})})),z()(C()(t),"selectedRow",(function(e,a){t.setState({selectedRowKeys:e})})),z()(C()(t),"showAddConfirm",(function(){var e=t.state.selectedRowKeys,a=C()(t);if(e.length<1)return _.a.warning({title:"提示",content:"请选择至少一条数据！",destroyOnClose:!0}),!1;Ue({title:"你确定要批量关联到产品组吗？",icon:K.a.createElement(Q.a,null),okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){a.onModelOk(e),a.setState({selectedRowKeys:[]})},onCancel:function(){}})})),z()(C()(t),"onModelOk",(function(e){var a=[];e.forEach((function(e){a.push({objId:e})})),t.setState({loading:!0}),J.a.post("".concat(BSS_ADMIN_URL,"/api/old/product/disk/").concat(t.props.record.id,"/add"),a).then((function(e){2e4===(e=e.data).code?(t.onGetMListData({page:1,inServer:!0}),t.setState({selectedRowKeys:[]}),A.a.auto_close_result("ok","操作成功")):(A.a.dealFail(e),t.setState({loading:!1}))})).catch((function(){t.setState({loading:!1})}))})),t.selectedRowKeys=[],t.searchFormRef=K.a.createRef(),t.searchCondition={},t.state={lists:[],loading:!1,showModal:!1,pageNum:1,page_size:20,total:0,pages:0,selectedRowKeys:[],lists2:[]},t}return b()(n,[{key:"componentDidMount",value:function(){}},{key:"onGetMListData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=q.a.assign({},this.searchCondition,{productId:this.props.record.id},t);this.setState({loading:!0}),J.a.get("".concat(BSS_ADMIN_URL,"/api/old/product/disk"),{params:A.a.clearEmpty(a)}).then((function(t){if(t=t.data,A.a.hasStatusOk(t)){var a=t.data.records;e.setState({lists:a,total:t.data.total,pages:t.data.pages,pageNum:t.data.current,selectedRowKeys:[]})}else A.a.dealFail(t);e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"onGetBrand",value:function(){var e=this;J.a.get("".concat(BSS_ADMIN_URL,"/api/product/diskmodel/diskbrand")).then((function(t){2e4===(t=t.data).code?e.setState({lists2:t.data}):me.a.error(t.data)})).catch((function(){}))}},{key:"modalShow",value:function(){this.searchCondition={},"see"===this.props.type?this.onGetMListData():this.onGetMListData({inServer:!0}),this.onGetBrand(),this.setState({showModal:!0})}},{key:"onSearch",value:function(e){this.searchCondition=e;var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(a),!0).forEach((function(t){z()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Me(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{inServer:!0});"see"===this.props.type?this.onGetMListData(e):this.onGetMListData(t)}},{key:"makeColumns",value:function(){var e=X.k.disk_interface_type,t=(X.k.disk_type,X.k.disk_short),a=X.k.server_disk_spec;return[{title:"硬盘型号名称",dataIndex:"diskName",key:"diskName"},{title:"品牌",dataIndex:"diskBrand",key:"diskBrand"},{title:"型号",dataIndex:"diskModel",key:"diskModel"},{title:"硬盘类型简称",dataIndex:"diskShort",key:"diskShort",render:function(e,a){return t[e]}},{title:"规格",dataIndex:"diskMeasure",key:"diskMeasure",render:function(e,t){return a[e]}},{title:"接口类型",dataIndex:"interfaceType",key:"interfaceType",render:function(t,a){return e[t]}},{title:"缓存(MB)",dataIndex:"diskCache",key:"diskCache"},{title:"转速",dataIndex:"diskRpm",key:"diskRpm"},{title:"硬盘容量",dataIndex:"diskSize",key:"diskSize"},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading,o=t.total,i=t.page_size,s=t.pageNum,c=t.lists2,l=this.props.type,d=(X.k.disk_type,{current:s,total:o,size:i,defaultPageSize:i,onChange:function(t,a){return"see"===l?e.onGetMListData({page:t,pageSize:a}):e.onGetMListData({page:t,pageSize:a,inServer:!0})},onShowSizeChange:function(t,a){return"see"===l?e.onGetMListData({page:t,pageSize:a}):e.onGetMListData({page:t,pageSize:a,inServer:!0})},showTotal:function(e){return"一共".concat(e,"条数据")}});return K.a.createElement("main",{style:{float:"left"}},K.a.createElement(_.a,{title:"see"===l?"查看硬盘":"关联硬盘",maskClosable:!1,width:"80%",destroyOnClose:!0,footer:null,onCancel:this.onClose,visible:n},K.a.createElement("div",{className:"g-search"},K.a.createElement(L.a,{ref:this.searchFormRef,name:"horizontal_login",layout:"inline",onFinish:function(t){e.onSearch(t)}},K.a.createElement(L.a.Item,{name:"diskName"},K.a.createElement(y.a,{placeholder:"请输入硬盘名称",allowClear:!0})),K.a.createElement(L.a.Item,{name:"diskSize"},K.a.createElement(y.a,{placeholder:"请输入硬盘容量",allowClear:!0})),K.a.createElement(L.a.Item,{name:"diskBrand"},K.a.createElement(G.a,{style:{width:240},allowClear:!0,placeholder:"请选择硬盘品牌"},c.map((function(e){return K.a.createElement(Ke,{key:e},e)})))),K.a.createElement(L.a.Item,{shouldUpdate:!0},K.a.createElement(g.a,{type:"primary",htmlType:"submit"},"搜索")),K.a.createElement(L.a.Item,{shouldUpdate:!0},K.a.createElement(g.a,{type:"primary",htmlType:"reset",onClick:this.onReset},"重置")))),K.a.createElement("div",{className:"c-operate"},K.a.createElement(g.a,{size:"middle",onClick:this.showAddConfirm,className:"actions-btn",style:"see"===l?{display:"none"}:{display:"inline-block"}},"批量关联"),K.a.createElement(g.a,{size:"middle",onClick:"see"===l?function(){return e.onGetMListData()}:function(){return e.onGetMListData({inServer:!0})},className:"actions-btn"},"刷新")),K.a.createElement("div",{className:"g-table"},K.a.createElement(m.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:d,size:"small",rowSelection:"see"===l?null:{selectedRowKeys:this.state.selectedRowKeys,onChange:function(t,a){e.selectedRow(t,a)}}}))),K.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(K.a.Component),z()(Ce,"propTypes",{location:B.a.any,history:B.a.any,match:B.a.any,root:B.a.any,cabinetDict:B.a.any,powers:B.a.array,defaultData:B.a.any,onOk:B.a.func,onClose:B.a.func,children:B.a.any,deviceDict:B.a.any,record:B.a.any,serverDict:B.a.any,type:B.a.any,areaResouse:B.a.any,serverPartDict:B.a.any}),we=De))||we)||we)||we)||we)||we)||we)||we)||we);function Fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ae(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}L.a.Item,y.a.TextArea;var He,qe,Je,Ve=G.a.Option,Ze=(Z.a.TreeNode,_.a.confirm),Qe=(je=Object(F.b)("root"),ze=Object(F.b)("cabinetDict"),Ne=Object(F.b)("serverDict"),_e=Object(F.b)("deviceDict"),xe=Object(F.b)("serverPartDict"),Le=Object(F.b)("areaResouse"),Object(W.g)(Pe=je(Pe=ze(Pe=Ne(Pe=_e(Pe=xe(Pe=Le(Pe=Object(F.c)((Te=Ge=function(e){E()(n,e);var t,a=(t=n,function(){var e,a=I()(t);if(Ae()){var n=I()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return R()(this,e)});function n(e){var t;return k()(this,n),t=a.call(this,e),z()(C()(t),"onReset",(function(){t.searchFormRef.current.resetFields()})),z()(C()(t),"onClose",(function(){t.setState({showModal:!1})})),z()(C()(t),"selectedRow",(function(e,a){t.setState({selectedRowKeys:e})})),z()(C()(t),"showAddConfirm",(function(){var e=t.state.selectedRowKeys,a=C()(t);if(e.length<1)return _.a.warning({title:"提示",content:"请选择至少一条数据！",destroyOnClose:!0}),!1;Ze({title:"你确定要批量关联到产品组吗？",icon:K.a.createElement(Q.a,null),okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){a.onModelOk(e),a.setState({selectedRowKeys:[]})},onCancel:function(){}})})),z()(C()(t),"onModelOk",(function(e){var a=[];e.forEach((function(e){a.push({objId:e})})),t.setState({loading:!0}),J.a.post("".concat(BSS_ADMIN_URL,"/api/old/product/cpu/").concat(t.props.record.id,"/add"),a).then((function(e){2e4===(e=e.data).code?(t.onGetMListData({page:1,inServer:!0}),t.setState({selectedRowKeys:[]}),A.a.auto_close_result("ok","操作成功")):(A.a.dealFail(e),t.setState({loading:!1}))})).catch((function(){t.setState({loading:!1})}))})),t.selectedRowKeys=[],t.searchFormRef=K.a.createRef(),t.searchCondition={},t.state={lists:[],loading:!1,showModal:!1,pageNum:1,page_size:20,total:0,pages:0,selectedRowKeys:[],lists2:[],lists3:[]},t}return b()(n,[{key:"componentDidMount",value:function(){}},{key:"onGetMListData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=q.a.assign({},this.searchCondition,{productId:this.props.record.id},t);this.setState({loading:!0}),J.a.get("".concat(BSS_ADMIN_URL,"/api/old/product/cpu"),{params:A.a.clearEmpty(a)}).then((function(t){if(t=t.data,A.a.hasStatusOk(t)){var a=t.data.records;e.setState({lists:a,total:t.data.total,pages:t.data.pages,pageNum:t.data.current,selectedRowKeys:[]})}else A.a.dealFail(t);e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"onGetBrand",value:function(){var e=this;J.a.get("".concat(BSS_ADMIN_URL,"/api/product/cpumodel/cpubrand")).then((function(t){2e4===(t=t.data).code?e.setState({lists2:t.data}):me.a.error(t.data)})).catch((function(){}))}},{key:"onGetModel",value:function(){var e=this;J.a.get("".concat(BSS_ADMIN_URL,"/api/product/cpumodel/modelname")).then((function(t){2e4===(t=t.data).code?e.setState({lists3:t.data}):me.a.error(t.data)})).catch((function(){}))}},{key:"modalShow",value:function(){this.searchCondition={},"see"===this.props.type?this.onGetMListData():this.onGetMListData({inServer:!0}),this.onGetBrand(),this.onGetModel(),this.setState({showModal:!0})}},{key:"onSearch",value:function(e){this.searchCondition=e;var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(a),!0).forEach((function(t){z()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{inServer:!0});"see"===this.props.type?this.onGetMListData(e):this.onGetMListData(t)}},{key:"makeColumns",value:function(){return[{title:"CPU型号名称",dataIndex:"cpuName",key:"cpuName"},{title:"CPU个数",dataIndex:"cpuNumber",key:"cpuNumber"},{title:"品牌",dataIndex:"cpuBrand",key:"cpuBrand"},{title:"型号",dataIndex:"cpuModel",key:"cpuModel"},{title:"主频(GHZ)",dataIndex:"cpuHz",key:"cpuHz"},{title:"核心数",dataIndex:"cpuCore",key:"cpuCore"},{title:"线程数",dataIndex:"cpuThread",key:"cpuThread"},{title:"接口类型",dataIndex:"interfaceType",key:"interfaceType"},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading,o=t.total,i=t.page_size,s=t.pageNum,c=t.lists2,l=t.lists3,d=this.props.type,u={current:s,total:o,size:i,defaultPageSize:i,onChange:function(t,a){return"see"===d?e.onGetMListData({page:t,pageSize:a}):e.onGetMListData({page:t,pageSize:a,inServer:!0})},onShowSizeChange:function(t,a){return"see"===d?e.onGetMListData({page:t,pageSize:a}):e.onGetMListData({page:t,pageSize:a,inServer:!0})},showTotal:function(e){return"一共".concat(e,"条数据")}};return K.a.createElement("main",{style:{float:"left"}},K.a.createElement(_.a,{title:"see"===d?"查看CPU":"关联CPU",maskClosable:!1,width:"80%",destroyOnClose:!0,footer:null,onCancel:this.onClose,visible:n},K.a.createElement("div",{className:"g-search"},K.a.createElement(L.a,{ref:this.searchFormRef,name:"horizontal_login",layout:"inline",onFinish:function(t){e.onSearch(t)}},K.a.createElement(L.a.Item,{name:"cpuName"},K.a.createElement(y.a,{placeholder:"请输入CPU型号名称",allowClear:!0})),K.a.createElement(L.a.Item,{name:"cpuModel"},K.a.createElement(G.a,{style:{width:240},allowClear:!0,placeholder:"请选择cpu型号"},l.map((function(e){return K.a.createElement(Ve,{key:e},e)})))),K.a.createElement(L.a.Item,{name:"cpuBrand"},K.a.createElement(G.a,{style:{width:240},allowClear:!0,placeholder:"请选择cpu品牌"},c.map((function(e){return K.a.createElement(Ve,{key:e},e)})))),K.a.createElement(L.a.Item,{shouldUpdate:!0},K.a.createElement(g.a,{type:"primary",htmlType:"submit"},"搜索")),K.a.createElement(L.a.Item,{shouldUpdate:!0},K.a.createElement(g.a,{type:"primary",htmlType:"reset",onClick:this.onReset},"重置")))),K.a.createElement("div",{className:"c-operate"},K.a.createElement(g.a,{size:"middle",onClick:this.showAddConfirm,className:"actions-btn",style:"see"===d?{display:"none"}:{display:"inline-block"}},"批量关联"),K.a.createElement(g.a,{size:"middle",onClick:"see"===d?function(){return e.onGetMListData()}:function(){return e.onGetMListData({inServer:!0})},className:"actions-btn"},"刷新")),K.a.createElement("div",{className:"g-table"},K.a.createElement(m.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:u,size:"small",rowSelection:"see"===d?null:{selectedRowKeys:this.state.selectedRowKeys,onChange:function(t,a){e.selectedRow(t,a)}}}))),K.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(K.a.Component),z()(Ge,"propTypes",{location:B.a.any,history:B.a.any,match:B.a.any,root:B.a.any,cabinetDict:B.a.any,powers:B.a.array,defaultData:B.a.any,onOk:B.a.func,onClose:B.a.func,children:B.a.any,deviceDict:B.a.any,record:B.a.any,serverDict:B.a.any,type:B.a.any,areaResouse:B.a.any,serverPartDict:B.a.any}),Pe=Te))||Pe)||Pe)||Pe)||Pe)||Pe)||Pe)||Pe)||Pe);function We(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}G.a.Option,L.a.Item,_.a.confirm;var Xe=Object(F.b)("root")(He=Object(F.b)("authManage")(He=Object(F.b)("pageUserstore")(He=Object(F.b)("serverPartDict")(He=Object(F.c)((Je=qe=function(e){E()(n,e);var t,a=(t=n,function(){var e,a=I()(t);if(We()){var n=I()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return R()(this,e)});function n(e){var t;return k()(this,n),t=a.call(this,e),z()(C()(t),"updateURL",(function(){var e,a,n,r,o=(e={query:t.state.inputValue},a=e.query,n=void 0===a?"":a,(r=new URLSearchParams).set("query",n),r.toString());t.props.history.push("?".concat(o))})),z()(C()(t),"onReset",(function(){t.searchFormRef.current.resetFields()})),t.searchFormRef=K.a.createRef(),t.searchCondition={},t.state={lists:[],loading:!1,pageNum:1,page_size:20,total:0},t}return b()(n,[{key:"componentDidMount",value:function(){this.onGetListData(this.state.pageNum,this.state.page_size)}},{key:"componentWillReceiveProps",value:function(){}},{key:"onGetListData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=q.a.assign({},this.searchCondition,t);this.setState({loading:!0}),J.a.get("".concat(BSS_ADMIN_URL,"/api/old/product/groups/name"),{params:A.a.clearEmpty(a)}).then((function(t){if(t=t.data,A.a.hasStatusOk(t)){var a=t.data.records;e.setState({lists:a,total:t.data.total,pages:t.data.pages,pageNum:t.data.current})}else A.a.dealFail(t);e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"makeColumns",value:function(){var e=this;return[{title:"产品组名称",dataIndex:"name",key:"name"},{title:"操作",key:"control",width:750,fixed:"right",render:function(t,a){var n=[];e.props.root.userinfo,e.props.root.roles,e.props.root.powers;return n.push(K.a.createElement(ue,{record:a,type:"see"},K.a.createElement(g.a,{key:"0",size:"small",className:"actions-btn",style:{marginRight:"8px"}},"查看服务器"))),n.push(K.a.createElement(ue,{record:a,type:"relet"},K.a.createElement(g.a,{key:"1",size:"small",className:"actions-btn",style:{marginRight:"8px"}},"关联服务器"))),n.push(K.a.createElement(Re,{record:a,type:"see"},K.a.createElement(g.a,{key:"2",size:"small",className:"actions-btn",style:{marginRight:"8px"}},"查看内存"))),n.push(K.a.createElement(Re,{record:a,type:"relet"},K.a.createElement(g.a,{key:"3",size:"small",className:"actions-btn",style:{marginRight:"8px"}},"关联内存"))),n.push(K.a.createElement(Be,{record:a,type:"see"},K.a.createElement(g.a,{key:"4",size:"small",className:"actions-btn",style:{marginRight:"8px"}},"查看硬盘"))),n.push(K.a.createElement(Be,{record:a,type:"relet"},K.a.createElement(g.a,{key:"5",size:"small",className:"actions-btn",style:{marginRight:"8px"}},"关联硬盘"))),n.push(K.a.createElement(Qe,{record:a,type:"see"},K.a.createElement(g.a,{key:"6",size:"small",className:"actions-btn",style:{marginRight:"8px"}},"查看CPU"))),n.push(K.a.createElement(Qe,{record:a,type:"relet"},K.a.createElement(g.a,{key:"7",size:"small",className:"actions-btn",style:{marginRight:"8px"}},"关联CPU"))),n}}]}},{key:"onSearch",value:function(e){this.searchCondition=e,this.onGetListData(e)}},{key:"onPageChange",value:function(e,t){this.onGetListData({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.onGetListData({page:e,pageSize:t})}},{key:"render",value:function(){var e=this,t=(this.props.root.powers,this.state),a=t.loading,n=t.lists,r=t.pageNum,o=t.page_size,i=(t.modalShow,t.total);return K.a.createElement("main",{className:"mian"},K.a.createElement("div",{className:"c-search"},K.a.createElement(L.a,{ref:this.searchFormRef,name:"horizontal_login",layout:"inline",onFinish:function(t){e.onSearch(t)}},K.a.createElement(L.a.Item,{name:"name"},K.a.createElement(y.a,{placeholder:"请输入产品组名称",allowClear:!0})),K.a.createElement(L.a.Item,{shouldUpdate:!0},K.a.createElement(g.a,{type:"primary",htmlType:"submit"},"搜索")),K.a.createElement(L.a.Item,{shouldUpdate:!0},K.a.createElement(g.a,{type:"primary",htmlType:"reset",onClick:this.onReset},"重置")))),K.a.createElement("div",{className:"g-table"},K.a.createElement(m.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:a,dataSource:n,pagination:!1,size:"small"})),K.a.createElement("div",{className:"pagination"},K.a.createElement(u.a,{className:"g-pagination",size:"middle",current:r,total:i,showSizeChanger:!0,showQuickJumper:!0,defaultPageSize:o,showTotal:function(e){return"一共".concat(e,"条数据")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}})))}}]),n}(K.a.Component),z()(qe,"propTypes",{location:B.a.any,history:B.a.any,userinfo:B.a.any,powers:B.a.array,authManage:B.a.any,match:B.a.any,pageUserstore:B.a.any,root:B.a.any,serverPartDict:B.a.any}),He=Je))||He)||He)||He)||He)||He}}]);