(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1554:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return aa}));t(47);var n=t(17),o=t.n(n),r=(t(60),t(12)),l=t.n(r),s=(t(98),t(55)),i=t.n(s),c=(t(152),t(78)),d=t.n(c),m=(t(254),t(116)),u=t.n(m),p=(t(255),t(133)),h=t.n(p),f=(t(173),t(84)),g=t.n(f),y=(t(132),t(35)),b=t.n(y),E=t(15),v=t.n(E),x=t(19),k=t.n(x),R=t(6),w=t.n(R),S=t(20),C=t.n(S),D=t(21),O=t.n(D),L=t(13),I=t.n(L),A=(t(58),t(11)),N=t.n(A),T=t(33),P=t.n(T),U=t(2),M=t.n(U),j=t(185),q=t.n(j),F=t(311),V=t.n(F),z=t(0),B=t.n(z),K=t(1),H=t.n(K),G=t(1596),W={name:"file-add",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]}},Z=t(69),J=function(e,a){return z.createElement(Z.a,Object.assign({},e,{ref:a,icon:W}))};J.displayName="FileAddOutlined";var X,Q,Y,$=z.forwardRef(J),ee=t(1592),ae=t(1587),te=t(1589),ne=t(23),oe=(t(1642),t(18)),re=t(9),le=t(26),se=t(52),ie=(t(65),t(25)),ce=t.n(ie),de=(t(174),t(107)),me=t.n(de),ue=(t(171),t(89)),pe=t.n(ue),he=(t(724),t(417)),fe=t.n(he),ge=(t(194),t(106)),ye=t.n(ge),be=(t(193),t(75)),Ee=t.n(be),ve=t(5),xe=t.n(ve),ke=t(16),Re=t.n(ke),we=t(28),Se=t(1621),Ce=t(153);function De(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function Oe(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?De(Object(t),!0).forEach((function(a){M()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):De(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function Le(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ie,Ae,Ne,Te=l.a.Item,Pe=i.a.TextArea,Ue=N.a.Option,_e=Object(ne.c)((Y=Q=function(e){C()(n,e);var a,t=(a=n,function(){var e,t=I()(a);if(Le()){var n=I()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O()(this,e)});function n(e){var a;return v()(this,n),a=t.call(this,e),M()(w()(a),"formRefAdd",B.a.createRef()),M()(w()(a),"onResetSearch",(function(){a.formRefAdd.current.resetFields()})),M()(w()(a),"onClose",(function(){a.props.onClose()})),M()(w()(a),"onSelectRegion",(function(e){a.setState({districtId:e}),a.formRefAdd.current.setFieldsValue({districtName:"1"})})),a.selectAreaNode={},a.state={modalLoading:!1,modalShowArea:!1,districtId:""},a}return k()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"onFinish",value:function(e){var a=this.props.operateType;if("see"!==a){if(e.voltageUnit){var t=e.cabinetAmp+e.voltageUnit;delete e.voltageUnit,e.cabinetAmp=t}var n=Oe({},e,{districtId:this.state.districtId});"up"===a&&(n=Oe({},e,{version:this.props.data.version})),this.props.onOk(n)}else this.props.onClose()}},{key:"render",value:function(){var e=this,a=this.props,t=a.operateType,n=a.data,r=a.modalLoading,s=a.visible,c=a.HouseLevel;return!n.houseAddTime||"see"!==t&&"up"!==t||(n.houseAddTime=Re()(n.houseAddTime)),B.a.createElement("div",null,B.a.createElement(ce.a,{title:{add:"新增机房",up:"修改机房",see:"查看机房"}[t],maskClosable:!1,width:"90%",destroyOnClose:!0,footer:null,onCancel:this.props.onClose,visible:s},B.a.createElement(me.a,{tip:"Loading...",spinning:r},B.a.createElement(l.a,{name:"form_in_modal",ref:this.formRefAdd,className:"g-modal-field",onFinish:function(a){e.onFinish(a)},initialValues:n},B.a.createElement(pe.a,null,B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Te,P()({label:"机房名称",name:"name",rules:[{required:!0,message:"请输入"},{max:15,message:"最多输入15个字符"}]},we.a),B.a.createElement(i.a,{type:"text",placeholder:"请输入",disabled:"add"!=t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Te,P()({label:"机房别名",name:"alias",rules:[{required:!0,message:"请输入"},{max:15,message:"最多输入15个字符"}]},we.a),B.a.createElement(i.a,{type:"text",placeholder:"请输入",disabled:"add"!=t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Te,P()({label:"机房编码",name:"code",rules:[{required:!0,message:"请输入"},{max:80,message:"最多输入80个字符"}]},we.a),B.a.createElement(i.a,{type:"text",placeholder:"请输入",disabled:"add"!=t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Te,P()({label:B.a.createElement("span",{className:"required"}," 地区"),style:{marginBottom:0}},we.a),B.a.createElement(Te,{rules:"up"===t||"see"===t?null:[{required:!0,message:"请输入"}],name:"districtName"},B.a.createElement(Se.a,{disabled:"see"===t||"up"===t,districtId:this.props.data.districtId,placeholder:"请选择地区",onSelect:function(a){e.onSelectRegion(a)},type:"house"})))),"see"==t&&B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Te,P()({label:"物理位置码",name:"houseLocakCode"},we.a),B.a.createElement(i.a,{disabled:!0}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Te,P()({label:"机房属性",name:"attribute",rules:[{required:!0,message:"请输入"}]},we.a),B.a.createElement(N.a,{disabled:"see"===t},xe.a.map(le.d.house_attr,(function(e,a){return B.a.createElement(Ue,{value:parseInt(a),key:a},e)}))))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Te,P()({label:"机房等级",name:"houseLevel",rules:[{required:!0,message:"请输入"}]},we.a),B.a.createElement(N.a,{disabled:"see"===t},xe.a.map(c,(function(e,a){return B.a.createElement(Ue,{value:parseInt(a),key:a},e)}))))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Te,P()({label:B.a.createElement("span",{className:"required"},"机柜电力")},we.a,{rules:[{required:!0,message:"请输入"},{max:10,message:"最多输入10个字符"},{pattern:Ce.a.float,message:"请输入数字"}]}),B.a.createElement(Te,P()({name:"cabinetAmp"},we.a,{style:{display:"inline-block",width:200},rules:[{required:!0,message:"请输入"},{max:10,message:"最多输入10个字符"},{pattern:Ce.a.float,message:"请输入数字"}]}),B.a.createElement(i.a,{style:{width:190},disabled:"see"===t})),B.a.createElement(Te,P()({name:"voltageUnit"},we.a,{style:{display:"inline-block",width:100},rules:[{required:!0,message:"请选择"}]}),B.a.createElement(N.a,{style:{width:130},disabled:"see"===t},B.a.createElement(Ue,{value:"A"},"A"),B.a.createElement(Ue,{value:"KVA"},"KVA"),B.a.createElement(Ue,{value:"KW"},"KW"))))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Te,P()({label:"机柜供电电压",name:"cabinetVoltage",rules:[{required:!0,message:"请输入"},{max:10,message:"最多输入10个字符"},{pattern:Ce.a.float,message:"请输入数字"}]},we.a),B.a.createElement(i.a,{suffix:"V",disabled:"see"===t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Te,P()({label:"机柜承重",name:"cabinetBearing",rules:[{required:!0,message:"请输入"},{max:10,message:"最多输入10个字符"},{pattern:Ce.a.float,message:"请输入数字"}]},we.a),B.a.createElement(i.a,{suffix:"kg",disabled:"see"===t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Te,P()({label:"机柜规格",name:"cabinetSpec"},we.a,{rules:[{required:!0,message:"请输入"},{max:14,message:"最多输入14个字符"}]}),B.a.createElement(i.a,{disabled:"see"===t,placeholder:"示例：600*800"}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Te,P()({label:"机柜总U数",name:"cabinetUs"},we.a,{rules:[{required:!0,message:"请输入"},{pattern:Ce.a.num,message:"请输入数字"},{type:"number",max:99,message:"最多输入2位数"}]}),B.a.createElement(ye.a,{disabled:"see"===t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Te,P()({label:"机柜PDU情况",name:"cabinetPdu"},we.a,{rules:[{required:!0,message:"请输入"},{max:200,message:"最多输入200个字符"}]}),B.a.createElement(i.a,{disabled:"see"===t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Te,P()({label:"机房建立时间",name:"houseAddTime"},we.a,{rules:[{required:!0,message:"请输入"}]}),B.a.createElement(fe.a,{style:{width:"100%"},disabled:"see"===t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:24,xl:24},B.a.createElement(Te,P()({label:"地址",name:"addr",rules:[{required:!0,message:"请输入"},{max:150,message:"最多输入150个字符"}]},we.b),B.a.createElement(Pe,{autoSize:{minRows:5},placeholder:"请输入",disabled:"see"===t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:24,xl:24},B.a.createElement(Te,P()({label:"备注",name:"remark",rules:[{max:250,message:"最多输入250个字符"}]},we.b),B.a.createElement(Pe,{autoSize:{minRows:5},placeholder:"请输入",disabled:"see"===t})))),"see"!==t&&B.a.createElement("div",{className:"actions-btn"},B.a.createElement(o.a,{htmlType:"submit",className:"action-btn ok"},"确认提交"),B.a.createElement(o.a,{onClick:this.onResetSearch,className:"action-btn ok"},"重置"),B.a.createElement(o.a,{onClick:this.onClose,className:"action-btn ok"},"取消"))))))}}]),n}(B.a.Component),M()(Q,"propTypes",{location:H.a.any,history:H.a.any,operateType:H.a.string,data:H.a.any,HouseLevel:H.a.any,visible:H.a.bool,modalLoading:H.a.bool,onOk:H.a.func,onClose:H.a.func}),X=Y))||X;function Me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var je,qe,Fe,Ve=l.a.Item,ze=i.a.TextArea,Be=N.a.Option,Ke=Object(ne.b)("areaResouse")(Ie=Object(ne.c)((Ne=Ae=function(e){C()(n,e);var a,t=(a=n,function(){var e,t=I()(a);if(Me()){var n=I()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O()(this,e)});function n(e){var a;return v()(this,n),a=t.call(this,e),M()(w()(a),"formRefAdd",B.a.createRef()),M()(w()(a),"onResetSearch",(function(){a.formRefAdd.current.resetFields()})),M()(w()(a),"onClose",(function(){a.props.onClose()})),M()(w()(a),"resetPower",(function(){var e=a.formRefAdd.current.getFieldValue("amp"),t=a.formRefAdd.current.getFieldValue("voltage"),n=parseFloat(e),o=parseFloat(t);if(n&&o){var r=Math.round(n*o*1e6)/1e6;a.formRefAdd.current.setFieldsValue({power:r})}})),M()(w()(a),"showRegonMap",(function(){var e=a.formRefAdd.current.getFieldValue("row"),t=a.formRefAdd.current.getFieldValue("col");if(e&&t){var n="".concat(location.origin).concat(location.pathname,"/map?row=").concat(e,"&col=").concat(t);re.a.handleOpenWindow(n,"_blank")}else b.a.error("请输入行和列")})),a.state={modalLoading:!1},a}return k()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"onFinish",value:function(e){if("see"!==this.props.operateType){var a=e.amp+e.voltageUnit;delete e.voltageUnit,e.amp=a,this.props.onOk(e)}else this.props.onClose()}},{key:"render",value:function(){var e=this,a=this.props,t=a.operateType,n=a.data,r=a.modalLoading,s=a.visible;return B.a.createElement("div",null,B.a.createElement(ce.a,{title:{add:"新增区域",up:"修改区域",see:"查看区域"}[t],maskClosable:!1,width:"90%",destroyOnClose:!0,footer:null,onCancel:this.props.onClose,visible:s},B.a.createElement(me.a,{tip:"Loading...",spinning:r},B.a.createElement(l.a,{name:"form_in_modal",ref:this.formRefAdd,className:"g-modal-field",onFinish:function(a){e.onFinish(a)},initialValues:n},B.a.createElement(pe.a,null,B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Ve,P()({label:"所属地区",rules:[{required:!0,message:"请输入"}]},we.a),B.a.createElement(Se.a,{disabled:!0,districtId:this.props.data.districtId,type:"house"}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Ve,P()({label:"所属机房",name:"houseId",rules:[{required:!0,message:"请输入"}]},we.a),B.a.createElement(N.a,{disabled:!0},xe.a.map(this.props.areaResouse.houseList,(function(e){return B.a.createElement(Be,{value:e.id,key:e.id},e.name)}))))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Ve,P()({label:"区域名称",name:"name",rules:[{required:!0,message:"请输入"},{max:15,message:"最多输入15个字符"}]},we.a),B.a.createElement(i.a,{type:"text",placeholder:"请输入",disabled:"add"!=t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Ve,P()({label:"区域编码",name:"code",rules:[{required:!0,message:"请输入"},{max:10,message:"最多输入10个字符"}]},we.a),B.a.createElement(i.a,{type:"text",placeholder:"请输入",disabled:"add"!=t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Ve,P()({label:"机柜U位",name:"cabinetUCount",rules:[{required:!0,message:"请输入"},{pattern:Ce.a.isNumAndThanZero,message:"请输入整数"}]},we.a),B.a.createElement(ye.a,{maxLength:"2",placeholder:"请输入",disabled:"see"===t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Ve,P()({label:"承重",name:"bearing",rules:[{required:!0,message:"请输入"},{max:10,message:"最多输入10个字符"},{pattern:Ce.a.float,message:"请输入数字"}]},we.a),B.a.createElement(i.a,{suffix:"kg",disabled:"see"===t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Ve,P()({label:"机柜PDU情况",name:"pdu"},we.a,{rules:[{required:!0,message:"请输入"},{max:50,message:"最多输入50个字符"}]}),B.a.createElement(i.a,{disabled:"see"===t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Ve,P()({label:"行*列",style:{marginBottom:0}},we.a,{rules:[{required:!0,message:"请输入"}]}),B.a.createElement(Ve,{name:"row",rules:[{required:!0,message:"请输入行"},{type:"number",max:99,message:"最多输入2位数"},{pattern:Ce.a.isNumAndThanZero,message:"请输入整数"}],style:{display:"inline-block",width:100}},B.a.createElement(ye.a,{placeholder:"请输入行",disabled:"see"===t||"up"===t})),B.a.createElement(Ve,{name:"col",rules:[{required:!0,message:"请输入列"},{type:"number",max:99,message:"最多输入2位数"},{pattern:Ce.a.isNumAndThanZero,message:"请输入整数"}],style:{display:"inline-block",width:100}},B.a.createElement(ye.a,{placeholder:"请输入列",disabled:"see"===t||"up"===t})),B.a.createElement(o.a,{disabled:"see"===t||"up"===t,onClick:function(){e.showRegonMap()},type:"primary",style:{width:100}},"生成区域图"))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Ve,P()({label:B.a.createElement("span",{className:"required"},"机柜电力")},we.a,{rules:[{required:!0,message:"请输入"},{max:10,message:"最多输入10个字符"},{pattern:Ce.a.float,message:"请输入数字"}]}),B.a.createElement(Ve,P()({name:"amp"},we.a,{style:{display:"inline-block",width:200},rules:[{required:!0,message:"请输入"},{max:10,message:"最多输入10个字符"},{pattern:Ce.a.float,message:"请输入数字"}]}),B.a.createElement(i.a,{style:{width:190},disabled:"see"===t})),B.a.createElement(Ve,P()({name:"voltageUnit"},we.a,{style:{display:"inline-block",width:100},rules:[{required:!0,message:"请选择"}]}),B.a.createElement(N.a,{style:{width:130},disabled:"see"===t},B.a.createElement(Be,{value:"A"},"A"),B.a.createElement(Be,{value:"KVA"},"KVA"),B.a.createElement(Be,{value:"KW"},"KW"))))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Ve,P()({label:"电压",name:"voltage"},we.a,{rules:[{required:!0,message:"请输入"},{max:10,message:"最多输入10个字符"},{pattern:Ce.a.float,message:"请输入数字"}]}),B.a.createElement(i.a,{suffix:"V",disabled:"see"===t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Ve,P()({label:"规格",name:"spec",rules:[{required:!0,message:"请输入"},{max:14,message:"最多输入14个字符"}]},we.a),B.a.createElement(i.a,{min:1,disabled:"see"===t,placeholder:"示例：600*800"}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:12,xl:12},B.a.createElement(Ve,P()({label:"负责人",name:"fzr",rules:[{required:!0,message:"请输入"},{max:10,message:"最多输入10个字符"}]},we.a),B.a.createElement(i.a,{min:1,disabled:"see"===t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:24,xl:24},B.a.createElement(Ve,P()({label:"区域描述",name:"description",rules:[{required:!0,message:"请输入"},{max:250,message:"最多输入250个字符"}]},we.b),B.a.createElement(ze,{autoSize:{minRows:5},placeholder:"请输入",disabled:"see"===t}))),B.a.createElement(Ee.a,{xs:24,sm:24,md:24,lg:24,xl:24},B.a.createElement(Ve,P()({label:"备注",name:"remark"},we.b,{rules:[{max:250,message:"最多输入250个字符"}]}),B.a.createElement(ze,{autoSize:{minRows:5},placeholder:"请输入",disabled:"see"===t})))),"see"!==t&&B.a.createElement("div",{className:"actions-btn"},B.a.createElement(o.a,{htmlType:"submit",className:"action-btn ok"},"确认提交"),B.a.createElement(o.a,{onClick:this.onResetSearch,className:"action-btn ok"},"重置"),B.a.createElement(o.a,{onClick:this.onClose,className:"action-btn ok"},"取消"))))))}}]),n}(B.a.Component),M()(Ae,"propTypes",{location:H.a.any,history:H.a.any,areaResouse:H.a.any,operateType:H.a.string,data:H.a.any,visible:H.a.bool,modalLoading:H.a.bool,onOk:H.a.func,onClose:H.a.func}),Ie=Ne))||Ie)||Ie,He=t(1924),Ge=t(1923),We=t(1728),Ze=t.n(We);function Je(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Xe(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function Qe(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Xe(Object(t),!0).forEach((function(a){M()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xe(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function Ye(e){if(!e)return[void 0,void 0];var a,t,n=e.search(/KVA|KW|A/i);return-1!=n&&(a=e.slice(0,n),t=e.slice(n)),[a,t]}var $e=function(e){var a=e.index,t=e.moveRow,n=e.className,o=e.style,r=e.record,l=V()(e,["index","moveRow","className","style","record"]),s=B.a.useRef(),i=Object(He.a)({accept:"DragbleBodyRow1",collect:function(e){var t=(e.getItem()||{}).index;return t===a?{}:{begainItem:e.getItem(),isOver:e.isOver(),dropClassName:t<a?" drop-over-downward":" drop-over-upward"}},drop:function(e){t(e.index,a,e)}}),c=q()(i,2),d=c[0],m=d.isOver,u=d.dropClassName,p=c[1],h=Object(Ge.a)({item:{type:"DragbleBodyRow1",index:a,record:r},collect:function(e){return{isDragging:e.isDragging()}},beginDrag:function(e,a,t){return{record:e.record}}});return p((0,q()(h,2)[1])(s)),B.a.createElement("tr",P()({ref:s,className:"".concat(n).concat(m?u:""),style:Qe({cursor:"move"},o)},l))},ea=N.a.Option,aa=Object(ne.b)("roomManage")(je=Object(ne.b)("areaResouse")(je=Object(ne.b)("cabinetDict")(je=Object(ne.c)((Fe=qe=function(e){C()(n,e);var a,t=(a=n,function(){var e,t=I()(a);if(Je()){var n=I()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O()(this,e)});function n(e){var a;return v()(this,n),a=t.call(this,e),M()(w()(a),"searchFormRef",B.a.createRef()),M()(w()(a),"onResetSearch",(function(){a.searchFormRef.current.resetFields()})),M()(w()(a),"onCopy",(function(e){Ze()(e.houseLocakCode),b.a.success("复制成功")})),M()(w()(a),"components",{body:{row:$e}}),M()(w()(a),"moveRow",(function(e,t,n,o,r){if(e==t)return!1;var l=a.state.lists,s=[];if(e>t){var i=l.slice(t,e);i.forEach((function(e){s.push({id:e.id,sort:e.sort+1})})),s.unshift({id:n.record.id,sort:n.record.sort-i.length})}if(t>e){var c=l.slice(e+1,t+1);c.forEach((function(e){s.push({id:e.id,sort:e.sort-1})})),s.push({id:n.record.id,sort:n.record.sort+c.length})}oe.a.post("".concat(BSS_ADMIN_URL,"/api/product/house/sort"),s).then((function(e){e=e.data,re.a.hasStatusOk(e)?(a.setState({modalLoading:!1,modalShow:!1}),re.a.auto_close_result("ok","操作成功"),a.onGetListData({page:1})):re.a.dealFail(e),a.setState({modalLoading:!1})})).catch((function(){a.setState({modalLoading:!1})}))})),a.state={searchParam:{},lists:[],areaList:[],houseList:[],loading:!1,page:1,pageSize:20,total:0,operateType:"add",modalShow:!1,modalLoading:!1,nowData:{},nowDataRegion:{},operateTypeRegion:"add",modalShowRegion:!1,modalLoadingRegion:!1,expandedRowKeys:[]},a}return k()(n,[{key:"componentDidMount",value:function(){this.props.areaResouse.areaTreeList.length<=0&&this.props.areaResouse.fetchArea(),this.props.areaResouse.houseList.length<=0&&this.props.areaResouse.fetchHouse(),this.props.cabinetDict.fetchHouseLevel(),this.onGetListData(this.state.page,this.state.pageSize)}},{key:"onGetListData",value:function(e){var a=this,t=_.assign({},this.state.searchParam,e);this.setState({loading:!0}),oe.a.get("".concat(BSS_ADMIN_URL,"/api/product/house"),{params:re.a.clearNull(t)}).then((function(e){if(e=e.data,re.a.hasStatusOk(e)){var t=e.data,n=[];_.map(t,(function(e){n.push({id:e.id,name:e.name})})),a.setState({lists:t,houseList:n})}else re.a.dealFail(e);a.setState({loading:!1})})).catch((function(){a.setState({loading:!1})}))}},{key:"onSearch",value:function(e){this.searchCondition=e,this.onGetListData(e)}},{key:"onModalShow",value:function(e,a){if("add"===e)this.setState({nowData:{districtId:"",houseLocakCode:"",code:"",name:"",alias:"",mj:"",num:"",addr:"",oldHouseCode:"",oldHouseName:"",attribute:null,remark:"",head:"",tel:"",localInfo:"",houseAddTime:""}});else{var t=Ye(a.cabinetAmp),n=null;n=a.houseAddTime?Re()(a.houseAddTime):null,this.setState({nowData:Qe({},a,{cabinetAmp:t[0],voltageUnit:t[1],houseAddTime:n})})}this.setState({modalShow:!0,operateType:e})}},{key:"onModalOk",value:function(e){var a=this;if(this.setState({modalLoading:!0}),"add"==this.state.operateType){var t=re.a.clearNull(e);oe.a.post("".concat(BSS_ADMIN_URL,"/api/product/house/add"),t).then((function(e){e=e.data,re.a.hasStatusOk(e)?(a.setState({page:1,modalLoading:!1,modalShow:!1}),re.a.auto_close_result("ok","操作成功"),a.onGetListData({page:1}),a.props.areaResouse.fetchHouse()):re.a.dealFail(e),a.setState({modalLoading:!1})})).catch((function(){a.setState({modalLoading:!1})}))}else{var n=re.a.clearNull(e);oe.a.put("".concat(BSS_ADMIN_URL,"/api/product/house/").concat(this.state.nowData.id,"/update"),n).then((function(e){e=e.data,re.a.hasStatusOk(e)?(a.setState({page:1,modalLoading:!1,modalShow:!1}),re.a.auto_close_result("ok","操作成功"),a.onGetListData()):re.a.dealFail(e),a.setState({modalLoading:!1})})).catch((function(){a.setState({modalLoading:!1})}))}}},{key:"onModalClose",value:function(){this.setState({modalShow:!1})}},{key:"onDel",value:function(e){var a=this;this.setState({loading:!0}),oe.a.delete("".concat(BSS_ADMIN_URL,"/api/product/house/").concat(e,"/delete")).then((function(e){e=e.data,re.a.hasStatusOk(e)?(re.a.auto_close_result("ok","操作成功"),a.onGetListData()):(re.a.dealFail(e),a.setState({loading:!1}))})).catch((function(){a.setState({loading:!1})}))}},{key:"onModalShowRegion",value:function(e,a){this.props.areaResouse.fetchArea();var t={};this.districtId=a.districtId;var n=Ye(a.amp);t="add"==e?{districtId:a.districtId,houseId:a.id,amp:n[0],voltageUnit:n[1],voltage:a.cabinetVoltage,pdu:a.cabinetPdu,cabinetUCount:a.cabinetUs,bearing:a.cabinetBearing,spec:a.cabinetSpec}:Qe({},a,{amp:n[0],voltageUnit:n[1]}),this.setState({modalShowRegion:!0,nowDataRegion:t,operateTypeRegion:e})}},{key:"onModalOkRegion",value:function(e){var a=this;this.setState({modalLoadingRegion:!0});var t=Qe({districtId:this.districtId},e);if("add"==this.state.operateTypeRegion){var n=re.a.clearNull(t);oe.a.post("".concat(BSS_ADMIN_URL,"/api/product/floor/add"),n).then((function(e){e=e.data,re.a.hasStatusOk(e)?(a.setState({modalLoadingRegion:!1,modalShowRegion:!1}),a.onGetListData(),re.a.auto_close_result("ok","操作成功")):re.a.dealFail(e),a.setState({modalLoadingRegion:!1})})).catch((function(){a.setState({modalLoadingRegion:!1})}))}else{var o=re.a.clearNull(Qe({},this.state.nowDataRegion,{},e));oe.a.put("".concat(BSS_ADMIN_URL,"/api/product/floor/").concat(this.state.nowDataRegion.id,"/update"),re.a.clearNull(o)).then((function(e){e=e.data,re.a.hasStatusOk(e)?(a.setState({modalLoadingRegion:!1,modalShowRegion:!1}),a.onGetListData(),re.a.auto_close_result("ok","操作成功")):re.a.dealFail(e),a.setState({modalLoadingRegion:!1})})).catch((function(){a.setState({modalLoadingRegion:!1})}))}}},{key:"onModalCloseRegion",value:function(){this.setState({modalShowRegion:!1})}},{key:"onDelRegion",value:function(e){var a=this;this.setState({loading:!0}),oe.a.delete("".concat(BSS_ADMIN_URL,"/api/product/floor/").concat(e,"/delete")).then((function(e){e=e.data,re.a.hasStatusOk(e)?(re.a.auto_close_result("ok","操作成功"),a.onGetListData(a.state.page,a.state.pageSize)):(re.a.dealFail(e),a.setState({loading:!1}))})).catch((function(){a.setState({loading:!1})}))}},{key:"makeColumns",value:function(){var e=this;return[{title:"地区",width:160,dataIndex:"localInfo",key:"localInfo"},{title:"机房名称",dataIndex:"name",key:"name"},{title:"机房编码",dataIndex:"code",key:"code"},{title:"机房别名",dataIndex:"alias",key:"alias"},{title:"机房位置码",dataIndex:"houseLocakCode",key:"houseLocakCode"},{title:"机房等级",dataIndex:"houseLevel",key:"houseLevel",render:function(a,t){return e.props.cabinetDict.HouseLevel[a]||"unkown"}},{title:"机房属性",dataIndex:"attribute",key:"attribute",render:function(e,a){return le.d.house_attr[e]||"unknow"}},{title:"机柜总U数",dataIndex:"cabinetUs",key:"cabinetUs"},{title:"机柜规格",dataIndex:"cabinetSpec",key:"cabinetSpec"},{title:"机柜承重(KG)",dataIndex:"cabinetBearing",key:"cabinetBearing"},{title:"机柜供电电压(V)",dataIndex:"cabinetVoltage",key:"cabinetVoltage"},{title:"机柜默认电力",dataIndex:"cabinetAmp",key:"cabinetAmp"},{title:"机柜PDU情况",dataIndex:"cabinetPdu",key:"cabinetPdu"},{title:"机房建立时间",dataIndex:"houseAddTime",key:"houseAddTime",render:function(e,a){return a.houseAddTime?re.a.getTime(e):""}},{title:"操作",key:"control",fixed:"right",width:200,render:function(a,t){var n=[],o=se.a.getPermission()||[];o.includes("house-view")&&n.push(B.a.createElement("span",{key:"0",className:"control-btn green",onClick:function(){return e.onModalShow("see",t)}},B.a.createElement(g.a,{placement:"top",title:"查看机房"},B.a.createElement(G.a,null)))),n.push(B.a.createElement("span",{key:"5",className:"control-btn green",onClick:function(){return e.onCopy(t)}},B.a.createElement(g.a,{placement:"top",title:"复制机房位置码"},B.a.createElement($,null)))),o.includes("house-edit")&&n.push(B.a.createElement("span",{key:"1",className:"control-btn blue",onClick:function(){return e.onModalShow("up",t)}},B.a.createElement(g.a,{placement:"top",title:"修改机房"},B.a.createElement(ee.a,null)))),o.includes("house-add")&&n.push(B.a.createElement("span",{key:"2",className:"control-btn blue",onClick:function(){return e.onModalShowRegion("add",t)}},B.a.createElement(g.a,{placement:"top",title:"添加机房区域"},B.a.createElement(ae.a,null)))),o.includes("house-del")&&n.push(B.a.createElement(h.a,{key:"3",title:"确定删除吗?",onConfirm:function(){return e.onDel(t.id)},okText:"确定",cancelText:"取消"},B.a.createElement("span",{className:"control-btn red"},B.a.createElement(g.a,{placement:"top",title:"删除机房"},B.a.createElement(te.a,null)))));var r=[];return n.forEach((function(e,a){a&&r.push(B.a.createElement(u.a,{key:"line".concat(a),type:"vertical"})),r.push(e)})),r}}]}},{key:"expandedRowRender",value:function(e){var a=this,t=[{title:"区域名称",dataIndex:"name",key:"name"},{title:"物理位置码",dataIndex:"locationCode",key:"locationCode"},{title:"区域编码",dataIndex:"code",key:"code"},{title:"机柜U位",dataIndex:"cabinetUCount",key:"cabinetUCount"},{title:"承重(KG)",dataIndex:"bearing",key:"bearing"},{title:"行数",dataIndex:"row",key:"row"},{title:"列数",dataIndex:"col",key:"col"},{title:"电力",dataIndex:"amp",key:"amp"},{title:"电压(V)",dataIndex:"voltage",key:"voltage"},{title:"机柜PDU",dataIndex:"pdu",key:"pdu"},{title:"规格",dataIndex:"spec",key:"spec"},{title:"负责人",dataIndex:"fzr",key:"fzr"},{title:"操作",key:"control",fixed:"right",width:160,render:function(e,t){var n=[];se.a.hasPermission("region-view")&&n.push(B.a.createElement("span",{key:"0",className:"control-btn green1",onClick:function(){return a.onModalShowRegion("see",t)}},B.a.createElement(g.a,{placement:"top",title:"查看区域"},B.a.createElement(G.a,null)))),se.a.hasPermission("region-edit")&&n.push(B.a.createElement("span",{key:"1",className:"control-btn blue1",onClick:function(){return a.onModalShowRegion("up",t)}},B.a.createElement(g.a,{placement:"top",title:"修改区域"},B.a.createElement(ee.a,null)))),se.a.hasPermission("region-del")&&n.push(B.a.createElement(h.a,{key:"3",title:"确定删除吗?",onConfirm:function(){return a.onDelRegion(t.id)},okText:"确定",cancelText:"取消"},B.a.createElement("span",{className:"control-btn red1"},B.a.createElement(g.a,{placement:"top",title:"删除区域"},B.a.createElement(te.a,null)))));var o=[];return n.forEach((function(e,a){a&&o.push(B.a.createElement(u.a,{key:"line".concat(a),type:"vertical"})),o.push(e)})),o}}];return B.a.createElement(d.a,{columns:t,rowKey:function(e){return e.id},dataSource:e,pagination:!1})}},{key:"expandedRow",value:function(e,a){var t=this.state.expandedRowKeys,n=t;e?n=t.filter((function(e){return e!==a.id})):n.push(a.id),this.setState({expandedRowKeys:n})}},{key:"render",value:function(){var e=this,a=this.state,t=a.lists,n=a.loading,r=this.props.cabinetDict.HouseLevel;return B.a.createElement("main",{className:"mian"},B.a.createElement("div",{className:"g-search"},B.a.createElement(l.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(a){e.onSearch(a)}},B.a.createElement(l.a.Item,{name:"name"},B.a.createElement(i.a,{placeholder:"机房名称",allowClear:!0})),B.a.createElement(l.a.Item,{name:"regionName"},B.a.createElement(i.a,{placeholder:"区域名称",allowClear:!0})),B.a.createElement(l.a.Item,{name:"attribute"},B.a.createElement(N.a,{placeholder:"机房属性",allowClear:!0,style:{width:100}},_.map(le.d.house_attr,(function(e,a){return B.a.createElement(ea,{value:parseInt(a),key:a},e)})))),B.a.createElement(l.a.Item,{shouldUpdate:!0},B.a.createElement(o.a,{type:"primary",htmlType:"submit"},"搜索")),B.a.createElement(l.a.Item,{shouldUpdate:!0},B.a.createElement(o.a,{type:"primary",onClick:this.onResetSearch},"重置")))),B.a.createElement("div",{className:"g-operate"},se.a.hasPermission("house-add")&&B.a.createElement(o.a,{size:"middle",className:"actions-btn",onClick:function(){e.onModalShow("add")}},"添加机房")),B.a.createElement("div",{className:"g-table"},B.a.createElement(d.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:n,dataSource:t,pagination:!1,components:se.a.hasPermission("house-option")?this.components:{},expandable:{indentSize:0,expandRowByClick:!0,expandedRowRender:function(a){return e.expandedRowRender(a.regionList)}},onRow:se.a.hasPermission("house-option")?function(a,t){return{record:a,index:t,moveRow:function(n,o,r){e.moveRow(n,o,r,a,t)}}}:null})),B.a.createElement(_e,{visible:this.state.modalShow,modalLoading:this.state.modalLoading,data:this.state.nowData,operateType:this.state.operateType,onOk:function(a){return e.onModalOk(a)},onClose:function(){return e.onModalClose()},HouseLevel:r}),B.a.createElement(Ke,{visible:this.state.modalShowRegion,modalLoading:this.state.modalLoadingRegion,data:this.state.nowDataRegion,operateType:this.state.operateTypeRegion,onOk:function(a){return e.onModalOkRegion(a)},onClose:function(){return e.onModalCloseRegion()}}))}}]),n}(B.a.Component),M()(qe,"propTypes",{location:H.a.any,history:H.a.any}),je=Fe))||je)||je)||je)||je},1596:function(e,a,t){"use strict";var n=t(0),o={name:"eye",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]}},r=t(69),l=function(e,a){return n.createElement(r.a,Object.assign({},e,{ref:a,icon:o}))};l.displayName="EyeOutlined";a.a=n.forwardRef(l)},1621:function(e,a,t){"use strict";var n,o,r,l=t(15),s=t.n(l),i=t(19),c=t.n(i),d=t(6),m=t.n(d),u=t(20),p=t.n(u),h=t(21),f=t.n(h),g=t(13),y=t.n(g),b=t(2),E=t.n(b),v=(t(416),t(192)),x=t.n(v),k=(t(65),t(25)),R=t.n(k),w=(t(58),t(11)),S=t.n(w),C=(t(98),t(55)),D=t.n(C),O=(t(60),t(12)),L=t.n(O),I=t(0),A=t.n(I),N=t(1),T=t.n(N),P=t(23),U=t(5),_=t.n(U);t(18),t(9),t(28);function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}L.a.Item,D.a.TextArea,S.a.Option,R.a.confirm;var j=x.a.TreeNode,q=Object(P.b)("root")(n=Object(P.b)("areaResouse")(n=Object(P.c)((r=o=function(e){p()(n,e);var a,t=(a=n,function(){var e,t=y()(a);if(M()){var n=y()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f()(this,e)});function n(e){var a;return s()(this,n),a=t.call(this,e),E()(m()(a),"onSelect",(function(e){a.props.onSelect(e),a.setState({value:e})})),a.state={value:a.props.defaultValue,treedata:a.props.areaResouse.areaTreeList},a}return c()(n,[{key:"componentDidMount",value:function(){}},{key:"makeDomTree",value:function(e){var a=this;return e.children&&e.children.length>0?A.a.createElement(j,{title:e.name,key:e.id,value:e.id,disabled:"0"===e.id&&"house"===this.props.type},_.a.map(e.children,(function(e){return a.makeDomTree(e)}))):A.a.createElement(j,{title:e.name,key:e.id,value:e.id}," ")}},{key:"render",value:function(){var e=this,a=this.state.treedata;return A.a.createElement(A.a.Fragment,null,A.a.createElement(x.a,{disabled:this.props.disabled,defaultValue:this.props.districtId,placeholder:this.props.placeholder,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treedefaultexpandallshow:"false",allowClear:!0,onChange:this.onSelect},_.a.map(a,(function(a){return e.makeDomTree(a)}))))}}]),n}(A.a.Component),E()(o,"propTypes",{areaResouse:T.a.any,disabled:T.a.bool,defaultValue:T.a.string,placeholder:T.a.string,onSelect:T.a.func}),n=r))||n)||n)||n;a.a=q},1642:function(e,a,t){},1728:function(e,a,t){"use strict";var n=t(1729),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,a){var t,r,l,s,i,c,d=!1;a||(a={}),t=a.debug||!1;try{if(l=n(),s=document.createRange(),i=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(n){if(n.stopPropagation(),a.format)if(n.preventDefault(),void 0===n.clipboardData){t&&console.warn("unable to use e.clipboardData"),t&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=o[a.format]||o.default;window.clipboardData.setData(r,e)}else n.clipboardData.clearData(),n.clipboardData.setData(a.format,e);a.onCopy&&(n.preventDefault(),a.onCopy(n.clipboardData))})),document.body.appendChild(c),s.selectNodeContents(c),i.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");d=!0}catch(n){t&&console.error("unable to copy using execCommand: ",n),t&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(a.format||"text",e),a.onCopy&&a.onCopy(window.clipboardData),d=!0}catch(n){t&&console.error("unable to copy using clipboardData: ",n),t&&console.error("falling back to prompt"),r=function(e){var a=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,a)}("message"in a?a.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{i&&("function"==typeof i.removeRange?i.removeRange(s):i.removeAllRanges()),c&&document.body.removeChild(c),l()}return d}},1729:function(e,a){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var a=document.activeElement,t=[],n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));switch(a.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":a.blur();break;default:a=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||t.forEach((function(a){e.addRange(a)})),a&&a.focus()}}}}]);