(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1551:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return ca}));t(172);var n,l,r,o=t(105),s=t.n(o),i=(t(152),t(78)),c=t.n(i),d=(t(47),t(17)),m=t.n(d),u=(t(98),t(55)),p=t.n(u),h=(t(217),t(120)),f=t.n(h),g=(t(60),t(12)),y=t.n(g),E=(t(254),t(116)),b=t.n(E),v=(t(173),t(84)),w=t.n(v),k=t(15),S=t.n(k),I=t(19),C=t.n(I),x=t(6),R=t.n(x),O=t(20),T=t.n(O),D=t(21),N=t.n(D),P=t(13),L=t.n(P),j=t(2),F=t.n(j),M=(t(65),t(25)),V=t.n(M),A=(t(58),t(11)),q=t.n(A),z=t(0),U=t.n(z),B=t(1),K=t.n(B),G=t(134),W=t.n(G),H=t(1591),J=t(1596),Y=t(1592),Q=t(23),X=(t(1799),t(18)),Z=t(9),$=t(52),ee=t(26),ae=(t(171),t(89)),te=t.n(ae),ne=(t(724),t(417)),le=t.n(ne),re=(t(193),t(75)),oe=t.n(re),se=t(33),ie=t.n(se),ce=t(5),de=t.n(ce),me=t(16),ue=t.n(me),pe=t(28);function he(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function fe(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?he(Object(t),!0).forEach((function(a){F()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function ge(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ye,Ee,be,ve=y.a.Item,we=p.a.TextArea,ke=q.a.Option,Se=Object(Q.b)("root")(n=Object(Q.b)("areaResouse")(n=Object(Q.b)("CategoryProduct")(n=Object(Q.b)("ipresourceDict")(n=Object(Q.c)((r=l=function(e){T()(n,e);var a,t=(a=n,function(){var e,t=L()(a);if(ge()){var n=L()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return N()(this,e)});function n(e){var a;return S()(this,n),a=t.call(this,e),F()(R()(a),"onResetSearch",(function(){a.formRefEdit.current.resetFields()})),F()(R()(a),"onModalshow",(function(){Object.keys(a.props.ipresourceDict.defenseline).length<=0&&a.props.ipresourceDict.fetchdefenseline(),a.setState({showModal:!0})})),F()(R()(a),"onClose",(function(){a.props.onClose()})),F()(R()(a),"onShowPortModal",(function(){a.setState({showPortModal:!0})})),F()(R()(a),"onClosePort",(function(){a.setState({showPortModal:!1})})),F()(R()(a),"onlocationChange",(function(e){console.log(a.state.businessType);var t=a.state.businessType;a.setState({regionId:e}),X.a.get("".concat(BSS_ADMIN_URL,"/api/goods/bandwidth-type/getBandwidthType?regionId=").concat(e,"&categoryId=").concat(t)).then((function(e){e=e.data,console.log(e),Z.a.hasStatusOk(e)?a.setState({bandwidthType:e.data}):Z.a.dealFail(e),a.setState({loading:!1})})).catch((function(){a.setState({loading:!1})}))})),F()(R()(a),"onCategoryChange",(function(e){console.log(e);var t=e[e.length-1];a.setState({businessType:t});var n=a.state.regionId;X.a.get("".concat(BSS_ADMIN_URL,"/api/goods/bandwidth-type/getBandwidthType?regionId=").concat(n,"&categoryId=").concat(t)).then((function(e){e=e.data,console.log(e),Z.a.hasStatusOk(e)?a.setState({bandwidthType:e.data}):Z.a.dealFail(e),a.setState({loading:!1})})).catch((function(){a.setState({loading:!1})}))})),console.log(a.props),a.formRefEdit=U.a.createRef(),a.devideDetail=a.props.defaultData,a.state={showModal:!1,modalLoading:!1,uw:null,ubitInfo:{},regionInfo:{},cabinetInfo:{},devideDetail:{},locationCode:void 0,lists2:[],regionId:a.props.defaultData.regionId,businessTypeName:[a.props.defaultData.businessTypeName],bandwidthTypeName:a.props.defaultData.bandwidthTypeName,businessType:a.props.defaultData.businessType,bandwidthType:a.props.defaultData.bandwidthType},a}return C()(n,[{key:"componentDidMount",value:function(){this.props.areaResouse.fetchVarea(),this.onlocationChange(this.state.regionId)}},{key:"onFinish",value:function(e){var a=fe({regionId:this.state.regionId,bandwidthType:e.bdtype},e,{businessType:de.a.last(e.businessType)||""});console.log(a),this.props.onOk(a)}},{key:"render",value:function(){var e=this,a=this.props.areaResouse.vareaList,t=ee.e.ip_source,n=ee.e.ip_customer_type,l=ee.e.show_type,r=ee.e.ip_type,o=ee.e.boolean,s=this.props.defaultData,i=s.ipAddr,c=s.availableSegment,d=s.netmask,u=s.gateway,h=s.vlan,g=s.ipType,E=this.state,b=E.bandwidthType,v=(E.businessTypeName,E.bandwidthTypeName),w=Z.a.getCascaderValues(this.props.CategoryProduct.categoryList,this.props.defaultData.businessType,[]);w=w.length>0?de.a.reverse(w):[];var k=fe({},this.props.defaultData,{purchasingTime:null==this.props.defaultData.purchasingTime?null:ue()(this.props.defaultData.purchasingTime),storagetime:null==this.props.defaultData.storagetime?null:ue()(this.props.defaultData.storagetime),businessType:w});Z.a.getCascaderValues(this.props.CategoryProduct.categoryList,this.props.defaultData.businessType,[]);return U.a.createElement(U.a.Fragment,null,U.a.createElement(y.a,{name:"form_in_modal",ref:this.formRefEdit,className:"g-modal-field",initialValues:k,onFinish:function(a){e.onFinish(a)}},U.a.createElement(te.a,null,U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(ve,ie()({name:"fullLocationName",label:"机房/区域",rules:[{required:!0,message:"请选择机房"}]},pe.a),U.a.createElement(q.a,{showSearch:!0,filterOption:Z.a.filterOption,allowClear:!0,onChange:this.onlocationChange},a.map((function(e){return U.a.createElement(ke,{value:e.regionId,key:e.regionId},e.fullLocationName)}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(ve,ie()({label:"所属业务",rules:[{required:!0,message:"请选择所属业务"}],name:"businessType"},pe.a),U.a.createElement(f.a,{options:this.props.CategoryProduct.categoryTreeList,placeholder:"请选择所属业务",fieldNames:{label:"name",value:"id",children:"children"},onChange:this.onCategoryChange}))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(ve,ie()({name:"bdtype",label:U.a.createElement("span",{className:"required"}," 带宽类型")},pe.a),U.a.createElement(q.a,{defaultValue:v},de.a.map(b,(function(e,a){return U.a.createElement(ke,{value:e.id,key:a}," ",e.bandwidthName," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(ve,ie()({name:"source",label:U.a.createElement("span",{className:"required"}," ip来源")},pe.a),U.a.createElement(q.a,{disabled:!0},de.a.map(t,(function(e,a){return U.a.createElement(ke,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(y.a.Item,ie()({name:"appropriateTypes",rules:[{required:!0,message:"请选择适用客户类型"}]},pe.a,{label:"适用客户类型"}),U.a.createElement(q.a,null,de.a.map(n,(function(e,a){return U.a.createElement(ke,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(y.a.Item,ie()({name:"showType",rules:[{required:!0,message:"请选择显示方式"}]},pe.a,{label:"显示方式"}),U.a.createElement(q.a,{placeholder:" ",allowClear:!0},de.a.map(l,(function(e,a){return U.a.createElement(ke,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(y.a.Item,ie()({name:"isWall",rules:[{required:!0,message:"请选择是否过墙"}]},pe.a,{label:"是否过墙"}),U.a.createElement(q.a,{placeholder:" ",allowClear:!0},de.a.map(o,(function(e,a){return U.a.createElement(ke,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(y.a.Item,ie()({name:"isLock",rules:[{required:!0,message:"请选择是否锁定"}]},pe.a,{label:"是否锁定"}),U.a.createElement(q.a,{allowClear:!0,defaultValue:"否"},de.a.map(o,(function(e,a){return U.a.createElement(ke,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(ve,ie()({name:"isShare",label:U.a.createElement("span",{className:"required"}," 是否共享")},pe.a),U.a.createElement(q.a,{allowClear:!0,placeholder:" "},de.a.map(o,(function(e,a){return U.a.createElement(ke,{value:parseInt(a),key:a},e)}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(ve,ie()({name:"purchasingTime"},pe.a,{label:U.a.createElement("span",{className:"required"}," 采购时间")}),U.a.createElement(le.a,{disabled:!0,style:{width:"100%"},placeholder:" "}))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(ve,ie()({name:"storagetime"},pe.a,{label:U.a.createElement("span",{className:"required"}," 入库时间")}),U.a.createElement(le.a,{disabled:!0,style:{width:"100%"},placeholder:" "}))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:24,xl:24},U.a.createElement(ve,ie()({name:"ipType",label:U.a.createElement("span",{className:"required"}," ip信息")},pe.b),U.a.createElement("div",{className:"ipmsg"},U.a.createElement(q.a,{value:g,allowClear:!0,disabled:!0,style:{width:80}},de.a.map(r,(function(e,a){return U.a.createElement(ke,{value:parseInt(a),key:a},e)}))),U.a.createElement(p.a,{placeholder:" ",type:"text",disabled:!0,value:i}),U.a.createElement(p.a,{placeholder:" ",type:"text",disabled:!0,value:c}),U.a.createElement(p.a,{placeholder:" ",type:"text",disabled:!0,value:d}),U.a.createElement(p.a,{placeholder:" ",type:"text",disabled:!0,value:u}),U.a.createElement(p.a,{placeholder:" ",type:"text",disabled:!0,value:h})))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:24,xl:24},U.a.createElement(ve,ie()({label:"ip资源备注",name:"remark"},pe.b),U.a.createElement(we,{autoSize:{minRows:5},placeholder:"请输入",maxLength:"240"})))),U.a.createElement("div",{className:"actions-btn"},U.a.createElement(m.a,{htmlType:"submit",className:"action-btn ok"},"确认提交"),U.a.createElement(m.a,{onClick:this.onResetSearch,className:"action-btn ok"},"重置"),U.a.createElement(m.a,{onClick:this.onClose,className:"action-btn ok"},"取消"))))}}]),n}(U.a.Component),F()(l,"propTypes",{location:K.a.any,areaResouse:K.a.any,CategoryProduct:K.a.any,id:K.a.string,ipresourceDict:K.a.any,that:K.a.any,root:K.a.any,onClose:K.a.func,onOK:K.a.func,defaultData:K.a.any}),n=r))||n)||n)||n)||n)||n,_e=(t(174),t(107)),Ie=t.n(_e);function Ce(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var xe=y.a.Item,Re=p.a.TextArea,Oe=q.a.Option,Te=Object(Q.b)("root")(ye=Object(Q.b)("areaResouse")(ye=Object(Q.b)("CategoryProduct")(ye=Object(Q.b)("ipresourceDict")(ye=Object(Q.c)((be=Ee=function(e){T()(n,e);var a,t=(a=n,function(){var e,t=L()(a);if(Ce()){var n=L()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return N()(this,e)});function n(e){var a;return S()(this,n),a=t.call(this,e),F()(R()(a),"formRefCheck",U.a.createRef()),F()(R()(a),"onModalShow",(function(){Object.keys(a.props.ipresourceDict.defenseline).length<=0&&a.props.ipresourceDict.fetchdefenseline(),Object.keys(a.props.ipresourceDict.bandwidthType).length<=0&&a.props.ipresourceDict.fetchbandwidthType(),a.getDetail(a.props.deviceId)})),F()(R()(a),"onClose",(function(){a.setState({showModal:!1})})),a.ports=[],a.state={showModal:!1,modalLoading:!1},a}return C()(n,[{key:"getDetail",value:function(e){var a=this;this.setState({showModal:!0}),X.a.get("".concat(BSS_ADMIN_URL,"/api/product/ipSegment?id=").concat(e)).then((function(e){if(e=e.data,Z.a.hasStatusOk(e)){var t=e.data.records[0];a.setState({ipAddr:t.ipAddr,ipCount:t.availableSegment,netmask:t.netmask,gateway:t.gateway,vlan:t.vlan,defenseValues:t.defenseValues,ipType:t.ipType});var n=Z.a.getCascaderValues(a.props.CategoryProduct.categoryList,t.businessType,[]);n=n.length>0?de.a.reverse(n):[],a.formRefCheck.current.setFieldsValue({purchasingTime:null==t.purchasingTime?null:ue()(t.purchasingTime),storagetime:null==t.storagetime?null:ue()(t.storagetime),fullLocationName:t.fullLocationName,ipSegment:t.ipSegment,masterProduct:t.masterProduct,businessType:n,isDefense:t.isDefense,defenseType:t.defenseType,defenseLine:t.defenseLine,isShare:t.isShare,bandwidthType:t.bandwidthTypeName,source:t.source,isLock:t.isLock,resStatus:t.resStatus,specialStatus:t.specialStatus,ipSegmentRemark:t.ipSegmentRemark,remark:t.remark,ipResourceremark:t.ipResourceremark,showType:t.showType,appropriateTypes:t.appropriateTypes,isWall:t.isWall}),a.setState({modalLoading:!1})}else Z.a.dealFail(e),a.setState({modalLoading:!1})})).catch((function(){a.setState({modalLoading:!1})}))}},{key:"onGetCategory",value:function(){var e=this;X.a.get("".concat(BSS_ADMIN_URL,"/api/goods/category")).then((function(a){if(a=a.data,Z.a.hasStatusOk(a)){var t,n=a.data;t=Z.a.formatTree(n),e.setState({lists2:t})}else Z.a.dealFail(a);e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this.props.ipresourceDict,a=(e.defenseline,e.bandwidthType),t=(ee.e.business_type,ee.e.ip_source),n=ee.e.ip_customer_type,l=(ee.e.ip_defense_type,ee.e.show_type),r=ee.e.ip_type,o=ee.e.boolean,s=this.state,i=s.showModal,c=s.modalLoading,d=s.ipAddr,m=s.ipCount,u=s.netmask,h=s.gateway,g=s.vlan,E=(s.defenseValues,s.ipType);s.lists2;return U.a.createElement(U.a.Fragment,null,U.a.createElement(V.a,{title:"ip资源查看",maskClosable:!1,width:"80%",destroyOnClose:!0,footer:null,onCancel:this.onClose,visible:i},U.a.createElement(Ie.a,{tip:"Loading...",spinning:c},U.a.createElement(y.a,{name:"form_in_modal",ref:this.formRefCheck,className:"g-modal-field"},U.a.createElement(te.a,null,U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(xe,ie()({name:"fullLocationName",label:"机房/区域",rules:[{required:!0}]},pe.a),U.a.createElement(p.a,{type:"text",disabled:!0}))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(xe,ie()({name:"businessType",label:U.a.createElement("span",{className:"required"}," 所属业务")},pe.a),U.a.createElement(f.a,{disabled:!0,options:this.props.CategoryProduct.categoryTreeList,placeholder:"请选择所属业务",fieldNames:{label:"name",value:"id",children:"children"}}))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(xe,ie()({name:"bandwidthType",label:U.a.createElement("span",{className:"required"}," 带宽类型")},pe.a),U.a.createElement(q.a,{disabled:!0},de.a.map(a,(function(e,a){return U.a.createElement(Oe,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(xe,ie()({name:"source",label:U.a.createElement("span",{className:"required"}," ip来源")},pe.a),U.a.createElement(q.a,{disabled:!0},de.a.map(t,(function(e,a){return U.a.createElement(Oe,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(y.a.Item,ie()({name:"appropriateTypes",rules:[{required:!0}]},pe.a,{label:"适用客户类型"}),U.a.createElement(q.a,{disabled:!0},de.a.map(n,(function(e,a){return U.a.createElement(Oe,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(y.a.Item,ie()({name:"showType",rules:[{required:!0}]},pe.a,{label:"显示方式"}),U.a.createElement(q.a,{disabled:!0},de.a.map(l,(function(e,a){return U.a.createElement(Oe,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(y.a.Item,ie()({name:"isWall",rules:[{required:!0}]},pe.a,{label:"是否过墙"}),U.a.createElement(q.a,{disabled:!0},de.a.map(o,(function(e,a){return U.a.createElement(Oe,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(y.a.Item,ie()({name:"isLock",rules:[{required:!0}]},pe.a,{label:"是否锁定"}),U.a.createElement(q.a,{disabled:!0},de.a.map(o,(function(e,a){return U.a.createElement(Oe,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(xe,ie()({name:"isShare",label:U.a.createElement("span",{className:"required"}," 是否共享")},pe.a),U.a.createElement(q.a,{disabled:!0,allowClear:!0,placeholder:" "},de.a.map(o,(function(e,a){return U.a.createElement(Oe,{value:parseInt(a),key:a},e)}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(xe,ie()({name:"purchasingTime",label:U.a.createElement("span",{className:"required"}," 采购时间")},pe.a),U.a.createElement(le.a,{placeholder:" ",style:{width:"100%"},disabled:!0}))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(xe,ie()({name:"storagetime",label:U.a.createElement("span",{className:"required"}," 入库时间")},pe.a),U.a.createElement(le.a,{placeholder:" ",style:{width:"100%"},disabled:!0}))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:24,xl:24},U.a.createElement(xe,ie()({name:"ipType",label:U.a.createElement("span",{className:"required"}," ip信息")},pe.b),U.a.createElement("div",{className:"ipmsg"},U.a.createElement(q.a,{disabled:!0,value:E,allowClear:!0,style:{width:100}},de.a.map(r,(function(e,a){return U.a.createElement(Oe,{value:parseInt(a),key:a},e)}))),U.a.createElement(p.a,{placeholder:"ip地址",type:"text",disabled:!0,value:d}),U.a.createElement(p.a,{placeholder:"可用ip",type:"text",disabled:!0,value:m}),U.a.createElement(p.a,{placeholder:"掩码",type:"text",disabled:!0,value:u}),U.a.createElement(p.a,{placeholder:"网关",type:"text",disabled:!0,value:h}),U.a.createElement(p.a,{placeholder:"vlan",type:"text",disabled:!0,value:g})))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:24,xl:24},U.a.createElement(xe,ie()({label:"ip资源备注",name:"remark"},pe.b),U.a.createElement(Re,{disabled:!0,autoSize:{minRows:5},maxLength:"240"}))))))),U.a.createElement("span",{onClick:this.onModalShow},this.props.children))}}]),n}(U.a.Component),F()(Ee,"propTypes",{children:K.a.any,deviceId:K.a.string,data:K.a.any,visible:K.a.bool,modalLoading:K.a.bool,location:K.a.any,areaResouse:K.a.any,id:K.a.string,ipresourceDict:K.a.any,CategoryProduct:K.a.any,root:K.a.any,onClose:K.a.func,onOK:K.a.func}),ye=be))||ye)||ye)||ye)||ye)||ye,De=t(218),Ne=t.n(De),Pe=(t(1800),{name:"plus-circle",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]}}),Le=t(69),je=function(e,a){return z.createElement(Le.a,Object.assign({},e,{ref:a,icon:Pe}))};je.displayName="PlusCircleOutlined";var Fe=z.forwardRef(je),Me={name:"minus-circle",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]}},Ve=function(e,a){return z.createElement(Le.a,Object.assign({},e,{ref:a,icon:Me}))};Ve.displayName="MinusCircleOutlined";var Ae,qe,ze,Ue=z.forwardRef(Ve);function Be(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ke,Ge,We,He=Object(Q.b)("root")(Ae=Object(Q.b)("areaResouse")(Ae=Object(Q.b)("ipresourceDict")(Ae=Object(Q.c)((ze=qe=function(e){T()(n,e);var a,t=(a=n,function(){var e,t=L()(a);if(Be()){var n=L()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return N()(this,e)});function n(e){var a;return S()(this,n),a=t.call(this,e),F()(R()(a),"onFinish",(function(e){console.log(e),console.log(a.state.IPsegment);var t=a.state.IPsegment,n={ipAddr:t.ip_1+"."+t.ip_2+"."+t.ip_3+"."+t.ip_4+"/"+t.bits,ipType:2,ipCount:e.numofaddr,netmask:e.snm_1+"."+e.snm_2+"."+e.snm_3+"."+e.snm_4,gateway:e.firstadr_1+"."+e.firstadr_2+"."+e.firstadr_3+"."+e.firstadr_4,vlan:"",availableSegment:e.firstadr_1+"."+e.firstadr_2+"."+e.firstadr_3+"."+(e.firstadr_4+1)+"-"+e.lastadr_4,networkIp:e.nwadr_1+"."+e.nwadr_2+"."+e.nwadr_3+"."+e.nwadr_4,broadcastIp:e.bcast_1+"."+e.bcast_2+"."+e.bcast_3+"."+e.bcast_4};if(1==n.ipType&&(n.ipAddr=t.ip_1+"."+t.ip_2+"."+t.ip_3+"."+t.ip_4),31!=t.bits&&32!=t.bits||(n.broadcastIp="",n.networkIp=""),console.log(a.props),console.log(n),"错误"==e.snm_1||"错误"==e.numofaddr)return!1;a.props.onOk(n,a.props.index)})),F()(R()(a),"onResetSearch",(function(){a.formRefEdit.current.resetFields()})),F()(R()(a),"onModalshow",(function(){Object.keys(a.props.ipresourceDict.defenseline).length<=0&&a.props.ipresourceDict.fetchdefenseline(),Object.keys(a.props.ipresourceDict.bandwidthType).length<=0&&a.props.ipresourceDict.fetchbandwidthType(),a.setState({showModal:!0})})),F()(R()(a),"onClose",(function(){a.props.onClose()})),F()(R()(a),"onShowPortModal",(function(){a.setState({showPortModal:!0})})),F()(R()(a),"onClosePort",(function(){a.setState({showPortModal:!1})})),F()(R()(a),"clear",(function(){a.formRefEdit.current.resetFields(),a.formRefIP.current.resetFields(),a.setState({IPsegment:null})})),console.log(a.props),a.formRefEdit=U.a.createRef(),a.formRefIP=U.a.createRef(),a.devideDetail=a.props.defaultData,a.state={showModal:!1,modalLoading:!1,uw:null,ubitInfo:{},regionInfo:{},cabinetInfo:{},devideDetail:{},locationCode:void 0},a}return C()(n,[{key:"componentDidMount",value:function(){this.props.areaResouse.fetchVarea(),this.onGetCategory()}},{key:"onChange",value:function(e){}},{key:"onGetCategory",value:function(){var e=this;X.a.get("".concat(BSS_ADMIN_URL,"/api/goods/category")).then((function(a){if(a=a.data,Z.a.hasStatusOk(a)){var t,n=a.data;t=Z.a.formatTree(n),e.setState({lists2:t})}else Z.a.dealFail(a);e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"h_fillbitsfromleft",value:function(e){if(e>=8)return 255;for(var a=65280;e>0;)a>>=1,e--;return 255&a}},{key:"calcNWmask",value:function(e){console.log("aaaaa");var a=parseInt(e.bits,10);if(console.log(a),isNaN(a)||a>=32||a<0)return this.formRefEdit.current.setFieldsValue({snm_1:"错误",snm_2:"",snm_3:"",snm_4:""}),1;if(this.formRefEdit.current.setFieldsValue({snm_1:0,snm_2:0,snm_3:0,snm_4:0}),!(a>=8)){var t=this.h_fillbitsfromleft(a);return this.formRefEdit.current.setFieldsValue({snm_1:t}),0}if(this.formRefEdit.current.setFieldsValue({snm_1:255}),!((a-=8)>=8)){var n=this.h_fillbitsfromleft(a);return this.formRefEdit.current.setFieldsValue({snm_2:n}),0}if(this.formRefEdit.current.setFieldsValue({snm_2:255}),!((a-=8)>=8)){var l=this.h_fillbitsfromleft(a);return this.formRefEdit.current.setFieldsValue({snm_3:l}),0}this.formRefEdit.current.setFieldsValue({snm_3:255}),a-=8;var r=this.h_fillbitsfromleft(a);return this.formRefEdit.current.setFieldsValue({snm_4:r}),0}},{key:"onFinish_count",value:function(e){console.log(e),this.setState({IPsegment:e});var a,t=parseInt(e.ip_1,10);if(console.log(t),isNaN(t)||t>255||t<0)return this.formRefEdit.current.setFieldsValue({numofaddr:"错误"}),1;if(t=parseInt(e.ip_2,10),console.log(t),isNaN(t)||t>255||t<0)return this.formRefEdit.current.setFieldsValue({numofaddr:"错误"}),1;if(t=parseInt(e.ip_3,10),console.log(t),isNaN(t)||t>255||t<0)return this.formRefEdit.current.setFieldsValue({numofaddr:"错误"}),1;if(t=parseInt(e.ip_4,10),console.log(t),isNaN(t)||t>255||t<0)return this.formRefEdit.current.setFieldsValue({numofaddr:"错误"}),1;if(a=this.calcNWmask(e),console.log(this.formRefEdit.current.getFieldValue()),console.log(a),0!=a)return 1;if((t=parseInt(e.bits,10))<0)return this.formRefEdit.current.setFieldsValue({numofaddr:"错误"}),1;if(t>32)return this.formRefEdit.current.setFieldsValue({numofaddr:"错误"}),1;if(31==t){var n=this.formRefEdit.current.getFieldValue();return this.formRefEdit.current.setFieldsValue({numofaddr:2,firstadr_1:e.ip_1&n.snm_1,firstadr_2:e.ip_2&n.snm_2,firstadr_3:e.ip_3&n.snm_3,firstadr_4:e.ip_4&n.snm_4,lastadr_1:e.ip_1|255&~n.snm_1,lastadr_2:e.ip_2|255&~n.snm_2,lastadr_3:e.ip_3|255&~n.snm_3,lastadr_4:e.ip_4|255&~n.snm_4}),1}if(32==t){this.formRefEdit.current.getFieldValue();return this.formRefEdit.current.setFieldsValue({numofaddr:1,firstadr_1:e.ip_1,firstadr_2:e.ip_2,firstadr_3:e.ip_3,firstadr_4:e.ip_4}),1}this.formRefEdit.current.setFieldsValue({numofaddr:Math.pow(2,32-t)-2});var l=this.formRefEdit.current.getFieldValue();return this.formRefEdit.current.setFieldsValue({bcast_1:e.ip_1|255&~l.snm_1,bcast_2:e.ip_2|255&~l.snm_2,bcast_3:e.ip_3|255&~l.snm_3,bcast_4:e.ip_4|255&~l.snm_4,nwadr_1:e.ip_1&l.snm_1,nwadr_2:e.ip_2&l.snm_2,nwadr_3:e.ip_3&l.snm_3,nwadr_4:e.ip_4&l.snm_4}),l=this.formRefEdit.current.getFieldValue(),this.formRefEdit.current.setFieldsValue({firstadr_1:l.nwadr_1,firstadr_2:l.nwadr_2,firstadr_3:l.nwadr_3,firstadr_4:parseInt(l.nwadr_4)+1,lastadr_1:l.bcast_1,lastadr_2:l.bcast_1,lastadr_3:l.bcast_1,lastadr_4:parseInt(l.bcast_4)-1}),0}},{key:"render",value:function(){var e=this;return U.a.createElement(U.a.Fragment,null,U.a.createElement(y.a,{name:"form_in_modal",ref:this.formRefIP,className:"g-modal-field creatip",onFinish:function(a){e.onFinish_count(a)}},U.a.createElement(y.a.Item,{label:"IP 段"},U.a.createElement(y.a.Item,{name:"ip_1",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"ip_2",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"ip_3",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"ip_4",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement("span",{style:{display:"inline-block",marginLeft:"50px"}},"掩码："),U.a.createElement(y.a.Item,{name:"bits",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(m.a,{htmlType:"submit",style:{display:"inline-block",marginLeft:"50px"},className:"action-btn ok"},"计算"),U.a.createElement(m.a,{className:"action-btn ok",onClick:this.clear},"清空"))),U.a.createElement(y.a,{name:"form_in_modal",ref:this.formRefEdit,className:"g-modal-field creatip",onFinish:function(a){e.onFinish(a)}},U.a.createElement(y.a.Item,{label:"掩码地址"},U.a.createElement(y.a.Item,{name:"snm_1",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"snm_2",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"snm_3",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"snm_4",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""}))),U.a.createElement(y.a.Item,{label:"网络地址"},U.a.createElement(y.a.Item,{name:"nwadr_1",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"nwadr_2",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"nwadr_3",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"nwadr_4",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""}))),U.a.createElement(y.a.Item,{label:"广播地址"},U.a.createElement(y.a.Item,{name:"bcast_1",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"bcast_2",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"bcast_3",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"bcast_4",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""}))),U.a.createElement(y.a.Item,{label:"第一可用"},U.a.createElement(y.a.Item,{name:"firstadr_1",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"firstadr_2",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"firstadr_3",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"firstadr_4",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""}))),U.a.createElement(y.a.Item,{label:"最后可用"},U.a.createElement(y.a.Item,{name:"lastadr_1",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"lastadr_2",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"lastadr_3",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""})),U.a.createElement(y.a.Item,{name:"lastadr_4",style:{display:"inline-block",width:"70px"}},U.a.createElement(p.a,{placeholder:""}))),U.a.createElement(y.a.Item,{label:"可用IP个数"},U.a.createElement(y.a.Item,{name:"numofaddr",style:{display:"inline-block",width:"267px"}},U.a.createElement(p.a,{placeholder:""}))),U.a.createElement("p",null,"提示：显示网络，广播，第一次和最后一个给定的网络地址",U.a.createElement("br",null),"在网络掩码“位格式”也被称为CIDR格式（CIDR=无类别域间路由选择）。"),U.a.createElement("div",{className:"actions-btn"},U.a.createElement(m.a,{htmlType:"submit",className:"action-btn ok"},"确认"),U.a.createElement(m.a,{onClick:this.onClose,className:"action-btn ok"},"取消"))))}}]),n}(U.a.Component),F()(qe,"propTypes",{location:K.a.any,areaResouse:K.a.any,id:K.a.string,ipresourceDict:K.a.any,that:K.a.any,root:K.a.any,onClose:K.a.func,onOK:K.a.func,defaultData:K.a.any}),Ae=ze))||Ae)||Ae)||Ae)||Ae;function Je(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function Ye(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Je(Object(t),!0).forEach((function(a){F()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Je(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function Qe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Xe,Ze,$e,ea=y.a.Item,aa=p.a.TextArea,ta=q.a.Option,na=Object(Q.b)("root")(Ke=Object(Q.b)("areaResouse")(Ke=Object(Q.b)("ipresourceDict")(Ke=Object(Q.c)((We=Ge=function(e){T()(n,e);var a,t=(a=n,function(){var e,t=L()(a);if(Qe()){var n=L()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return N()(this,e)});function n(e){var a;return S()(this,n),a=t.call(this,e),F()(R()(a),"onFinish",(function(e){console.log(e),console.log(ue()(e.purchasingTime).format("YYYY-MM-DDTHH:mm:ss"));var t=Ye({},e,{ipInformationReqs:a.state.arr,businessType:e.businessType[e.businessType.length-1]});console.log(t);var n=t.ipInformationReqs[0];if(""==n.availableSegment||""==n.gateway||""==n.ipAddr||""==n.ipType||""==n.netmask)return V.a.warning({title:"提示",content:"请输入完整的IP信息",destroyOnClose:!0}),!1;var l=t.ipInformationReqs[0].ipAddr;X.a.get("".concat(BSS_ADMIN_URL,"/api/product/ipSegment/checkIps?ipAddr=").concat(l)).then((function(e){if(console.log(e),null!==e.data)return V.a.warning({title:"提示",content:"当前IP库存中已存在，请不要重复添加",destroyOnClose:!0}),!1;a.props.onOk(t)})).catch((function(e){console.log(e),a.setState({modalLoading:!1,loading:!1})}))})),F()(R()(a),"onResetSearch",(function(){a.formRefEdit.current.resetFields()})),F()(R()(a),"onModalshow",(function(){Object.keys(a.props.ipresourceDict.defenseline).length<=0&&a.props.ipresourceDict.fetchdefenseline(),a.props.ipresourceDict.fetchbandwidthType(),a.setState({showModal:!0,bandwidthType:a.props.ipresourceDict.bandwidthType})})),F()(R()(a),"onClose",(function(){a.props.onClose()})),F()(R()(a),"createip",(function(e){console.log(e);var t=Ne()(a.state.arr);t.push({ipAddr:"",availableSegment:"",netmask:"",gateway:"",vlan:"",ipType:2}),console.log(a.state.arr),a.setState({arr:t})})),F()(R()(a),"deleteip",(function(e){console.log(e),a.state.arr.splice(e,1),a.setState({arr:a.state.arr})})),F()(R()(a),"selectitem",(function(e,t){console.log(e,t);var n=Ne()(a.state.arr);n[t].ipType=e,a.setState({arr:n})})),F()(R()(a),"onModalClose",(function(){a.setState({ipmodalShow:!1})})),F()(R()(a),"onipOk",(function(e,t){console.log(e,t),a.setState({IPinfo:e,ipmodalShow:!1});var n=Ne()(a.state.arr);n[t]=e,a.setState({arr:n})})),F()(R()(a),"changeipAddr",(function(e,t){console.log(e,t);var n=Ne()(a.state.arr);n[t].ipAddr=e,a.setState({arr:n})})),F()(R()(a),"changeavailableSegment",(function(e,t){console.log(e,t);var n=Ne()(a.state.arr);n[t].availableSegment=e,a.setState({arr:n})})),F()(R()(a),"changenetmask",(function(e,t){console.log(e,t);var n=Ne()(a.state.arr);n[t].netmask=e,a.setState({arr:n})})),F()(R()(a),"changegateway",(function(e,t){console.log(e,t);var n=Ne()(a.state.arr);n[t].gateway=e,a.setState({arr:n})})),F()(R()(a),"changevlan",(function(e,t){console.log(e,t);var n=Ne()(a.state.arr);n[t].vlan=e,a.setState({arr:n})})),F()(R()(a),"onlocationChange",(function(e){console.log(e),a.setState({regionId:e})})),F()(R()(a),"onCategoryChange",(function(e){console.log(e);var t=e[e.length-1],n=a.state.regionId;X.a.get("".concat(BSS_ADMIN_URL,"/api/goods/bandwidth-type/getBandwidthType?regionId=").concat(n,"&categoryId=").concat(t)).then((function(e){e=e.data,console.log(e),Z.a.hasStatusOk(e)?a.setState({bandwidthType:e.data}):Z.a.dealFail(e),a.setState({loading:!1})})).catch((function(){a.setState({loading:!1})}))})),console.log(a.props),a.formRefEdit=U.a.createRef(),a.devideDetail=a.props.defaultData,a.state={showModal:!1,modalLoading:!1,uw:null,ubitInfo:{},regionInfo:{},cabinetInfo:{},devideDetail:{},locationCode:void 0,lists2:[],arr:[{ipAddr:"",availableSegment:"",netmask:"",gateway:"",vlan:"",ipType:2}],modalShow:!1},a}return C()(n,[{key:"componentDidMount",value:function(){this.props.areaResouse.fetchVarea(),this.onGetCategory()}},{key:"onGetCategory",value:function(){var e=this;X.a.get("".concat(BSS_ADMIN_URL,"/api/goods/category")).then((function(a){if(a=a.data,Z.a.hasStatusOk(a)){var t,n=a.data;t=Z.a.formatTree(n),e.setState({lists2:t})}else Z.a.dealFail(a);e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"IPModalShow",value:function(e){console.log(e),this.setState({ipmodalShow:!0,nowIndex:e})}},{key:"render",value:function(){var e=this,a=this.props.areaResouse.vareaList,t=ee.e.ip_source,n=ee.e.ip_customer_type,l=ee.e.show_type,r=ee.e.ip_type2,o=ee.e.boolean,s=this.state,i=s.lists2,c=s.ipmodalShow,d=s.bandwidthType;Ye({},this.props.defaultData,{purchasingTime:null==this.props.defaultData.purchasingTime?null:ue()(this.props.defaultData.purchasingTime),storagetime:null==this.props.defaultData.storagetime?null:ue()(this.props.defaultData.storagetime)});return U.a.createElement(U.a.Fragment,null,U.a.createElement(y.a,{name:"form_in_modal",ref:this.formRefEdit,className:"g-modal-field",onFinish:function(a){e.onFinish(a)}},U.a.createElement(te.a,null,U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(ea,ie()({name:"fullLocationName",label:"机房/区域",rules:[{required:!0,message:"请选择机房"}]},pe.a),U.a.createElement(q.a,{showSearch:!0,filterOption:Z.a.filterOption,allowClear:!0,onChange:this.onlocationChange},a.map((function(e){return U.a.createElement(ta,{value:e.regionId,key:e.regionId},e.fullLocationName)}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(ea,ie()({name:"businessType",rules:[{required:!0,message:"请选择所属业务"}],label:"所属业务"},pe.a),U.a.createElement(f.a,{options:i,fieldNames:{label:"name",value:"id",children:"children"},onChange:this.onCategoryChange}))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(ea,ie()({name:"bandwidthType",rules:[{required:!0,message:"请选择带宽类型"}],label:"带宽类型"},pe.a),U.a.createElement(q.a,null,de.a.map(d,(function(e,a){return U.a.createElement(ta,{value:e.id,key:a}," ",e.bandwidthName," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(ea,ie()({name:"source",rules:[{required:!0,message:"请选择ip来源"}],label:"IP来源"},pe.a),U.a.createElement(q.a,null,de.a.map(t,(function(e,a){return U.a.createElement(ta,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(y.a.Item,ie()({name:"appropriateTypes",rules:[{required:!0,message:"请选择适用客户类型"}]},pe.a,{label:"适用客户类型"}),U.a.createElement(q.a,null,de.a.map(n,(function(e,a){return U.a.createElement(ta,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(y.a.Item,ie()({name:"showType",rules:[{required:!0,message:"请选择显示方式"}]},pe.a,{label:"显示方式"}),U.a.createElement(q.a,{placeholder:" ",allowClear:!0},de.a.map(l,(function(e,a){return U.a.createElement(ta,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(y.a.Item,ie()({name:"isWall",rules:[{required:!0,message:"请选择是否过墙"}]},pe.a,{label:"是否过墙"}),U.a.createElement(q.a,{placeholder:" ",allowClear:!0},de.a.map(o,(function(e,a){return U.a.createElement(ta,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(y.a.Item,ie()({name:"isLock",rules:[{required:!0,message:"请选择是否锁定"}]},pe.a,{label:"是否锁定"}),U.a.createElement(q.a,{allowClear:!0},de.a.map(o,(function(e,a){return U.a.createElement(ta,{value:parseInt(a),key:a}," ",e," ")}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(ea,ie()({name:"isShare",rules:[{required:!0,message:"请选择是否共享"}],label:"是否共享"},pe.a),U.a.createElement(q.a,{allowClear:!0,placeholder:" "},de.a.map(o,(function(e,a){return U.a.createElement(ta,{value:parseInt(a),key:a},e)}))))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(ea,ie()({name:"purchasingTime",rules:[{required:!0,message:"请选择采购时间"}]},pe.a,{label:"采购时间"}),U.a.createElement(le.a,{style:{width:"100%"},placeholder:" "}))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:12,xl:12},U.a.createElement(ea,ie()({name:"storagetime",rules:[{required:!0,message:"请选择入库时间"}]},pe.a,{label:"入库时间"}),U.a.createElement(le.a,{style:{width:"100%"},placeholder:" "}))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:24,xl:24},U.a.createElement(ea,ie()({className:"ipType",label:U.a.createElement("span",{className:"required"}," ip信息"),rules:[{required:!0}]},pe.b),this.state.arr.map((function(a,t){return U.a.createElement("div",{className:"ipmsg",key:t,ref:"ipmsg"},U.a.createElement(y.a.Item,null,U.a.createElement(q.a,{defaultValue:a.ipType,allowClear:!0,style:{width:80},onChange:function(a){return e.selectitem(a,t)}},de.a.map(r,(function(e,a){return U.a.createElement(ta,{value:parseInt(a),key:a},e)})))),U.a.createElement(y.a.Item,null,U.a.createElement(p.a,{placeholder:"请输入IP地址",disabled:2==a.ipType,type:"text",value:a.ipAddr,onChange:function(a){e.changeipAddr(a.target.value,t)}})),U.a.createElement(y.a.Item,null,U.a.createElement(p.a,{placeholder:"请输入可用IP",type:"text",value:a.availableSegment,onChange:function(a){e.changeavailableSegment(a.target.value,t)}})),U.a.createElement(y.a.Item,null,U.a.createElement(p.a,{placeholder:"请输入掩码",type:"text",value:a.netmask,onChange:function(a){e.changenetmask(a.target.value,t)}})),U.a.createElement(y.a.Item,null,U.a.createElement(p.a,{placeholder:"请输入网关",type:"text",value:a.gateway,onChange:function(a){e.changegateway(a.target.value,t)}})),U.a.createElement(y.a.Item,null,U.a.createElement(p.a,{placeholder:"请输入vlan",type:"text",value:a.vlan,onChange:function(a){e.changevlan(a.target.value,t)}})),2==a.ipType&&U.a.createElement(m.a,{size:"middle",className:"ip_btn",onClick:function(){return e.IPModalShow(t)}},"生成IP信息"),0==t&&U.a.createElement(w.a,{placement:"top",title:"添加"},U.a.createElement(Fe,{className:"ip_iconadd",onClick:function(){e.createip(t)}})),t>0&&U.a.createElement(w.a,{placement:"top",title:"删除"},U.a.createElement(Ue,{className:"ip_iconremove",key:t,onClick:function(){e.deleteip(t)}})))})))),U.a.createElement(oe.a,{xs:24,sm:24,md:24,lg:24,xl:24},U.a.createElement(ea,ie()({label:"ip资源备注",name:"remark"},pe.b),U.a.createElement(aa,{autoSize:{minRows:5},placeholder:"请输入",maxLength:"240"})))),U.a.createElement("div",{className:"actions-btn"},U.a.createElement(m.a,{htmlType:"submit",className:"action-btn ok"},"确认提交"),U.a.createElement(m.a,{onClick:this.onResetSearch,className:"action-btn ok"},"重置"),U.a.createElement(m.a,{onClick:this.onClose,className:"action-btn ok"},"取消"))),U.a.createElement(V.a,{title:"生成IP段信息",maskClosable:!1,width:"50%",destroyOnClose:!0,footer:!1,onCancel:this.onModalClose,visible:c},U.a.createElement(He,{onClose:this.onModalClose,onOk:this.onipOk,index:this.state.nowIndex})),U.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(U.a.Component),F()(Ge,"propTypes",{location:K.a.any,areaResouse:K.a.any,id:K.a.string,ipresourceDict:K.a.any,that:K.a.any,root:K.a.any,onClose:K.a.func,onOK:K.a.func,defaultData:K.a.any}),Ke=We))||Ke)||Ke)||Ke)||Ke;function la(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function ra(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?la(Object(t),!0).forEach((function(a){F()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):la(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function oa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var sa=q.a.Option,ia=V.a.confirm,ca=Object(Q.b)("root")(Xe=Object(Q.b)("areaResouse")(Xe=Object(Q.b)("CategoryProduct")(Xe=Object(Q.b)("ipresourceDict")(Xe=Object(Q.c)(($e=Ze=function(e){T()(n,e);var a,t=(a=n,function(){var e,t=L()(a);if(oa()){var n=L()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return N()(this,e)});function n(e){var a;return S()(this,n),a=t.call(this,e),F()(R()(a),"searchFormRef",U.a.createRef()),F()(R()(a),"onResetSearch",(function(){a.categoryId="",a.searchFormRef.current.resetFields()})),F()(R()(a),"onModalShow",(function(e){console.log(e),a.setState({modalShow:!0,nowipId:e.id,nowData:e})})),F()(R()(a),"onModalClose",(function(){a.setState({modalShow:!1,ipWarehouse:!1})})),F()(R()(a),"onCategoryChange",(function(e){console.log(e),a.categoryId=e[e.length-1],console.log(a.categoryId)})),F()(R()(a),"ipResourcesLock",(function(){var e=a.state.selectedRowKeys,t=R()(a);if(e.length<1)return V.a.warning({title:"提示",content:"请选择至少一条数据！",destroyOnClose:!0}),!1;ia({title:"你确定要锁定吗？",icon:U.a.createElement(H.a,null),okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){t.Lock(e),t.setState({selectedRowKeys:[]})},onCancel:function(){console.log("Cancel")}})})),F()(R()(a),"ipResourcesUnlock",(function(){var e=a.state.selectedRowKeys,t=R()(a);if(e.length<1)return V.a.warning({title:"提示",content:"请选择至少一条数据！",destroyOnClose:!0}),!1;ia({title:"你确定要解锁吗？",icon:U.a.createElement(H.a,null),okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){t.Unlock(e),t.setState({selectedRowKeys:[]})},onCancel:function(){console.log("Cancel")}})})),F()(R()(a),"showDeleteConfirm",(function(){var e=a.state.selectedRowKeys,t=R()(a);if(e.length<1)return V.a.warning({title:"提示",content:"请选择至少一条数据！",destroyOnClose:!0}),!1;ia({title:"你确定要批量出库吗？",icon:U.a.createElement(H.a,null),okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){console.log("OK"),t.onDel(e),t.setState({selectedRowKeys:[]})},onCancel:function(){console.log("Cancel")}})})),F()(R()(a),"handleExport",(function(){var e=a.state.searchValue;null==e&&a.setState({loading:!0}),a.setState({loading:!0}),event.preventDefault(),W()({method:"post",url:"".concat(BSS_ADMIN_URL,"/api/product/ipSegment/export"),responseType:"blob",headers:{Authorization:"token "+$.a.getToken()},data:e}).then((function(e){var t=document.createElement("a"),n=new Blob([e.data],{type:"application/octet-stream"}),l=decodeURI(e.headers.filename);console.log(l),t.style.display="none",t.href=URL.createObjectURL(n),t.setAttribute("download",l),document.body.appendChild(t),t.click(),document.body.removeChild(t),a.setState({loading:!1}),Z.a.auto_close_result("ok","操作成功")})).catch((function(e){Z.a.dealFail(res),a.setState({loading:!1}),console.log(e)}))})),F()(R()(a),"ipWarehousing",(function(){a.setState({ipWarehouse:!0})})),console.log(a.props),a.selectedRow={length:0,keys:[],rows:[]},a.hardSearch={},a.searchParam={},a.locationId=void 0,a.state={searchParam:{},lists:[],loading:!1,page:1,pageSize:20,total:0,modalLoading:!1,nowData:{},modalShow:!1,nowipId:void 0,expandedRowKeys:[],selectedRowKeys:[],regionInfo:{},download:"",ipWarehouse:!1},a}return C()(n,[{key:"componentDidMount",value:function(){this.props.areaResouse.houseList.length<=0&&this.props.areaResouse.fetchHouse(),this.props.ipresourceDict.fetchbandwidthType(),this.onGetListData(),this.props.CategoryProduct.fetchCategory()}},{key:"onSelectHouse",value:function(e,a){this.onGetListData(a)}},{key:"onSearchfrom",value:function(e){console.log(e),e.businessType=this.categoryId;var a=e.ipAddr;null!=e.ipAddr&&(-1!=a.indexOf("[")?e.ipAddr="%5D":-1!=a.indexOf("[")&&(e.ipAddr="%5B")),console.log(e),this.searchParam=e,this.setState({searchValue:e}),this.onGetListData(e)}},{key:"onGetListData",value:function(e){var a=this;e=e||this.state.regionInfo;var t=_.assign({},{page:1},this.searchParam,ra({},e));this.setState({loading:!0}),X.a.get("".concat(BSS_ADMIN_URL,"/api/product/ipSegment"),{params:t}).then((function(e){e=e.data,Z.a.hasStatusOk(e)?a.setState({lists:e.data.records,total:e.data.total,page:e.data.current,selectedRowKeys:[],selectedRows:[]}):Z.a.dealFail(e),a.setState({loading:!1})})).catch((function(){a.setState({loading:!1})}))}},{key:"onSelectedRow",value:function(e,a){this.selectedRows=a,this.setState({selectedRowKeys:e})}},{key:"onPageChange",value:function(e,a){this.setState({page:e}),this.onGetListData({page:e,pageSize:a})}},{key:"onPageSizeChange",value:function(e,a){this.setState({page:e,pageSize:a}),this.onGetListData({page:e,pageSize:a})}},{key:"onModalOk",value:function(e){var a=this.that;a.setState({loading:!0,modalLoading:!0});var t=Z.a.clearNull(ra({id:this.id},e));X.a.put("".concat(BSS_ADMIN_URL,"/api/product/ipSegment/").concat(this.id,"/update"),t).then((function(e){e=e.data,Z.a.hasStatusOk(e)?(Z.a.auto_close_result("ok","操作成功"),a.setState({page:1,modalLoading:!1,modalShow:!1}),a.onGetListData({page:1})):Z.a.dealFail(e),a.setState({modalLoading:!1,loading:!1})})).catch((function(){a.setState({modalLoading:!1,loading:!1})}))}},{key:"makeColumns",value:function(){var e=this,a=ee.e.show_type,t=ee.e.boolean;return[{title:"机房/区域",dataIndex:"fullLocationName",key:"fullLocationName"},{title:"IP段信息",dataIndex:"ipAddr",key:"ipAddr"},{title:"网关",dataIndex:"gateway",key:"gateway"},{title:"掩码",dataIndex:"netmask",key:"netmask"},{title:"可用地址段",dataIndex:"availableSegment",key:"availableSegment"},{title:"带宽类型",dataIndex:"bandwidthTypeName",key:"bandwidthTypeName"},{title:"所属业务",dataIndex:"businessTypeName",key:"businessTypeName"},{title:"显示方式",dataIndex:"showType",key:"showType",render:function(e,t){return a[e]}},{title:"锁定状态",dataIndex:"isLock",key:"isLock",render:function(e,a){return t[e]}},{title:"备注",dataIndex:"remark",key:"remark"},{title:"操作",key:"control",fixed:"right",width:120,render:function(a,t){var n=[];e.props.root.userinfo,e.props.root.powers;n.push(U.a.createElement("span",{key:"0",className:"control-btn green"},$.a.hasPermission("ipSegment-view")&&U.a.createElement(Te,{deviceId:t.id},U.a.createElement(w.a,{placement:"top",title:"查看"},U.a.createElement(J.a,null))))),n.push(U.a.createElement("span",{key:"1",className:"control-btn blue"},$.a.hasPermission("ipSegment-update")&&U.a.createElement(w.a,{placement:"top",title:"修改"},U.a.createElement(Y.a,{onClick:function(){e.onModalShow(t)}}))));var l=[];return n.forEach((function(e,a){a&&l.push(U.a.createElement(b.a,{key:"line".concat(a),type:"vertical"})),l.push(e)})),l}}]}},{key:"Lock",value:function(e){var a=this;if("string"==typeof e){var t=[];t.push(e);var n={id:t}}else n={id:e};this.setState({loading:!0});var l=JSON.stringify(n);X.a.delete("".concat(BSS_ADMIN_URL,"/api/product/ipSegment/lock"),{data:l}).then((function(e){2e4===(e=e.data).code?(a.setState({loading:!1}),a.onGetListData(),Z.a.auto_close_result("ok","操作成功")):(Z.a.dealFail(e),a.setState({loading:!1}))})).catch((function(){a.setState({loading:!1})}))}},{key:"Unlock",value:function(e){var a=this;if("string"==typeof e){var t=[];t.push(e);var n={id:t}}else n={id:e};this.setState({loading:!0});var l=JSON.stringify(n);X.a.delete("".concat(BSS_ADMIN_URL,"/api/product/ipSegment/unlock"),{data:l}).then((function(e){2e4===(e=e.data).code?(a.setState({loading:!1}),a.onGetListData(),Z.a.auto_close_result("ok","操作成功")):(Z.a.dealFail(e),a.setState({loading:!1}))})).catch((function(){a.setState({loading:!1})}))}},{key:"onDel",value:function(e){var a=this;if("string"==typeof e){var t=[];t.push(e);var n={id:t}}else n={id:e};this.setState({loading:!0});var l=JSON.stringify(n);X.a.delete("".concat(BSS_ADMIN_URL,"/api/product/ipSegment/delete"),{data:l}).then((function(e){2e4===(e=e.data).code?(a.setState({loading:!1}),a.onGetListData(),Z.a.auto_close_result("ok","操作成功")):(Z.a.dealFail(e),a.setState({loading:!1}))})).catch((function(){a.setState({loading:!1})}))}},{key:"ipWarehouseOK",value:function(e){console.log(e);var a=this.that;a.setState({loading:!0,modalLoading:!0});var t=Z.a.clearNull(ra({},e));X.a.post("".concat(BSS_ADMIN_URL,"/api/product/ipSegment/add"),t).then((function(e){e=e.data,console.log(e),Z.a.hasStatusOk(e)?(Z.a.auto_close_result("ok","操作成功"),a.setState({page:1,modalLoading:!1,modalShow:!1,ipWarehouse:!1}),a.onGetListData({page:1})):Z.a.dealFail(e),a.setState({modalLoading:!1,loading:!1})})).catch((function(){a.setState({modalLoading:!1,loading:!1})}))}},{key:"render",value:function(){var e=this,a=this.props.areaResouse.houseList,t=this.props.ipresourceDict.bandwidthType,n=ee.e.ip_source,l=ee.e.boolean,r=this.state,o=r.lists,i=r.loading,d=r.page,u=r.pageSize,h=r.total,g=r.nowipId,E=r.modalShow,b=r.ipWarehouse,v=r.nowData,w=r.selectedRowKeys;return U.a.createElement("main",{className:"mian"},U.a.createElement("div",{className:"g-search"},U.a.createElement(y.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(a){e.onSearchfrom(a)}},U.a.createElement(y.a.Item,{name:"houseId"},U.a.createElement(q.a,{allowClear:!0,placeholder:"请选择机房",showSearch:!0,filterOption:Z.a.filterOption,style:{width:200}},a.map((function(e){return U.a.createElement(sa,{value:e.id,key:e.id},e.fullName)})))),U.a.createElement(y.a.Item,{name:"businessType"},U.a.createElement(f.a,{options:this.props.CategoryProduct.categoryTreeList,placeholder:"请选择所属业务",fieldNames:{label:"name",value:"id",children:"children"},style:{width:300},onChange:this.onCategoryChange})),U.a.createElement(y.a.Item,{name:"bandwidthType"},U.a.createElement(q.a,{placeholder:"请选择带宽类型",allowClear:!0,style:{width:170}},_.map(t,(function(e,a){return U.a.createElement(sa,{value:a,key:a},e)})))),U.a.createElement(y.a.Item,{name:"source"},U.a.createElement(q.a,{placeholder:"请选择IP来源",allowClear:!0,style:{width:170}},_.map(n,(function(e,a){return U.a.createElement(sa,{value:parseInt(a),key:a},e)})))),U.a.createElement(y.a.Item,{name:"ipAddr"},U.a.createElement(p.a,{placeholder:"请输入ip段信息",maxLength:"30",allowClear:!0})),U.a.createElement(y.a.Item,{name:"isLock"},U.a.createElement(q.a,{placeholder:"请选择锁定状态",allowClear:!0,style:{width:170}},_.map(l,(function(e,a){return U.a.createElement(sa,{value:parseInt(a),key:a},e)})))),U.a.createElement(y.a.Item,{shouldUpdate:!0},U.a.createElement(m.a,{type:"primary",htmlType:"submit"},"查询")),U.a.createElement(y.a.Item,{shouldUpdate:!0},U.a.createElement(m.a,{type:"primary",onClick:this.onResetSearch},"重置")))),U.a.createElement("div",{className:"g-operate"},U.a.createElement(m.a,{size:"middle",className:"actions-btn",onClick:this.ipWarehousing},"入库"),$.a.hasPermission("ipSegment-lock")&&U.a.createElement(m.a,{size:"middle",className:"actions-btn",onClick:this.ipResourcesLock},"锁定"),$.a.hasPermission("ipSegment-unlock")&&U.a.createElement(m.a,{size:"middle",className:"actions-btn",onClick:this.ipResourcesUnlock},"解锁"),$.a.hasPermission("ipSegment-delete")&&U.a.createElement(m.a,{size:"middle",className:"actions-btn",onClick:this.showDeleteConfirm},"批量出库"),$.a.hasPermission("ipSegment-export")&&U.a.createElement(m.a,{size:"middle",className:"actions-btn",onClick:this.handleExport},"导出")),U.a.createElement("div",{className:"g-table"},U.a.createElement(c.a,{scroll:{x:1600},columns:this.makeColumns(),rowKey:function(e){return e.id},loading:i,dataSource:o,pagination:!1,rowSelection:{type:"checkbox",selectedRowKeys:w,onChange:function(a,t){e.onSelectedRow(a,t)}}}),U.a.createElement("div",{className:"g-pagination"},U.a.createElement(s.a,{current:d,total:h,pageSize:u,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(a,t){e.onPageChange(a,t)},onShowSizeChange:function(a,t){e.onPageSizeChange(a,t)}}))),U.a.createElement(V.a,{title:"ip资源编辑",maskClosable:!1,width:"80%",destroyOnClose:!0,footer:null,onCancel:this.onModalClose,visible:E},U.a.createElement(Se,{that:this,onOk:this.onModalOk,onClose:this.onModalClose,defaultData:v,id:g})),U.a.createElement(V.a,{title:"ip资源入库",maskClosable:!1,width:"80%",destroyOnClose:!0,footer:null,onCancel:this.onModalClose,visible:b},U.a.createElement(na,{that:this,onOk:this.ipWarehouseOK,onClose:this.onModalClose,defaultData:v,id:g})))}}]),n}(U.a.Component),F()(Ze,"propTypes",{location:K.a.any,areaResouse:K.a.any,CategoryProduct:K.a.any,ipresourceDict:K.a.any,root:K.a.any,userinfo:K.a.any,powers:K.a.array}),Xe=$e))||Xe)||Xe)||Xe)||Xe)||Xe},1596:function(e,a,t){"use strict";var n=t(0),l={name:"eye",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]}},r=t(69),o=function(e,a){return n.createElement(r.a,Object.assign({},e,{ref:a,icon:l}))};o.displayName="EyeOutlined";a.a=n.forwardRef(o)},1799:function(e,a,t){},1800:function(e,a,t){}}]);