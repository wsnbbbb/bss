(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1548:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return To}));a(172);var n,r,o,i,s,l=a(105),c=a.n(l),u=a(33),d=a.n(u),m=(a(152),a(78)),p=a.n(m),h=(a(47),a(17)),f=a.n(h),y=(a(60),a(12)),v=a.n(y),g=(a(254),a(116)),S=a.n(g),k=(a(173),a(84)),E=a.n(k),w=a(15),b=a.n(w),I=a(19),C=a.n(I),R=a(6),D=a.n(R),O=a(20),x=a.n(O),N=a(21),P=a.n(N),M=a(13),j=a.n(M),L=a(2),T=a.n(L),_=(a(58),a(11)),z=a.n(_),F=(a(98),a(55)),U=a.n(F),A=(a(65),a(25)),B=a.n(A),q=a(0),G=a.n(q),V=a(1),K=a.n(V),W=a(5),H=a.n(W),Z=a(1596),J=a(1592),Q=a(1589),X=a(1591),Y=a(23),$=a(18),ee=a(9),te=a(26),ae=a(28),ne=a(1643),re=(a(171),a(89)),oe=a.n(re),ie=(a(724),a(417)),se=a.n(ie),le=(a(194),a(106)),ce=a.n(le),ue=(a(193),a(75)),de=a.n(ue),me=a(153),pe=(a(416),a(192)),he=a.n(pe),fe=a(99),ye=a(1601),ve=a(1622),ge=a(1623);function Se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.a.Item,U.a.TextArea,z.a.Option,he.a.TreeNode;var ke,Ee,we,be=(n=Object(Y.b)("root"),r=Object(Y.b)("cabinetDict"),Object(fe.g)(o=n(o=r(o=Object(Y.c)((s=i=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(Se()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefAdd",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.formRefAdd.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),T()(D()(t),"mergeCells2",(function(e,a,n){var r=t.state.lists;if(0!==n&&e===r[n-1][a])return 0;for(var o=1,i=n+1;i<r.length&&e===r[i][a];i++)o++;return o})),t.selectedRows=[],t.cabinetInfo={},t.regionInfo={},t.state={nowData:{},lists:[],loading:!1,showModal:!1,regionId:"",cabinetId:"",uw:void 0},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setState({loading:!0}),$.a.get("".concat(BSS_ADMIN_URL,"/api/product/cabinet/").concat(e,"/get")).then((function(e){if(e=e.data,ee.a.hasStatusOk(e)){var a=e.data.ulocationList;t.uList=a,t.setState({nowData:e.data,loading:!1,lists:a})}else ee.a.dealFail(e),t.setState({loading:!1})})).catch((function(){t.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){var a=this.props.uw,n=this.uList.length,r=t[0].uw;if(n<r+a-1)return B.a.error({title:"大于总U位数,请从新选择起始U位!"}),!1;for(var o=n-r,i=n-a-r+1,s=H.a.slice(this.uList,i,o+1),l=0;l<a;l++)if("1"!=s[l].status)return B.a.error({title:"U位被占用或大于总U位数,请从新选择起始U位!"}),!1;this.selectedRows=t,this.props.onSelect({regionId:this.state.regionId,regionInfo:this.regionInfo,cabinetInfo:this.cabinetInfo,uBitInfo:t[0]}),this.setState({showModal:!1})}},{key:"getRegion",value:function(e,t){e?(this.regionInfo=t,this.cabinetInfo={},this.setState({lists:[],regionId:t.regionId,cabinetId:void 0})):(this.regionInfo={},this.cabinetInfo={},this.setState({lists:[],regionId:void 0,cabinetId:void 0}))}},{key:"getCabinet",value:function(e,t){this.cabinetInfo=t[0],this.setState({cabinetId:e}),this.getDetail(e)}},{key:"modalShow",value:function(){if(!this.props.uw)return B.a.error({title:"请输入U位数"}),!1;this.props.uw!==this.state.uw?(this.selectedRows=[],this.regionInfo={},this.cabinetInfo={},this.setState({nowData:{},lists:[],regionId:void 0,cabinetId:void 0,uw:this.props.uw,showModal:!0})):this.setState({showModal:!0})}},{key:"makeColumns",value:function(){var e=this;this.state.lists.length;return[{title:"u位",dataIndex:"uw",width:80,key:"uw"},{title:"管理ip",dataIndex:"managerIp",width:150,key:"managerIp",render:function(t,a,n){if(a.deviceId){var r={children:null!==t?t:"",props:{}};return r.props.rowSpan=e.mergeCells2(a.deviceId,"deviceId",n),e.rowSpan=r.props.rowSpan,r}return{children:null!==t?t:"",rowSpan:0}}},{title:"设备",dataIndex:"deviceName",key:"deviceName",render:function(t,a,n){if(t=null!==t?t:"",a.deviceId){var r={children:t,props:{}};return r.props.rowSpan=e.rowSpan,r}return{children:t,rowSpan:0}}},{title:"预约客户",dataIndex:"customerName",key:"customerName",render:function(t,a,n){if(a.deviceId){var r={children:t,props:{}};return r.props.rowSpan=e.rowSpan,r}if(a.customerName){var o={children:t,props:{}};return o.props.rowSpan=e.mergeCells2(a.customerName,"customerName",n),e.rowSpan=o.props.rowSpan,o}return{children:t,rowSpan:0}}},{title:"使用状态",dataIndex:"status",width:100,key:"status",render:function(t,a,n){var r=parseInt(t);if(a.deviceId){var o={children:ee.a.renderStatus(te.a.uw_status,r),props:{}};return o.props.rowSpan=e.rowSpan,o}if(a.customerName){var i={children:ee.a.renderStatus(te.a.uw_status,r),props:{}};return i.props.rowSpan=e.mergeCells2(a.customerName,"customerName",n),e.rowSpan=i.props.rowSpan,i}return{children:ee.a.renderStatus(te.a.uw_status,r),rowSpan:0}}},{title:"出库记录",key:"control",fixed:"right",width:160,render:function(e,t){var a=[];a.push(G.a.createElement(ye.a,{uLocationId:t.id}));var n=[];return a.forEach((function(e,t){t&&n.push(G.a.createElement(S.a,{key:"line".concat(t),type:"vertical"})),n.push(e)})),n}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:this.props.title||"选择U位",maskClosable:!1,width:"95%",destroyOnClose:!0,footer:null,onCancel:this.onClose,visible:n},G.a.createElement("main",{className:"mian"},G.a.createElement("div",{className:"g-search"},G.a.createElement(ve.a,{defaultKey:this.regionInfo&&this.regionInfo.fullLocationId,onSearch:function(t,a){e.getRegion(t,a)}}),G.a.createElement("div",{style:{display:"inline-block",width:200,marginLeft:10}},G.a.createElement(ge.a,{title:"选择机柜",disabled:!this.state.regionId&&this.props.uw,disabledTip:"请先选择区域",fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/cabinet/choose?us=").concat(this.props.uw,"&regionId=").concat(this.state.regionId),onSelect:function(t,a){e.getCabinet(t,a)}},G.a.createElement(U.a,{placeholder:"选择机柜",value:this.cabinetInfo.name})))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,size:"small",rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)},getCheckboxProps:function(e){return{disabled:1!=e.status,status:e.status}}}})))),G.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(G.a.Component),T()(i,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,cabinetDict:K.a.any,powers:K.a.array,defaultData:K.a.any,onOk:K.a.func,onClose:K.a.func}),o=s))||o)||o)||o)||o),Ie=(a(3),a(1644));function Ce(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Re,De,Oe,xe,Ne,Pe=Object(fe.g)((we=Ee=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(Ce()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefAdd",G.a.createRef()),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectAreaNode={},t.selectedRows=[],t.regionId="",t.uw=0,t.state={nwoData:{},orgionLists:[],lists:[],loading:!1,showModal:!1,cabinetName:""},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({loading:!0}),$.a.get("".concat(this.props.fetchPath),{params:t}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data,orgionLists:t.data}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t),this.setState({showModal:!1,cabinetName:t[0].name})}},{key:"modalShow",value:function(){this.props.disabled?B.a.warning({title:this.props.disabledTip}):(this.getDetail(),this.setState({showModal:!0}))}},{key:"makeColumns",value:function(){return[{title:"外机名称",dataIndex:"nodeServerName",key:"nodeServerName"},{title:"位置码",dataIndex:"physicsLocationCode",key:"physicsLocationCode"},{title:"节点数",dataIndex:"nodeNum",key:"nodeNum"},{title:"剩余节点数",dataIndex:"nodeRemain",key:"nodeRemain"},{title:"总U位数",dataIndex:"us",key:"us"},{title:"资源备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.props,a=(t.title,t.uw,t.regionId,this.state),n=a.lists,r=a.showModal,o=a.loading;return G.a.createElement("main",{className:"mian"},G.a.createElement(B.a,{title:this.props.title||"选择外机",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onOk:this.onModalOk,onCancel:this.onClose,visible:r},G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:o,dataSource:n,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}}))),G.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(G.a.Component),T()(Ee,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,children:K.a.any,portDict:K.a.any,disabled:K.a.bool,allowClear:K.a.bool,disabledTip:K.a.string,title:K.a.string,style:K.a.any,fetchPath:K.a.string,defaultData:K.a.any,onSelect:K.a.func}),ke=we))||ke;function Me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.a.Item,U.a.TextArea,z.a.Option,he.a.TreeNode;var je,Le,Te,_e,ze,Fe=(Re=Object(Y.b)("root"),De=Object(Y.b)("cabinetDict"),Object(fe.g)(Oe=Re(Oe=De(Oe=Object(Y.c)((Ne=xe=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(Me()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefAdd",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.formRefAdd.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectedRows=[],t.cabinetInfo={},t.masterInfo={},t.regionInfo={},t.state={us:t.props.us,lists:[],loading:!1,showModal:!1,regionId:void 0,cabinetId:void 0,masterId:void 0},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setState({loading:!0}),$.a.get("".concat(BSS_ADMIN_URL,"/api/product/nodeserver/detail?nodeMasterId=").concat(this.masterInfo.id)).then((function(e){e=e.data,ee.a.hasStatusOk(e)?t.setState({lists:e.data,loading:!1}):(ee.a.dealFail(e),t.setState({loading:!1}))})).catch((function(){t.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect({regionId:this.regionId,regionInfo:this.regionInfo,cabinetInfo:this.cabinetInfo,masterInfo:this.masterInfo,nodeInfo:t[0]}),this.setState({showModal:!1})}},{key:"getRegion",value:function(e,t){this.regionInfo=t,this.selectedRows=[],this.cabinetInfo={},this.masterInfo={},this.setState({regionId:t.regionId,lists:[],cabinetId:void 0,masterId:void 0})}},{key:"getCabinet",value:function(e,t){this.cabinetInfo=t[0],this.selectedRows=[],this.masterInfo={},this.setState({lists:[],cabinetId:e,masterId:void 0})}},{key:"getOutMachine",value:function(e,t){this.masterInfo=t[0],this.setState({masterId:e,lists:[]}),this.getDetail(e)}},{key:"modalShow",value:function(){if(!this.props.us)return B.a.error({title:"请输入节点数"}),!1;this.props.us!=this.state.us?(this.selectedRows=[],this.cabinetInfo={},this.masterInfo={},this.regionInfo={},this.setState({nowData:{},lists:[],loading:!1,showModal:!0,regionId:void 0,cabinetId:void 0,masterId:void 0})):this.setState({showModal:!0})}},{key:"makeColumns",value:function(){return[{title:"节点编号",dataIndex:"node",key:"node"},{title:"管理IP",dataIndex:"serverIp",key:"serverIp"},{title:"设备名称",dataIndex:"serverName",key:"serverName"},{title:"是否占用",dataIndex:"isOccupy",key:"isOccupy",render:function(e){return ee.a.renderStatus(te.g.machine_node_state,e)}},{title:"销售状态",dataIndex:"status",key:"status",render:function(e){return ee.a.renderStatus(te.j.market,e)}},{title:"备注",dataIndex:"remark",key:"remark"},{title:"出库信息",dataIndex:"id",key:"id",render:function(e,t){return G.a.createElement(Ie.a,{nodeMasterId:t.id})}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:this.props.title||"选择节点",maskClosable:!1,width:"95%",destroyOnClose:!0,footer:null,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(ve.a,{defaultKey:this.regionInfo.fullLocationId,onSearch:function(t,a){e.getRegion(t,a)}}),G.a.createElement("div",{style:{display:"inline-block",width:200,marginLeft:10}},G.a.createElement(ge.a,{title:"选择机柜",allowClear:!0,disabledTip:"请先选择地区！",disabled:!this.state.regionId,fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/cabinet/choose?regionId=").concat(this.state.regionId,"&us=").concat(this.props.us,"&type=offServer"),onSelect:function(t,a){e.getCabinet(t,a)}},G.a.createElement(U.a,{placeholder:"选择机柜",value:this.cabinetInfo.name}))),G.a.createElement("div",{style:{display:"inline-block",width:200,marginLeft:10}},G.a.createElement(Pe,{title:"选择外机",disabledTip:"请先选择机柜！",disabled:!this.cabinetInfo.id,fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/nodeserver/master/choose?locationId=").concat(this.regionInfo.fullLocationId,"&cabinetId=").concat(this.cabinetInfo.id),onSelect:function(t,a){e.getOutMachine(t,a)}},G.a.createElement(U.a,{placeholder:"选择外机",value:this.masterInfo.nodeServerName,style:{width:300}})))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,size:"small",rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)},getCheckboxProps:function(e){return{disabled:1==e.isOccupy,isOccupy:e.isOccupy}}}}))),G.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(G.a.Component),T()(xe,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,children:K.a.any,title:K.a.string,us:K.a.number,powers:K.a.array,defaultData:K.a.any,onOk:K.a.func,onClose:K.a.func}),Oe=Ne))||Oe)||Oe)||Oe)||Oe),Ue=a(1586);a(1599);function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function qe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.a.Item,U.a.TextArea,z.a.Option,he.a.TreeNode;var Ge,Ve,Ke,We,He=(je=Object(Y.b)("root"),Le=Object(Y.b)("portDict"),Object(fe.g)(Te=je(Te=Le((ze=_e=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(qe()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefAdd",G.a.createRef()),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),T()(D()(t),"clear",(function(){t.selectedRows=[],t.props.onSelect(void 0,{})})),t.selectedRows=[],t.searchParam={},t.state={lists:[],page:1,pageSize:10,loading:!1,showModal:!1},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"onGetListData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Be({},this.searchParam,{},t);this.setState({loading:!0}),$.a.get("".concat(this.props.fetchPath),{params:a}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data.records,total:t.data.total}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t[0]),this.setState({showModal:!1})}},{key:"onSearch",value:function(e){this.searchParam=e,this.setState({page:1}),this.onGetListData(e)}},{key:"modalShow",value:function(){this.props.disabled?B.a.warning({title:this.props.disabledTip}):(this.onGetListData(),this.setState({showModal:!0}))}},{key:"makeColumns",value:function(){return[{title:"业务类型名称",dataIndex:"name",key:"name"}]}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.onGetListData({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.onGetListData({page:e,pageSize:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading,o=(t.portName,t.page),i=t.pageSize,s=t.total;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:this.props.title||"选择业务类型",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"name"},G.a.createElement(U.a,{placeholder:"业务类型名称",allowClear:!0})),G.a.createElement(v.a.Item,null,G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}})),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:o,total:s,pageSize:i,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))),G.a.createElement("span",{className:"inner-input",onClick:function(){e.modalShow()},style:this.props.style||{}},this.props.children),this.props.allowClear&&G.a.createElement("span",{className:"clearBtn",onClick:function(){e.clear()}},G.a.createElement(Ue.a,null)))}}]),n}(G.a.Component),T()(_e,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,children:K.a.any,portDict:K.a.any,disabled:K.a.bool,allowClear:K.a.bool,disabledTip:K.a.string,title:K.a.string,style:K.a.any,fetchPath:K.a.string,powers:K.a.array,onSelect:K.a.func}),Te=ze))||Te)||Te)||Te);function Ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ze(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Qe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.a.Item,U.a.TextArea,z.a.Option,he.a.TreeNode;var Xe,Ye,$e,et,tt=(Ge=Object(Y.b)("root"),Object(fe.g)(Ve=Ge((We=Ke=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(Qe()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"searchFormRef",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.searchFormRef.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectedRows=[],t.searchParam={},t.state={lists:[],page:1,pageSize:10,loading:!1,showModal:!1},t}return C()(n,[{key:"componentDidMount",value:function(){this.getDetail()}},{key:"componentWillReceiveProps",value:function(e){}},{key:"onSearch",value:function(e){this.searchParam=e,this.setState({page:1}),this.getDetail(e)}},{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({loading:!0}),$.a.get("".concat(BSS_ADMIN_URL,"/api/product/cpumodel"),{params:t}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data.records,orgionLists:t.data.records,total:t.data.total}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t[0]),this.setState({showModal:!1,cpuName:t[0].cpuName})}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.getDetail(Je({page:e,pageSize:t},this.searchParam))}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.getDetail(Je({page:e,pageSize:t},this.searchParam))}},{key:"modalShow",value:function(){this.setState({showModal:!0})}},{key:"makeColumns",value:function(){return[{title:"CPU型号名称",dataIndex:"cpuName",key:"cpuName"},{title:"产品组",dataIndex:"productMapId",key:"productMapId"},{title:"CPU个数",dataIndex:"cpuNumber",key:"cpuNumber"},{title:"品牌",dataIndex:"cpuBrand",key:"cpuBrand"},{title:"型号",dataIndex:"cpuModel",key:"cpuModel"},{title:"主频(GHZ)",dataIndex:"cpuHz",key:"cpuHz"},{title:"核心数",dataIndex:"cpuCore",key:"cpuCore"},{title:"线程数",dataIndex:"cpuThread",key:"cpuThread"},{title:"接口类型",dataIndex:"interfaceType",key:"interfaceType"},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;t.cpuName;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:"选择cpu型号",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"cpuName"},G.a.createElement(U.a,{placeholder:"cpu型号名称",allowClear:!0})),G.a.createElement(v.a.Item,null,G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索"),G.a.createElement(f.a,{type:"primary",onClick:this.onResetSearch},"重置")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}})),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:this.state.page,total:this.state.total,pageSize:this.state.pageSize,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))),G.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(G.a.Component),T()(Ke,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,children:K.a.any,powers:K.a.array,onSelect:K.a.func}),Ve=We))||Ve)||Ve);function at(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var nt,rt,ot,it,st=v.a.Item,lt=(Xe=Object(Y.b)("root"),Object(fe.g)(Ye=Xe((et=$e=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(at()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;b()(this,n),t=a.call(this,e),T()(D()(t),"formRefSetCpu",G.a.createRef()),T()(D()(t),"resetNum",(function(e){var a=t.state.lists.length,n=H.a.cloneDeep(t.state.lists);if(e!=a){if(a>e)n.splice(e,a-e);else for(var r=a+1;r<=e;r++)n.push({index:r,id:void 0,info:{}});t.setState({lists:n}),console.log(n)}})),T()(D()(t),"cancel",(function(e,a){var n=H.a.cloneDeep(t.state.lists);n.splice(e,1,{index:a.index,id:null,info:{}}),t.setState({lists:n}),t.props.setSolts(n)}));var r=[];if(t.props.defultSolts)for(var o=0;o<t.props.defultSolts;o++)r.push({index:o+1,id:void 0,info:{}});return t.state={lists:r},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"onSelect",value:function(e,t,a){var n=H.a.cloneDeep(this.state.lists);n.splice(a-1,1,{index:a,id:t.id,info:t}),this.setState({lists:n}),this.props.setSolts(n)}},{key:"render",value:function(){var e=this;return G.a.createElement(G.a.Fragment,null,G.a.createElement(oe.a,null,G.a.createElement(st,{name:"serverCpuSlot",label:"CPU数量",maxLength:2,rules:[{required:!0,pattern:me.a.num,message:"请输入数字"}]},G.a.createElement(ce.a,{onChange:this.resetNum}))),H.a.map(this.state.lists,(function(t,a){return G.a.createElement("li",{className:"my-column",key:t.index},G.a.createElement("span",{className:"column-label required"},"插槽",t.index,":"),G.a.createElement(U.a,{value:t.info.cpuName,style:{width:500},disabled:!0}),G.a.createElement(tt,{onSelect:function(a,n){e.onSelect(a,n,t.index)}},t.info.id&&G.a.createElement(f.a,null,"替换"),!t.info.id&&G.a.createElement(f.a,null,"添加")),G.a.createElement(f.a,{onClick:function(){e.cancel(a,t)},style:{marginLeft:10}},"取消"))})))}}]),n}(G.a.Component),T()($e,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,powers:K.a.array,defultSolts:K.a.any,setSolts:K.a.func}),Ye=et))||Ye)||Ye);function ct(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ut(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ct(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function dt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.a.Item,U.a.TextArea;var mt,pt,ht,ft,yt=z.a.Option,vt=(he.a.TreeNode,nt=Object(Y.b)("root"),Object(fe.g)(rt=nt((it=ot=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(dt()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefSearch",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.formRefSearch.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectedRows=[],t.searchParam={},t.state={lists:[],page:1,pageSize:10,loading:!1,showModal:!1},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=H.a.assign({},{page:this.state.page,pageSize:this.state.pageSize},this.searchParam,ut({},t));this.setState({loading:!0}),$.a.get(this.props.fetchPath,{params:a}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data.records,total:t.data.total}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t[0]),this.setState({showModal:!1})}},{key:"onSearch",value:function(e){this.searchParam=e,this.setState({page:1}),this.getDetail(e)}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.getDetail({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.getDetail({page:e,pageSize:t})}},{key:"modalShow",value:function(){this.getDetail(),this.setState({showModal:!0})}},{key:"makeColumns",value:function(){return[{title:"内存型号名称",dataIndex:"memName",key:"memName"},{title:"产品组",dataIndex:"productMapId",key:"productMapId"},{title:"内存容量(GB)",dataIndex:"memSize",key:"memSize"},{title:"内存主频(MHZ)",dataIndex:"memHz",key:"memHz"},{title:"内存品牌",dataIndex:"memBrand",key:"memBrand"},{title:"内存型号",dataIndex:"memModel",key:"memModel"},{title:"内存规格",dataIndex:"memSpec",key:"memSpec",render:function(e,t){return te.k.mem_spec[e]||""}},{title:"内存类型",dataIndex:"memType",key:"memType",render:function(e,t){return te.k.memory_type[e]||""}},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:"选择内存卡型号",maskClosable:!1,width:"98%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"memType"},G.a.createElement(z.a,{style:{width:240},allowClear:!0,placeholder:"请选择内存类型"},H.a.map(te.k.memory_type,(function(e,t){return G.a.createElement(yt,{value:t,key:t},e)})))),G.a.createElement(v.a.Item,{name:"memSize"},G.a.createElement(U.a,{placeholder:"请输入内存容量",allowClear:!0})),G.a.createElement(v.a.Item,{name:"memBrand"},G.a.createElement(U.a,{allowClear:!0,placeholder:"请输入内存品牌"})),G.a.createElement(v.a.Item,{name:"memSpec"},G.a.createElement(z.a,{style:{width:240},allowClear:!0,placeholder:"请选择内存规格"},H.a.map(te.k.mem_spec,(function(e,t){return G.a.createElement(yt,{value:t,key:t},e)})))),G.a.createElement(v.a.Item,{shouldUpdate:!0},G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索"),G.a.createElement(f.a,{type:"primary",onClick:this.onResetSearch},"重置")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}})),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:this.state.page,total:this.state.total,pageSize:this.state.pageSize,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))),G.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(G.a.Component),T()(ot,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,children:K.a.any,powers:K.a.array,onSelect:K.a.func,fetchPath:K.a.func}),rt=it))||rt)||rt);function gt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var St,kt,Et,wt=v.a.Item,bt=z.a.Option,It=(mt=Object(Y.b)("serverPartDict"),Object(fe.g)(pt=mt((ft=ht=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(gt()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;b()(this,n),t=a.call(this,e),T()(D()(t),"formRefSetRam",G.a.createRef()),T()(D()(t),"resetNum",(function(e){var a=t.state.lists.length,n=H.a.cloneDeep(t.state.lists);if(e!=a){if(a>e)n.splice(e,a-e);else for(var r=a+1;r<=e;r++)n.push({index:r,id:null,info:{}});t.setState({lists:n})}})),T()(D()(t),"cancel",(function(e,a){var n=H.a.cloneDeep(t.state.lists);n.splice(e,1,{index:a.index,id:null,info:{}}),t.setState({lists:n}),t.props.setSolts(n)})),T()(D()(t),"onResetSearch",(function(){t.formRefSetRam.current.resetFields()}));var r=[];if(t.props.defultSolts)for(var o=0;o<t.props.defultSolts;o++)r.push({index:o+1,id:null,info:{}});return t.state={orgionLists:[],lists:r},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"selectRam",value:function(e,t,a){var n=H.a.cloneDeep(this.state.lists);n.splice(e-1,1,{index:e,id:a.id,info:a}),this.setState({lists:n}),this.props.setSolts(n)}},{key:"render",value:function(){var e=this,t=this.state.lists;return G.a.createElement(G.a.Fragment,null,G.a.createElement(oe.a,null,G.a.createElement(wt,{name:"serverMemorySlot",label:"内存插槽数",rules:[{required:!0,pattern:me.a.num,message:"请输入数字"}]},G.a.createElement(ce.a,{onChange:this.resetNum,maxLength:2})),G.a.createElement(wt,{name:"serverMaxMemory",label:"最大支持容量（G）",rules:[{required:!0,pattern:me.a.num,message:"请输入数字"}]},G.a.createElement(ce.a,{maxLength:5})),G.a.createElement(wt,{name:"serverOneMemory",label:"单槽支持最大容量（G）",rules:[{required:!0,pattern:me.a.num,message:"请输入数字"}]},G.a.createElement(ce.a,{maxLength:5})),G.a.createElement(wt,{name:"serverMemoryType",label:"支持类型",rules:[{required:!0,pattern:me.a.num,message:"请输入数字"}]},G.a.createElement(z.a,{style:{width:150},allowClear:!0},H.a.map(te.k.memory_type,(function(e,t){return G.a.createElement(bt,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(wt,{name:"serverMemorySpec",label:"支持规格",rules:[{required:!0}]},G.a.createElement(z.a,{style:{width:150},allowClear:!0},H.a.map(te.k.mem_spec,(function(e,t){return G.a.createElement(bt,{value:parseInt(t),key:t}," ",e," ")}))))),H.a.map(t,(function(t,a){return G.a.createElement("li",{className:"my-column",key:t.index},G.a.createElement("span",{className:"column-label"},"插槽",t.index,":"),G.a.createElement(U.a,{value:t.info&&t.info.memName,style:{width:400},disabled:!0}),G.a.createElement(vt,{fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/memorymodel"),title:"选择内存型号",onSelect:function(a,n){e.selectRam(t.index,a,n)}},t.info.memoryModelId&&G.a.createElement(f.a,null,"替换"),!t.info.memoryModelId&&G.a.createElement(f.a,null,"添加")),G.a.createElement(f.a,{onClick:function(){e.cancel(a,t)},style:{marginLeft:10}},"取消"))})))}}]),n}(G.a.Component),T()(ht,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,serverPartDict:K.a.any,defultSolts:K.a.any,setSolts:K.a.func}),pt=ft))||pt)||pt);function Ct(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Rt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ct(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Dt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.a.Item,U.a.TextArea;var Ot,xt,Nt,Pt=z.a.Option,Mt=(he.a.TreeNode,Object(fe.g)((Et=kt=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(Dt()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"searchFormRef",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.searchFormRef.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectedRows=[],t.searchParam={},t.state={lists:[],page:1,pageSize:10,loading:!1,showModal:!1},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({loading:!0});var a=Rt({},t,{},this.searchParam);$.a.get(this.props.fetchPath,{params:a}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data.records,total:t.data.total}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t[0]),this.setState({showModal:!1})}},{key:"onSearch",value:function(e){this.searchParam=ee.a.clearEmpty(e),this.setState({page:1}),this.getDetail({page:1})}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.getDetail({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.getDetail({page:e,pageSize:t})}},{key:"modalShow",value:function(){this.getDetail(),this.setState({showModal:!0})}},{key:"makeColumns",value:function(){return[{title:"硬盘型号名称",dataIndex:"diskName",key:"diskName"},{title:"品牌",dataIndex:"diskBrand",key:"diskBrand"},{title:"型号",dataIndex:"diskModel",key:"diskModel"},{title:"硬盘类型简称",dataIndex:"diskShort",key:"diskShort",render:function(e,t){return te.k.disk_short[e]||""}},{title:"规格",dataIndex:"diskMeasure",key:"diskMeasure",render:function(e,t){return te.k.server_disk_spec[e]||""}},{title:"接口类型",dataIndex:"interfaceType",key:"interfaceType",render:function(e,t){return te.k.disk_interface_type[e]||""}},{title:"缓存(MB)",dataIndex:"diskCache",key:"diskCache"},{title:"转速",dataIndex:"diskRpm",key:"diskRpm"},{title:"硬盘容量",dataIndex:"diskSize",key:"diskSize"},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:"选择硬盘型号",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"diskName"},G.a.createElement(U.a,{placeholder:"硬盘型号名称",allowClear:!0})),G.a.createElement(v.a.Item,{name:"interfaceType"},G.a.createElement(z.a,{style:{width:150},placeholder:"硬盘接口类型",allowClear:!0},H.a.map(te.k.disk_interface_type,(function(e,t){return G.a.createElement(Pt,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(v.a.Item,{name:"diskMeasure"},G.a.createElement(z.a,{style:{width:150},placeholder:"硬盘规格",allowClear:!0},H.a.map(te.k.server_disk_spec,(function(e,t){return G.a.createElement(Pt,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(v.a.Item,null,G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索"),G.a.createElement(f.a,{type:"primary",onClick:this.onResetSearch},"重置")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}})),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:this.state.page,total:this.state.total,pageSize:this.state.pageSize,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))),G.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(G.a.Component),T()(kt,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,children:K.a.any,onSelect:K.a.func,fetchPath:K.a.string}),St=Et))||St);function jt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Lt,Tt,_t,zt,Ft,Ut=v.a.Item,At=z.a.Option,Bt=Object(fe.g)((Nt=xt=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(jt()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;b()(this,n),t=a.call(this,e),T()(D()(t),"formRefSetHardDisk",G.a.createRef()),T()(D()(t),"resetNum",(function(e){var a=t.state.lists.length,n=H.a.cloneDeep(t.state.lists);if(e!=a){if(a>e)n.splice(e,a-e);else for(var r=a+1;r<=e;r++)n.push({index:r,id:void 0,info:{}});t.setState({lists:n}),console.log(n)}})),T()(D()(t),"cancel",(function(e,a){var n=H.a.cloneDeep(t.state.lists);n.splice(e,1,{index:a.index,id:null,info:{}}),t.setState({lists:n}),t.props.setSolts(n)}));var r=[];if(t.props.defultSolts)for(var o=0;o<t.props.defultSolts;o++)r.push({index:o+1,id:void 0,info:{}});return t.state={lists:r},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"onSelect",value:function(e,t,a){var n=H.a.cloneDeep(this.state.lists);n.splice(e-1,1,{index:e,id:a.id,info:a}),this.setState({lists:n}),this.props.setSolts(n)}},{key:"render",value:function(){var e=this,t=this.state.lists;return G.a.createElement(G.a.Fragment,null,G.a.createElement(oe.a,null,G.a.createElement(Ut,{name:"serverDiskSlot",label:"硬盘插槽数",maxLength:2,rules:[{required:!0,pattern:me.a.num,message:"请输入数字"}]},G.a.createElement(ce.a,{onChange:this.resetNum})),G.a.createElement(Ut,{name:"serverDiskHot",label:"是否支持热插拔",rules:[{required:!0}]},G.a.createElement(z.a,{style:{width:150},allowClear:!0},G.a.createElement(At,{value:1,key:1}," 是 "),G.a.createElement(At,{value:0,key:0}," 否 "))),G.a.createElement(Ut,{name:"diskInterfaceType",label:"接口类型",rules:[{required:!0,message:"请选择"}]},G.a.createElement(z.a,{style:{width:150},allowClear:!0},H.a.map(te.k.disk_interface_type,(function(e,t){return G.a.createElement(At,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(Ut,{name:"serverDiskSpec",label:"支持规格",rules:[{required:!0,message:"请选择"}]},G.a.createElement(z.a,{style:{width:150},allowClear:!0},H.a.map(te.k.server_disk_spec,(function(e,t){return G.a.createElement(At,{value:parseInt(t),key:t}," ",e," ")}))))),H.a.map(t,(function(t,a){return G.a.createElement("li",{className:"my-column",key:t.index},G.a.createElement("span",{className:"column-label required"},"插槽",t.index,":"),G.a.createElement(U.a,{value:t.info.diskName,style:{width:400},disabled:!0}),G.a.createElement(Mt,{fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/diskmodel"),title:"选择硬盘型号",onSelect:function(a,n){e.onSelect(t.index,a,n)}},t.info.diskModelId&&G.a.createElement(f.a,null,"替换"),!t.info.diskModelId&&G.a.createElement(f.a,null,"添加")),G.a.createElement(f.a,{onClick:function(){e.cancel(a,t)},style:{marginLeft:10}},"取消"))})))}}]),n}(G.a.Component),T()(xt,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,defultSolts:K.a.any,setSolts:K.a.func}),Ot=Nt))||Ot;function qt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.a.Item,U.a.TextArea,z.a.Option,he.a.TreeNode;var Gt,Vt,Kt,Wt,Ht=(Lt=Object(Y.b)("root"),Tt=Object(Y.b)("serverPartDict"),Object(fe.g)(_t=Lt(_t=Tt((Ft=zt=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(qt()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefAdd",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.formRefAdd.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectAreaNode={},t.selectedRows=[],t.searchParam={},t.houseId="",t.uw=0,t.state={nwoData:{},orgionLists:[],lists:[],page:1,pageSize:10,loading:!1,showModal:!1,memName:""},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({loading:!0}),$.a.get(this.props.fetchPath,{params:t}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data.records,orgionLists:t.data.records,total:t.data.total}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t[0]),this.setState({showModal:!1,memName:"".concat(t[0].raidBrand,"-").concat(t[0].raidModel,"-").concat(t[0].raidCache)})}},{key:"onSearch",value:function(e){this.searchParam=e,this.setState({page:1}),this.getDetail(e)}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.getDetail({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.getDetail({page:e,pageSize:t})}},{key:"modalShow",value:function(){this.props.disabled?B.a.warning({title:this.props.disabledTip}):(this.getDetail(),this.setState({showModal:!0}))}},{key:"makeColumns",value:function(){var e=this;return[{title:"品牌",dataIndex:"raidBrand",key:"raidBrand"},{title:"型号",dataIndex:"raidModel",key:"raidModel"},{title:"缓存",dataIndex:"raidCache",key:"raidCache"},{title:"类型",dataIndex:"raidType",key:"raidType",render:function(t,a){return e.props.serverPartDict.raid_type[t]}},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading,o=t.memName;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:this.props.title||"选择raid卡型号",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"raidModel"},G.a.createElement(U.a,{allowClear:!0,placeholder:"请选择Raid卡型号"})),G.a.createElement(v.a.Item,{shouldUpdate:!0},G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}})),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:this.state.page,total:this.state.total,pageSize:this.state.pageSize,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))),G.a.createElement("span",{onClick:function(){e.modalShow()}},G.a.createElement(U.a,{style:{width:300},placeholder:"选择raid卡型号",value:o})))}}]),n}(G.a.Component),T()(zt,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,serverPartDict:K.a.any,disabled:K.a.bool,disabledTip:K.a.string,fetchPath:K.a.string,title:K.a.string,powers:K.a.array,onSelect:K.a.func}),_t=Ft))||_t)||_t)||_t);function Zt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Jt,Qt,Xt,Yt=v.a.Item,$t=(U.a.TextArea,z.a.Option),ea=(he.a.TreeNode,Gt=Object(Y.b)("root"),Object(fe.g)(Vt=Gt((Wt=Kt=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(Zt()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefSetRaid",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.formRefSetRaid.current.resetFields()})),t.state={isRaid:!1,isUseRaid:!1,radiInfo:{}},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"selectRadio",value:function(e,t){this.setState({radiInfo:t}),this.props.setSolts(t)}},{key:"changeRaid",value:function(e,t){"isRaid"!=e?"isUseRaid"==e&&this.setState({isUseRaid:t}):this.setState({isRaid:t})}},{key:"render",value:function(){var e=this;return G.a.createElement(G.a.Fragment,null,G.a.createElement(Yt,{name:"isRaid",label:"是否支持raid卡",rules:[{required:!0,pattern:me.a.num,message:"请输入数字"}]},G.a.createElement(z.a,{style:{width:100},allowClear:!0,onChange:function(t){e.changeRaid("isRaid",t)}},G.a.createElement($t,{value:1,key:1}," 是 "),G.a.createElement($t,{value:0,key:0}," 否 "))),G.a.createElement(Yt,{name:"isUseRaid",label:"是否有raid卡",rules:[{required:!!this.state.isRaid,pattern:me.a.num,message:"请输入数字"}]},G.a.createElement(z.a,{style:{width:100},allowClear:!0,disabled:!this.state.isRaid,onChange:function(t){e.changeRaid("isUseRaid",t)}},G.a.createElement($t,{value:1,key:1}," 是 "),G.a.createElement($t,{value:0,key:0}," 否 "))),G.a.createElement(Yt,{label:"raid卡型号",rules:[{required:!0}]},G.a.createElement(Ht,{disabled:!this.state.isUseRaid,disabledTip:"支持raid卡并且有raid卡，才能选择型号",fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/raidmodel"),onSelect:function(t,a){e.selectRadio(t,a)}})))}}]),n}(G.a.Component),T()(Kt,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,powers:K.a.array,defaultData:K.a.any,setSolts:K.a.func}),Vt=Wt))||Vt)||Vt),ta=a(218),aa=a.n(ta),na=a(125),ra=a.n(na);function oa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ia(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function sa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.a.Item;var la,ca,ua,da,ma=z.a.Option,pa=Object(fe.g)((Xt=Qt=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(sa()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"searchFormRef",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.searchFormRef.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),T()(D()(t),"clear",(function(){t.selectedRows=[],t.props.onSelect(void 0,{})})),t.selectedRows=[],t.searchParam={},t.state={nwoData:{},lists:[],page:1,pageSize:10,total:0,loading:!1,showModal:!1,deviceName:""},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({loading:!0}),$.a.get(this.props.fetchPath,{params:ee.a.clearEmpty(t)}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data.records,total:t.data.total}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t[0]),this.setState({showModal:!1})}},{key:"onSearch",value:function(e){this.searchParam=e,this.setState({page:1}),this.getDetail(e)}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.getDetail(ia({},this.searchParam,{page:e,pageSize:t}))}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.getDetail(ia({},this.searchParam,{page:e,pageSize:t}))}},{key:"modalShow",value:function(){this.props.disabled?B.a.warning({title:this.props.disabledTip}):(this.getDetail(),this.setState({showModal:!0}))}},{key:"makeColumns",value:function(){return[{title:"设备名称",dataIndex:"deviceName",key:"deviceName"},{title:"区域",dataIndex:"fullLocationName",key:"fullLocationName"},{title:"机柜",dataIndex:"cabinetName",key:"cabinetName"},{title:"物理位置码",dataIndex:"locationCode",key:"PhyLocationCode"},{title:"管理IP",dataIndex:"ip",key:"ip"},{title:"起始U位",dataIndex:"startubat",key:"startubat"},{title:"占用U位",dataIndex:"uw",key:"uw"},{title:"端口数量",dataIndex:"num",key:"num"},{title:"设备类型",dataIndex:"deviceType",key:"deviceType",render:function(e,t){return te.f.re_facility[e]}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:this.props.title||"选择设备",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"name"},G.a.createElement(U.a,{placeholder:"设备名称",allowClear:!0})),G.a.createElement(v.a.Item,{name:"cabinetName"},G.a.createElement(U.a,{placeholder:"机柜名称",allowClear:!0})),G.a.createElement(v.a.Item,{name:"deviceType"},G.a.createElement(z.a,{style:{width:150},placeholder:"设备类型",allowClear:!0},H.a.map(te.f.re_facility,(function(e,t){return G.a.createElement(ma,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(v.a.Item,{shouldUpdate:!0},G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索"),G.a.createElement(f.a,{type:"primary",onClick:this.onResetSearch},"重置")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}})),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:this.state.page,total:this.state.total,pageSize:this.state.pageSize,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))),G.a.createElement("span",{className:"inner-input",onClick:function(){e.modalShow()},style:this.props.style},this.props.children),this.props.allowClear&&G.a.createElement("span",{className:"clearBtn",onClick:function(){e.clear()}},G.a.createElement(Ue.a,null)))}}]),n}(G.a.Component),T()(Qt,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,allowClear:K.a.bool,disabled:K.a.bool,disabledTip:K.a.string,powers:K.a.array,onSelect:K.a.func,fetchPath:K.a.string,title:K.a.string,style:K.a.any,type:K.a.string,text:K.a.string,children:K.a.any}),Jt=Xt))||Jt;function ha(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var fa,ya,va,ga,Sa,ka,Ea=(la=Object(Y.b)("root"),Object(fe.g)(ca=la((da=ua=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(ha()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefAdd",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.formRefAdd.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),T()(D()(t),"clear",(function(){t.selectedRows=[],t.props.onSelect(void 0,{}),t.setState({portName:""})})),t.selectedRows=[],t.state={lists:[],page:1,pageSize:10,loading:!1,showModal:!1,portName:""},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({loading:!0}),$.a.get("".concat(this.props.fetchPath),{params:t}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t[0]),this.setState({showModal:!1})}},{key:"modalShow",value:function(){this.props.disabled?B.a.warning({title:this.props.disabledTip}):(this.getDetail(),this.setState({showModal:!0}))}},{key:"makeColumns",value:function(){return[{title:"端口",dataIndex:"port",key:"port"},{title:"端口类型",dataIndex:"sult",key:"sult",render:function(e,t){return te.h.port_type[e]}},{title:"端口状态",dataIndex:"status",key:"status",render:function(e){return ee.a.renderStatus(te.h.port_use,e)}},{title:"端口速率（Mbps）",dataIndex:"speed",key:"speed"},{title:"浏览图url",dataIndex:"url",key:"url"},{title:"连接信息（管理IP）",dataIndex:"manageIp",width:150,key:"manageIp"},{title:"连接信息（网卡名）",dataIndex:"deviceNetworkName",width:150,key:"deviceNetworkName"},{title:"连接信息（服务器名称）",dataIndex:"deviceName",width:150,key:"deviceName"},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;t.portName;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:this.props.title||"选择内存卡",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.getDetail(t)}},G.a.createElement(v.a.Item,{name:"portName"},G.a.createElement(U.a,{placeholder:"端口号",allowClear:!0})),G.a.createElement(v.a.Item,{shouldUpdate:!0},G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)},getCheckboxProps:function(e){return{disabled:1!=e.status,status:e.status}}}}))),G.a.createElement("span",{className:"inner-input",onClick:function(){e.modalShow()},style:this.props.style||{}},this.props.children),this.props.allowClear&&G.a.createElement("span",{className:"clearBtn",onClick:function(){e.clear()}},G.a.createElement(Ue.a,null)))}}]),n}(G.a.Component),T()(ua,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,children:K.a.any,disabled:K.a.bool,allowClear:K.a.bool,disabledTip:K.a.string,title:K.a.string,style:K.a.any,fetchPath:K.a.string,powers:K.a.array,onSelect:K.a.func}),ca=da))||ca)||ca);function wa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ba(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ia,Ca,Ra,Da=v.a.Item,Oa=(U.a.TextArea,z.a.Option),xa=(fa=Object(Y.b)("root"),ya=Object(Y.b)("deviceDict"),va=Object(Y.b)("portDict"),Object(fe.g)(ga=fa(ga=ya(ga=va((ka=Sa=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(ba()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;b()(this,n),t=a.call(this,e),T()(D()(t),"formRefSetNetworkCard",G.a.createRef()),T()(D()(t),"resetNum",(function(e){if(e<2)B.a.warning({title:"至少两张网卡"});else{var a=t.state.lists.length,n=H.a.cloneDeep(t.state.lists);if(e!=a){if(a>e)n.splice(e,a-e);else for(var r=a+1;r<=e;r++)n.push({index:r,speed:1e3,interfaceType:0,networkDeviceId:"",networkDevicePort:"",networkDevice:{},devicePort:{}});t.setState({lists:n})}}})),T()(D()(t),"netCard",(function(e,a,n){var r=aa()(t.state.lists);return"ipmi"==e?(t.setState({ipmiIndex:a}),void t.props.setSolts({ipmiIndex:a,lists:r})):"speed"==e||"interfaceType"==e?(r[a-1][e]=n,t.setState({lists:r}),void t.props.setSolts({ipmiIndex:t.state.ipmiIndex,lists:r})):"networkDevice"!=e?"devicePort"==e?(n.id?r[a-1].devicePort={id:n.id,port:n.port}:r[a-1].devicePort={id:null,port:null},t.setState({lists:r}),void t.props.setSolts({ipmiIndex:t.state.ipmiIndex,lists:r})):void 0:void(n.id?(r[a-1].networkDevice={id:n.id,deviceName:n.deviceName},$.a.get("".concat(BSS_ADMIN_URL,"/api/product/network/devices/port?networkDeviceId=").concat(n.id,"&status=1")).then((function(e){if(e=e.data,ee.a.hasStatusOk(e)&&e.data.length>0){var n=e.data[0];r[a-1].devicePort={id:n.id,port:n.port}}else ee.a.dealFail(e),r[a-1].devicePort={id:null,port:null};t.setState({lists:r}),t.props.setSolts({ipmiIndex:t.state.ipmiIndex,lists:r})})).catch((function(){r[a-1].devicePort={id:null,port:null},t.setState({lists:r}),t.props.setSolts({ipmiIndex:t.state.ipmiIndex,lists:r})}))):(r[a-1].networkDevice={id:null,deviceName:null},r[a-1].devicePort={id:null,port:null},t.props.setSolts(r)))})),T()(D()(t),"columns",[{title:"网卡序号",dataIndex:"index",width:80,render:function(e,t,a){return"网卡".concat(a+1)}},{title:"网卡名称",dataIndex:"network",width:80,render:function(e,a,n){var r=n+1;return r==t.state.ipmiIndex?"ipmi":r>t.state.ipmiIndex?"NIC".concat(r-1):r<t.state.ipmiIndex?"NIC".concat(r):void 0}},{title:"ipmi",dataIndex:"ipmi",width:50,render:function(e,a,n){return G.a.createElement(z.a,{value:n+1==t.state.ipmiIndex?1:0,onChange:function(e){t.netCard("ipmi",n+1,e)}},G.a.createElement(Oa,{value:1},"是"),G.a.createElement(Oa,{value:0},"否"))}},{title:"网卡速率（M）",dataIndex:"speed",width:150,render:function(e,a,n){return G.a.createElement(ce.a,{value:e,maxLength:10,style:{width:150},onChange:function(e){t.netCard("speed",n+1,e)}})}},{title:"网口类型",width:150,dataIndex:"interfaceType",render:function(e,a,n){return G.a.createElement(z.a,{defaultValue:e,allowClear:!0,onChange:function(e){t.netCard("interfaceType",n+1,e)}},H.a.map(te.h.port_type,(function(e,t){return G.a.createElement(Oa,{value:parseInt(t),key:t},e)})))}},{title:"网络设备",dataIndex:"networkDevice",width:340,render:function(e,a,n){return G.a.createElement("div",{className:"my-input"},G.a.createElement(pa,{title:"选择网络设备",allowClear:!0,disabledTip:"请先选择入库位置！",disabled:null==t.props.houseId,fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/network/devices/choose?houseId=").concat(t.props.houseId),onSelect:function(e,a){t.netCard("networkDevice",n+1,a)}},G.a.createElement(U.a,{style:{width:320},placeholder:"请选择网络设备",value:a.networkDevice.deviceName||""})))}},{title:"端口",dataIndex:"devicePort",width:120,render:function(e,a,n){return G.a.createElement(G.a.Fragment,null,G.a.createElement(Ea,{title:"选择端口",disabled:null==a.networkDevice.id,disabledTip:"请选择交换机！",allowClear:!0,fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/network/devices/port?networkDeviceId=").concat(a.networkDevice.id),onSelect:function(e,a){t.netCard("devicePort",n+1,a)}},G.a.createElement(U.a,{style:{width:100},placeholder:"请选择端口",value:a.devicePort.port||""})))}}]);var r=[];if(t.props.defultSolts)for(var o=0;o<t.props.defultSolts;o++)r.push({index:o+1,speed:1e3,interfaceType:0,networkDeviceId:"",networkDevicePort:"",networkDevice:{},devicePort:{}});return t.state={houseId:t.props.houseId,ipmiIndex:1,orgionLists:[],lists:r},t.resetNum=ra()(t.resetNum,800),t}return C()(n,[{key:"componentDidMount",value:function(){Object.keys(this.props.deviceDict.devicebrand).length<=0&&this.props.deviceDict.fetchDeviceBrand(),Object.keys(this.props.deviceDict.devicemodel).length<=0&&this.props.deviceDict.fetchDeviceModel()}},{key:"componentWillReceiveProps",value:function(e){if(e.houseId!=this.state.houseId&&this.state.lists.length>0){var t=[];H.a.map(this.state.lists,(function(e){t.push(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{networkDevice:{},devicePort:{}}))})),this.setState({lists:t,houseId:e.houseId})}}},{key:"render",value:function(){var e=this.state.lists;return G.a.createElement(G.a.Fragment,null,G.a.createElement(oe.a,null,G.a.createElement(Da,{name:"networkNumber",label:"网卡数量",rules:[{required:!0,pattern:me.a.num,message:"请输入数字"}]},G.a.createElement(ce.a,{onChange:this.resetNum,maxLength:2})),G.a.createElement("span",{style:{paddingLeft:10}},"(ipmi 和NIC1 的信息为必填项)")),G.a.createElement(p.a,{bordered:!0,key:function(e){return e.index},dataSource:e,columns:this.columns,scroll:{x:1e3}}))}}]),n}(G.a.Component),T()(Sa,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,portDict:K.a.any,deviceDict:K.a.any,powers:K.a.array,defultSolts:K.a.any,houseId:K.a.string,setSolts:K.a.func}),ga=ka))||ga)||ga)||ga)||ga);function Na(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Pa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Na(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ma(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ja,La,Ta,_a,za=v.a.Item,Fa=U.a.TextArea,Ua=z.a.Option,Aa=Object(Y.b)("root")(Ia=Object(Y.b)("serverDict")(Ia=Object(Y.c)((Ra=Ca=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(Ma()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefAdd",G.a.createRef()),T()(D()(t),"onClose",(function(){t.props.onClose()})),T()(D()(t),"resetNodeNum",(function(e){t.setState({us:e,ubitInfo:{},regionInfo:{},cabinetInfo:{},nodeInfo:{},locationCode:void 0})})),T()(D()(t),"resetServerType",(function(e){t.setState({serverType:e,regionInfo:{},cabinetInfo:{},uBitInfo:{},nodeInfo:{},locationCode:void 0})})),T()(D()(t),"onSelectUBit",(function(e){var a=e.uBitInfo.uw+t.state.uw-1,n="".concat(e.regionInfo.fullLocationCode,"-").concat(e.cabinetInfo.row,"-").concat(e.cabinetInfo.coulmn,"-").concat(e.uBitInfo.uw,"U-").concat(a,"U");t.setState({ubitInfo:e.uBitInfo,regionInfo:e.regionInfo,cabinetInfo:e.cabinetInfo,locationCode:n})})),T()(D()(t),"onChange",(function(e,a){t.setState({status:e})})),t.state={showModal:!1,modalLoading:!1,uw:1,us:1,ubitInfo:{},regionInfo:{},cabinetInfo:{},masterInfo:{},nodeInfo:{},locationCode:"",serverCpuInfo:[],bussineTypeInfo:{},serverHardDiskInfo:{},serverRamInfo:{},serverRaidInfo:{},serverNetworkInfo:{ipmiIndex:1,lists:[]},serverType:t.props.data.serverType||1,status:2},t}return C()(n,[{key:"onFinish",value:function(e){var t={},a=e;if(a.serverEditRecord&&(a.serverEditRecord.status=a.serverStatus,t.serverEditRecord=a.serverEditRecord),1==e.serverType){if(!this.state.ubitInfo.uw)return B.a.warning({title:"请选择入库位置"}),!1;a=Pa({},a,{startUs:this.state.ubitInfo.uw,locationId:this.state.regionInfo.fullLocationId,cabinetId:this.state.cabinetInfo.id})}if(2==e.serverType){if(!this.state.nodeInfo.id)return B.a.warning({title:"请选择入库位置"}),!1;a=Pa({},a,{masterNodeId:this.state.nodeInfo.id,locationId:this.state.regionInfo.fullLocationId,cabinetId:this.state.cabinetInfo.id,masterId:this.state.masterInfo.id})}if(null!=this.state.bussineTypeInfo.id){if(a=Pa({},a,{businessType:this.state.bussineTypeInfo.id}),e.serverCpuSlot>0){var n=[],r=!1;if(H.a.map(this.state.serverCpuInfo,(function(e){e.id&&(r=!0),n.push({cpuModelId:e.id||null,cpuSlot:e.index})})),!r)return void B.a.error({title:"cpu配置报错",content:"CPU型号是必填项！"});t.serverPartCpuList=n}if(e.serverMemorySlot>0){var o=[],i=0,s="";if(H.a.map(this.state.serverRamInfo,(function(t){if(t.memSize&&parseInt(t.info.memSize)>0){var a=parseInt(t.info.memSize);i+=a,a>e.serverOneMemory&&(s="".concat(s,";卡槽").concat(t.index,":").concat(a,";"))}o.push({memoryModelId:t.id||null,memorySlot:t.index})})),i>e.serverMaxMemory&&B.a.error({title:"内存卡配置问题：超过最大支持容量",content:"你选择的卡槽总容量为:".concat(i,",超过你设置的最大支持容量：").concat(e.serverMaxMemory,";")}),""!=s)return void B.a.error({title:"内存卡配置问题：超过单槽支持最大容量",content:"你选择的".concat(s,";超过单槽支持最大容量")});t.serverPartMemoryList=o}if(e.serverDiskSlot>0){var l=[];H.a.map(this.state.serverHardDiskInfo,(function(e){l.push({diskModelId:e.id,diskSlot:e.index})})),t.serverPartDiskList=l}if(e.networkNumber>0){var c=[],u=this.state.serverNetworkInfo.ipmiIndex;H.a.map(this.state.serverNetworkInfo.lists,(function(t,a){if(!(a>=e.networkNumber)){var n="",r=a+1;r==u&&(n="ipmi"),r>u&&(n="NIC".concat(r-1)),r<u&&(n="NIC".concat(r)),c.push(ee.a.clearNull({network:n,networkDeviceId:t.networkDevice.id||null,networkDevicePort:t.devicePort.id||null,speed:t.speed||null,isIpmi:r==u?1:0,interfaceType:t.interfaceType}))}})),t.serverPartNetworkList=c}if(e.isRaid&&e.isUseRaid){if(!this.state.serverRaidInfo.id)return B.a.warning({title:"请选择raid卡型号"}),!1;a=Pa({},a,{raidModelId:this.state.serverRaidInfo.id})}t.server=a,this.props.onOk(t)}else B.a.error({title:"请选择业务类型！"})}},{key:"onSelectNode",value:function(e){var t="".concat(e.masterInfo.physicsLocationCode,"-").concat(e.nodeInfo.sort,"M");this.setState({regionInfo:e.regionInfo,cabinetInfo:e.cabinetInfo,masterInfo:e.masterInfo,nodeInfo:e.nodeInfo,locationCode:t})}},{key:"setBussineType",value:function(e,t){this.setState({bussineTypeInfo:t})}},{key:"setCpuSolts",value:function(e){this.setState({serverCpuInfo:e})}},{key:"setRamSolts",value:function(e){this.setState({serverRamInfo:e})}},{key:"setHardDiskSolts",value:function(e){this.setState({serverHardDiskInfo:e})}},{key:"setRaidSolts",value:function(e){this.setState({serverRaidInfo:e})}},{key:"setNetworkSolts",value:function(e){this.setState({serverNetworkInfo:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.regionInfo,n=t.cabinetInfo,r=t.bussineTypeInfo,o=t.serverType,i=t.locationCode,s=t.status;return G.a.createElement(G.a.Fragment,null,G.a.createElement(v.a,{name:"form_in_modal",ref:this.formRefAdd,className:"g-modal-field",initialValues:this.props.data,onFinish:function(t){e.onFinish(t)}},G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:"服务器类型",name:"serverType",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{onChange:function(t){e.resetServerType(t)}},H.a.map(te.j.se_unittype,(function(e,t){return G.a.createElement(Ua,{value:parseInt(t),key:t}," ",e)}))))),1==o&&G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:G.a.createElement("span",{className:"required"}," 入库位置"),style:{marginBottom:0}},ae.a),G.a.createElement(za,{name:"serverUs",rules:[{required:!0,pattern:me.a.num,message:"请输入数字"}],style:{display:"inline-block",width:150}},G.a.createElement(ce.a,{disabled:!0})),G.a.createElement(be,{uw:1,title:"选择U位",onSelect:function(t){e.onSelectUBit(t)}},G.a.createElement(f.a,{style:{width:120}}," 选择U位")))),2==o&&G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:G.a.createElement("span",{className:"required"}," 入库位置"),style:{marginBottom:0}},ae.a),G.a.createElement(za,{name:"serverUs",rules:[{required:!0}],style:{display:"inline-block",width:150}},G.a.createElement(ce.a,{disabled:!0})),G.a.createElement(Fe,{us:1,title:"选择节点",onSelect:function(t){e.onSelectNode(t)}},G.a.createElement(f.a,{style:{width:120}}," 选择节点")))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:G.a.createElement("span",{className:"required"}," 区域")},ae.a),G.a.createElement(U.a,{placeholder:"地区/机房/区域(自动生成)",type:"text",disabled:!0,value:a.fullLocationName}))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:G.a.createElement("span",{className:"required"}," 位置码")},ae.a),G.a.createElement(U.a,{placeholder:"自动生成",type:"text",disabled:!0,value:i}))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:G.a.createElement("span",{className:"required"}," 机柜")},ae.a),G.a.createElement(U.a,{placeholder:"自动生成",type:"text",disabled:!0,value:n.name}))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:"设备品牌",name:"serverBrand",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,null,H.a.map(this.props.serverDict.server_brand,(function(e,t){return G.a.createElement(Ua,{value:parseInt(t),key:t}," ",e," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:"设备型号",name:"serverModel",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,null,H.a.map(this.props.serverDict.server_model,(function(e,t){return G.a.createElement(Ua,{value:parseInt(t),key:t}," ",e," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:"管理IP",name:"serverIp",rules:[{required:!0,pattern:me.a.ipv4,message:"请输入IPv4格式IP"}]},ae.a),G.a.createElement(U.a,{type:"text",placeholder:"请输入"}))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:"显示类型",name:"showMode",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{placeholder:"请选择",allowClear:!0},H.a.map(te.j.show_type,(function(e,t){return G.a.createElement(Ua,{value:parseInt(t),key:t}," ",e," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:G.a.createElement("span",{className:"required"},"业务类型"),className:"my-input",rules:[{required:!0}]},ae.a),G.a.createElement(He,{title:"选择业务类型",allowClear:!0,defaultValue:{},fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/server/business/types"),onSelect:function(t,a){e.setBussineType(t,a)}},G.a.createElement(U.a,{style:{width:"100%"},placeholder:"选择业务类型",value:r.name||""})))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:"用途",name:"serverUseType",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{placeholder:"请选择",allowClear:!0},H.a.map(te.j.server_useage,(function(e,t){return G.a.createElement(Ua,{value:parseInt(t),key:t}," ",e," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:"服务器状态",name:"serverStatus",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{placeholder:"服务器状态",allowClear:!0,onChange:this.onChange},H.a.map(te.j.server_status,(function(e,t){return G.a.createElement(Ua,{value:parseInt(t),key:t}," ",e.text," ")}))))),3===s&&G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:"故障分类",name:["serverEditRecord","childStatus"],rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{placeholder:"故障分类",allowClear:!0},H.a.map(this.props.serverDict.server_fault_category,(function(e,t){return G.a.createElement(Ua,{value:parseInt(t),key:t}," ",e," ")}))))),3===s&&G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:"保留原因",name:["serverEditRecord","content"],rules:[{required:!0}]},ae.a),G.a.createElement(U.a,{type:"text",placeholder:"请输入"}))),4===s&&G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:"保留原因",name:["serverEditRecord","content"],rules:[{required:!0}]},ae.a),G.a.createElement(U.a,{type:"text",placeholder:"请输入"}))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:"销售状态",name:"status",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{placeholder:"销售状态",allowClear:!0},H.a.map(te.j.market,(function(e,t){return G.a.createElement(Ua,{value:parseInt(t),key:t,disabled:2==t}," ",e.text," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:"发布状态",name:"releaseStatus",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{placeholder:"发布状态",allowClear:!0},H.a.map(te.j.releaseStatus,(function(e,t){return G.a.createElement(Ua,{value:parseInt(t),key:t}," ",e," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(za,d()({label:"采购时间",name:"purchasingTime",rules:[{required:!0}]},ae.a),G.a.createElement(se.a,{style:{width:"100%"}})))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(za,d()({label:"CPU配置"},ae.b),G.a.createElement(lt,{defultSolts:this.props.data.serverCpuSlot,setSolts:function(t){e.setCpuSolts(t)}})))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(za,d()({label:"内存配置"},ae.b),G.a.createElement(It,{defultSolts:this.props.data.serverMemorySlot,setSolts:function(t){e.setRamSolts(t)}})))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(za,d()({label:"硬盘配置"},ae.b),G.a.createElement(Bt,{defultSolts:this.props.data.serverDiskSlot,setSolts:function(t){e.setHardDiskSolts(t)}})))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(za,d()({label:"网卡配置"},ae.b),G.a.createElement(xa,{defultSolts:this.props.data.networkNumber,houseId:this.state.regionInfo.houseId,setSolts:function(t){e.setNetworkSolts(t)}})))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(za,d()({label:"raid卡配置"},ae.b),G.a.createElement(ea,{setSolts:function(t){e.setRaidSolts(t)}})))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(za,d()({label:"备注",name:"remarks"},ae.b),G.a.createElement(Fa,{autoSize:{minRows:5},placeholder:"请输入",maxLength:250})))),G.a.createElement("div",{className:"actions-btn"},G.a.createElement(f.a,{htmlType:"submit",className:"action-btn ok"},"确认提交"),G.a.createElement(f.a,{onClick:this.onClose,className:"action-btn ok"},"取消"))))}}]),n}(G.a.Component),T()(Ca,"propTypes",{location:K.a.any,history:K.a.any,root:K.a.any,serverDict:K.a.any,data:K.a.any,onOk:K.a.func,onClose:K.a.func}),Ia=Ra))||Ia)||Ia)||Ia,Ba=a(1604);function qa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ga(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qa(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Va(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ka,Wa,Ha,Za;v.a.Item,U.a.TextArea,z.a.Option,he.a.TreeNode,ja=Object(Y.b)("root"),Object(fe.g)(La=ja((_a=Ta=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(Va()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"searchFormRef",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.searchFormRef.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectedRows=[],t.searchParam={},t.state={lists:[],page:1,pageSize:10,loading:!1,showModal:!1},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=H.a.assign({},{page:this.state.page,pageSize:this.state.pageSize},Ga({},t));this.setState({loading:!0}),$.a.get(this.props.fetchPath,{params:a}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data.records,total:t.data.total}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t[0]),this.setState({showModal:!1})}},{key:"onSearch",value:function(e){this.searchParam=e,this.setState({page:1}),this.getDetail(e)}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.getDetail(Ga({},this.searchParam,{page:e,pageSize:t}))}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.getDetail(Ga({},this.searchParam,{page:e,pageSize:t}))}},{key:"modalShow",value:function(){this.props.disabled&&B.a.warning({titile:this.props.disabledTip}),this.getDetail(),this.setState({showModal:!0})}},{key:"makeColumns",value:function(){return[{title:"CPU编号",dataIndex:"cpuCode",key:"cpuCode"},{title:"位置码",dataIndex:"houseLocationCode",key:"houseLocationCode"},{title:"CPU型号名称",dataIndex:"cpuName",key:"cpuName",render:function(e,t){return t.cpuModelList[0]&&t.cpuModelList[0].cpuName||""}},{title:"CPU品牌",dataIndex:"cpuBrand",key:"cpuBrand",render:function(e,t){return t.cpuModelList[0]&&t.cpuModelList[0].cpuBrand||""}},{title:"CPU型号",dataIndex:"cpuModel",key:"cpuModel",render:function(e,t){return t.cpuModelList[0]&&t.cpuModelList[0].cpuModel||""}},{title:"存放机房",dataIndex:"houseName",key:"houseName"},{title:"采购时间",dataIndex:"purchasingTime",key:"purchasingTime",render:function(e,t){return ee.a.getTime(e)}},{title:"入库时间",dataIndex:"storageTime",key:"storageTime",render:function(e,t){return ee.a.getTime(e)}},{title:"资源状态",dataIndex:"status",key:"status",render:function(e,t){return ee.a.renderStatus(te.k.parts_res_status,e)}},{title:"来源",dataIndex:"source",key:"source",render:function(e,t){return te.k.source[e]}},{title:"使用服务器",dataIndex:"serverManagerIp",key:"serverManagerIp"},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:this.props.title||"选择CPU",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"cpuName"},G.a.createElement(U.a,{allowClear:!0,placeholder:"请输入cpu型号名称"})),G.a.createElement(v.a.Item,null,G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索"),G.a.createElement(f.a,{type:"primary",onClick:this.onResetSearch},"重置")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}})),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:this.state.page,total:this.state.total,pageSize:this.state.pageSize,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))),G.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(G.a.Component),T()(Ta,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,children:K.a.any,powers:K.a.array,disabled:K.a.bool,disabledTip:K.a.string,title:K.a.string,style:K.a.any,fetchPath:K.a.string,onSelect:K.a.func}),La=_a))||La);function Ja(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Qa,Xa,Ya,$a,en=v.a.Item,tn=(Ka=Object(Y.b)("root"),Object(fe.g)(Wa=Ka((Za=Ha=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(Ja()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;b()(this,n),t=a.call(this,e),T()(D()(t),"formRefSetCpu",G.a.createRef()),T()(D()(t),"resetNum",(function(e){if(e<t.minSolts)return Modal.error({title:"你删除的卡槽中有数据，不允许删除卡槽！"}),!1;var a=t.state.lists.length,n=H.a.cloneDeep(t.state.lists);if(e!=a){if(a>e)n.splice(e,a-e);else for(var r=a+1;r<=e;r++)n.push({index:r,id:void 0,info:{}});t.setState({lists:n})}})),T()(D()(t),"del",(function(e,a){console.log(a);var n=H.a.cloneDeep(t.state.lists);n.splice(e,1,{cpuSlot:a.cpuSlot,id:a.id,cpuModelId:null,cpuName:null,serverId:a.serverId,version:a.version}),t.setState({lists:n}),t.props.setSolts(n)})),T()(D()(t),"cancel",(function(e,a){var n=H.a.cloneDeep(t.state.lists);n.splice(e,1,{cpuSlot:t.props.defaultValues[e].cpuSlot,id:t.props.defaultValues[e].id,cpuModelId:t.props.defaultValues[e].cpuModelId,cpuName:t.props.defaultValues[e].cpuName,serverId:t.props.defaultValues[e].serverId,version:t.props.defaultValues[e].version}),t.setState({lists:n}),t.props.setSolts(n)}));var r=0,o=t.props.defaultValues&&t.props.defaultValues.length;if(o)for(var i=o-1;i>0;i--){if(t.props.defaultValues[i].cpuModelId){r=i+1;break}}return t.minSolts=r,t.state={lists:t.props.defaultValues},t.resetNum=ra()(t.resetNum,600),t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"selectCpu",value:function(e,t,a){console.log(t);var n=H.a.cloneDeep(this.state.lists);t.cpuModelId?n.splice(e,1,{cpuSlot:t.cpuSlot,id:t.id,cpuModelId:a.id,cpuName:a.cpuName,serverId:t.serverId,version:t.version}):n.splice(e,1,{cpuSlot:t.index,id:t.id,cpuModelId:a.id,cpuName:a.cpuName,serverId:t.serverId,version:t.version}),this.setState({lists:n}),this.props.setSolts(n)}},{key:"render",value:function(){var e=this;return G.a.createElement(G.a.Fragment,null,G.a.createElement(en,null,G.a.createElement(oe.a,null,G.a.createElement(en,{name:"serverCpuSlot",label:"CPU数量",rules:[{required:!0,pattern:me.a.num,message:"请输入数字"}]},G.a.createElement(ce.a,{onChange:this.resetNum,maxLength:2}))),H.a.map(this.state.lists,(function(t,a){return G.a.createElement("li",{className:"my-column",key:a},G.a.createElement("span",{className:"column-label required"},"插槽",t.cpuSlot,":"),G.a.createElement(U.a,{value:t.cpuName,style:{width:400},disabled:!0}),G.a.createElement(tt,{onSelect:function(n,r){e.selectCpu(a,t,r)}},t.cpuModelId&&G.a.createElement(f.a,null,"替换"),!t.cpuModelId&&G.a.createElement(f.a,null,"添加")),G.a.createElement(f.a,{onClick:function(){e.cancel(a,t)},style:{marginLeft:10}},"取消"),t.id&&G.a.createElement(f.a,{onClick:function(){e.del(a,t)},style:{marginLeft:10}},"移除"))}))))}}]),n}(G.a.Component),T()(Ha,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,powers:K.a.array,defaultValues:K.a.any,houseId:K.a.any,setSolts:K.a.func}),Wa=Za))||Wa)||Wa);function an(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function nn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?an(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):an(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function rn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.a.Item,U.a.TextArea;var on,sn,ln,cn,un=z.a.Option;he.a.TreeNode,Qa=Object(Y.b)("root"),Object(fe.g)(Xa=Qa(($a=Ya=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(rn()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefAdd",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.formRefAdd.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectAreaNode={},t.selectedRows=[],t.regionId="",t.uw=0,t.state={nwoData:{},lists:[],page:1,pageSize:10,loading:!1,showModal:!1},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=H.a.assign({},{page:this.state.page,pageSize:this.state.pageSize},this.searchParam,nn({},t));this.setState({loading:!0}),$.a.get(this.props.fetchPath,{params:a}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data.records,total:t.data.total}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t[0]),this.setState({showModal:!1})}},{key:"onSearch",value:function(e){this.searchParam=e,this.setState({page:1}),this.getDetail(e)}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.getDetail(nn({page:e,pageSize:t},this.searchParam))}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.getDetail(nn({page:e,pageSize:t},this.searchParam))}},{key:"modalShow",value:function(){this.props.disabled&&B.a.warning({titile:this.props.disabledTip}),this.getDetail(),this.setState({showModal:!0})}},{key:"makeColumns",value:function(){return[{title:"内存编号",dataIndex:"memCode",key:"memCode"},{title:"内存位置码",dataIndex:"houseLocationCode",key:"houseLocationCode"},{title:"内存型号名称",dataIndex:"memName",key:"memName",render:function(e,t){return t.memorymodelList[0]&&t.memorymodelList[0].memName||""}},{title:"内存类型",dataIndex:"memType",key:"memType",render:function(e,t){var a=t.memorymodelList[0]&&t.memorymodelList[0].memType||"";return te.k.memory_type[a]}},{title:"支持规格",dataIndex:"memSpec",key:"memSpec",render:function(e,t){var a=t.memorymodelList[0]&&t.memorymodelList[0].memSpec||"";return te.k.mem_spec[a]}},{title:"内存容量(GB)",dataIndex:"memSize",key:"memSize",render:function(e,t){return t.memorymodelList[0]&&t.memorymodelList[0].memSize||""}},{title:"存放机房",dataIndex:"houseName",key:"houseName"},{title:"采购时间",dataIndex:"purchasingTime",key:"purchasingTime",render:function(e,t){return ee.a.getTime(e)}},{title:"入库时间",dataIndex:"storageTime",key:"storageTime",render:function(e,t){return ee.a.getTime(e)}},{title:"资源归属",dataIndex:"resourceAttribution",key:"resourceAttribution",render:function(e,t){return te.k.resource_attribution[e]}},{title:"归属方",dataIndex:"customerName",key:"customerName"},{title:"显示类型",dataIndex:"showType",key:"showType",render:function(e,t){return te.k.show_type[e]}},{title:"发布状态",dataIndex:"releaseStatus",key:"releaseStatus",render:function(e,t){return te.k.releaseStatus[e]}},{title:"资源状态",dataIndex:"saleStatus",key:"saleStatus",render:function(e,t){return ee.a.renderStatus(te.k.parts_res_status,e)}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:this.props.title||"选择内存卡",maskClosable:!1,width:"98%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"memCode"},G.a.createElement(U.a,{allowClear:!0,placeholder:"请输入内存编号"})),G.a.createElement(v.a.Item,{name:"memName"},G.a.createElement(U.a,{allowClear:!0,placeholder:"请输入内存名称"})),G.a.createElement(v.a.Item,{name:"memSize"},G.a.createElement(U.a,{allowClear:!0,placeholder:"请输入内存容量"})),G.a.createElement(v.a.Item,{name:"resourceAttribution"},G.a.createElement(z.a,{style:{width:140},allowClear:!0,placeholder:"请选择资源归属"},H.a.map(te.k.resource_attribution,(function(e,t){return G.a.createElement(un,{key:t,value:parseInt(t)},e)})))),G.a.createElement(v.a.Item,{name:"customerName"},G.a.createElement(U.a,{allowClear:!0,placeholder:"请输入资源归属方名称"})),G.a.createElement(v.a.Item,{name:"showType"},G.a.createElement(z.a,{style:{width:140},allowClear:!0,placeholder:"请选择显示类型"},H.a.map(te.k.show_type,(function(e,t){return G.a.createElement(un,{key:t,value:parseInt(t)},e)})))),G.a.createElement(v.a.Item,null,G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}})),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:this.state.page,total:this.state.total,pageSize:this.state.pageSize,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))),G.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(G.a.Component),T()(Ya,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,children:K.a.any,powers:K.a.array,disabled:K.a.bool,disabledTip:K.a.string,title:K.a.string,style:K.a.any,fetchPath:K.a.string,onSelect:K.a.func}),Xa=$a))||Xa);function dn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var mn,pn,hn,fn,yn=v.a.Item,vn=z.a.Option,gn=(on=Object(Y.b)("serverPartDict"),Object(fe.g)(sn=on((cn=ln=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(dn()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;b()(this,n),t=a.call(this,e),T()(D()(t),"formRefSetRam",G.a.createRef()),T()(D()(t),"resetNum",(function(e){if(e<t.minSolts)return B.a.error({title:"你删除的卡槽中有数据，不允许删除卡槽！"}),!1;var a=t.state.lists.length,n=H.a.cloneDeep(t.state.lists);if(e!=a){if(a>e)n.splice(e,a-e);else for(var r=a+1;r<=e;r++)n.push({index:r,id:void 0,info:{}});t.setState({lists:n}),console.log(n)}})),T()(D()(t),"del",(function(e,a){var n=H.a.cloneDeep(t.state.lists);n.splice(e,1,{memorySlot:a.memorySlot,id:a.id,memoryModelId:null,memoryName:null,serverId:a.serverId,version:a.version}),t.setState({lists:n}),t.props.setSolts(n)})),T()(D()(t),"cancel",(function(e,a){var n=H.a.cloneDeep(t.state.lists);n.splice(e,1,{memorySlot:t.props.defaultValues[e].memorySlot,id:t.props.defaultValues[e].id,memoryModelId:t.props.defaultValues[e].memoryModelId,memoryName:t.props.defaultValues[e].memoryName,serverId:t.props.defaultValues[e].serverId,version:t.props.defaultValues[e].version}),t.setState({lists:n}),t.props.setSolts(n)})),T()(D()(t),"onResetSearch",(function(){t.formRefSetRam.current.resetFields()}));var r=0,o=t.props.defaultValues&&t.props.defaultValues.length;if(o)for(var i=o-1;i>0;i--){if(t.props.defaultValues[i].memoryModelId){r=i+1;break}}return t.minSolts=r,t.state={lists:t.props.defaultValues},t.resetNum=ra()(t.resetNum,600),t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"selectRam",value:function(e,t,a){var n=H.a.cloneDeep(this.state.lists);n.splice(e,1,{memorySlot:t.memorySlot,id:t.id,memoryModelId:a.id,memoryName:a.memName,serverId:t.serverId,version:t.version}),this.setState({lists:n}),this.props.setSolts(n)}},{key:"render",value:function(){var e=this,t=this.state.lists;return G.a.createElement(G.a.Fragment,null,G.a.createElement(oe.a,null,G.a.createElement(yn,{name:"serverMemorySlot",label:"内存插槽数",rules:[{required:!0,pattern:me.a.num,message:"请输入不超过2位的数字"}]},G.a.createElement(ce.a,{onChange:this.resetNum,maxLength:2})),G.a.createElement(yn,{name:"serverMaxMemory",label:"最大支持容量（G）",rules:[{required:!0,pattern:me.a.num,message:"请输入不超过5位的数字"}]},G.a.createElement(ce.a,{maxLength:5})),G.a.createElement(yn,{name:"serverOneMemory",label:"单槽支持最大容量（G）",rules:[{required:!0,pattern:me.a.num,message:"请输入不超过5位的数字"}]},G.a.createElement(ce.a,{maxLength:5})),G.a.createElement(yn,{name:"serverMemoryType",label:"支持类型",rules:[{required:!0,message:"请选择"}]},G.a.createElement(z.a,{style:{width:150},allowClear:!0},H.a.map(te.k.memory_type,(function(e,t){return G.a.createElement(vn,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(yn,{name:"serverMemorySpec",label:"支持规格",rules:[{required:!0}]},G.a.createElement(z.a,{style:{width:150},allowClear:!0},H.a.map(te.k.mem_spec,(function(e,t){return G.a.createElement(vn,{value:parseInt(t),key:t}," ",e," ")}))))),H.a.map(t,(function(t,a){return G.a.createElement("li",{className:"my-column",key:a},G.a.createElement("span",{className:"column-label"},"插槽",t.memorySlot,":"),G.a.createElement(U.a,{value:t.memoryName,style:{width:400},disabled:!0}),G.a.createElement(vt,{fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/memorymodel"),title:"选择内存型号",onSelect:function(n,r){e.selectRam(a,t,r)}},t.memoryModelId&&G.a.createElement(f.a,null,"替换"),!t.memoryModelId&&G.a.createElement(f.a,null,"添加")),G.a.createElement(f.a,{onClick:function(){e.cancel(a,t)},style:{marginLeft:10}},"取消"),t.id&&G.a.createElement(f.a,{onClick:function(){e.del(a,t)},style:{marginLeft:10}},"移除"))})))}}]),n}(G.a.Component),T()(ln,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,serverPartDict:K.a.any,defaultValues:K.a.any,houseId:K.a.string,setSolts:K.a.func}),sn=cn))||sn)||sn);function Sn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function kn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Sn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function En(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var wn,bn,In,Cn=z.a.Option;mn=Object(Y.b)("root"),Object(fe.g)(pn=mn((fn=hn=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(En()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"searchFormRef",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.searchFormRef.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectAreaNode={},t.selectedRows=[],t.searchParam={},t.state={lists:[],page:1,pageSize:10,loading:!1,showModal:!1},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({loading:!0}),$.a.get(this.props.fetchPath,{params:kn({},t,{},this.searchParam)}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data.records,total:t.data.total}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t[0]),this.setState({showModal:!1})}},{key:"onSearch",value:function(e){this.searchParam=ee.a.clearEmpty(e),this.setState({page:1}),this.getDetail({page:1})}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.getDetail({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.getDetail({page:e,pageSize:t})}},{key:"modalShow",value:function(){this.props.disabled&&B.a.warning({titile:this.props.disabledTip}),this.getDetail(),this.setState({showModal:!0})}},{key:"makeColumns",value:function(){return[{title:"硬盘编号",dataIndex:"diskCode",key:"diskCode"},{title:"位置码",dataIndex:"houseLocationCode",key:"houseLocationCode"},{title:"硬盘型号名称",dataIndex:"diskName",key:"diskName",render:function(e,t){return t.diskmodelList[0]&&t.diskmodelList[0].diskName||""}},{title:"硬盘容量(G)",dataIndex:"diskSize",key:"diskSize",render:function(e,t){return t.diskmodelList[0]&&t.diskmodelList[0].diskSize||""}},{title:"规格",dataIndex:"diskMeasure",key:"diskMeasure",render:function(e,t){return te.k.server_disk_spec[t.diskmodelList[0]&&t.diskmodelList[0].diskMeasure]||""}},{title:"接口类型",dataIndex:"interfaceType",key:"interfaceType",render:function(e,t){return te.k.disk_interface_type[t.diskmodelList[0]&&t.diskmodelList[0].interfaceType]||""}},{title:"存放机房",dataIndex:"houseName",key:"houseName"},{title:"归属方",dataIndex:"customerName",key:"customerName"},{title:"使用服务器",dataIndex:"serverManagerIp",key:"serverManagerIp"},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:this.props.title||"选择硬盘",maskClosable:!1,width:"98%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"diskName"},G.a.createElement(U.a,{allowClear:!0,placeholder:"请输入硬盘名称"})),G.a.createElement(v.a.Item,{name:"interfaceType"},G.a.createElement(z.a,{style:{width:150},placeholder:"硬盘接口类型",allowClear:!0},H.a.map(te.k.disk_interface_type,(function(e,t){return G.a.createElement(Cn,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(v.a.Item,{name:"diskMeasure"},G.a.createElement(z.a,{style:{width:150},placeholder:"硬盘规格",allowClear:!0},H.a.map(te.k.server_disk_spec,(function(e,t){return G.a.createElement(Cn,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(v.a.Item,null,G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}})),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:this.state.page,total:this.state.total,pageSize:this.state.pageSize,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))),G.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(G.a.Component),T()(hn,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,children:K.a.any,powers:K.a.array,disabled:K.a.bool,disabledTip:K.a.string,title:K.a.string,style:K.a.any,fetchPath:K.a.string,onSelect:K.a.func}),pn=fn))||pn);function Rn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Dn,On,xn,Nn,Pn=v.a.Item,Mn=z.a.Option,jn=Object(fe.g)((In=bn=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(Rn()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;b()(this,n),t=a.call(this,e),T()(D()(t),"formRefSetHardDisk",G.a.createRef()),T()(D()(t),"resetNum",(function(e){if(e<t.minSolts)return B.a.error({title:"你删除的卡槽中有数据，不允许删除卡槽！"}),!1;var a=t.state.lists.length,n=H.a.cloneDeep(t.state.lists);if(e!=a){if(a>e)n.splice(e,a-e);else for(var r=a+1;r<=e;r++)n.push({index:r,id:void 0,info:{}});t.setState({lists:n}),console.log(n)}})),T()(D()(t),"del",(function(e,a){var n=H.a.cloneDeep(t.state.lists);n.splice(e,1,{diskSlot:a.diskSlot,id:a.id,diskModelId:null,diskName:null,serverId:a.serverId,version:a.version}),t.setState({lists:n}),t.props.setSolts(n)})),T()(D()(t),"cancel",(function(e,a){var n=H.a.cloneDeep(t.state.lists);n.splice(e,1,{diskSlot:t.props.defaultValues[e].diskSlot,id:t.props.defaultValues[e].id,diskModelId:t.props.defaultValues[e].diskModelId,diskName:t.props.defaultValues[e].diskName,serverId:t.props.defaultValues[e].serverId,version:t.props.defaultValues[e].version}),t.setState({lists:n}),t.props.setSolts(n)}));var r=0,o=t.props.defaultValues&&t.props.defaultValues.length;if(o)for(var i=o-1;i>0;i--){if(t.props.defaultValues[i].diskModelId){r=i+1;break}}return t.minSolts=r,t.state={lists:t.props.defaultValues},t.resetNum=ra()(t.resetNum,600),t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"selectDisk",value:function(e,t,a){var n=H.a.cloneDeep(this.state.lists);n.splice(e,1,{diskSlot:t.diskSlot,id:t.id,diskModelId:a.id,diskName:a.diskName,serverId:t.serverId,version:t.version}),this.setState({lists:n}),this.props.setSolts(n)}},{key:"render",value:function(){var e=this,t=this.state.lists;return G.a.createElement(G.a.Fragment,null,G.a.createElement(oe.a,null,G.a.createElement(Pn,{name:"serverDiskSlot",label:"硬盘插槽数",rules:[{required:!0,pattern:me.a.num,message:"请输入数字"}]},G.a.createElement(ce.a,{onChange:this.resetNum,maxLength:2})),G.a.createElement(Pn,{name:"serverDiskHot",label:"是否支持热插拔",rules:[{required:!0}]},G.a.createElement(z.a,{style:{width:150},allowClear:!0},G.a.createElement(Mn,{value:1,key:1}," 是 "),G.a.createElement(Mn,{value:0,key:0}," 否 "))),G.a.createElement(Pn,{name:"diskInterfaceType",label:"接口类型",rules:[{required:!0,message:"请选择"}]},G.a.createElement(z.a,{style:{width:150},allowClear:!0},H.a.map(te.k.disk_interface_type,(function(e,t){return G.a.createElement(Mn,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(Pn,{name:"serverDiskSpec",label:"支持规格",rules:[{required:!0,message:"请选择"}]},G.a.createElement(z.a,{style:{width:150},allowClear:!0},H.a.map(te.k.server_disk_spec,(function(e,t){return G.a.createElement(Mn,{value:parseInt(t),key:t}," ",e," ")}))))),H.a.map(t,(function(t,a){return G.a.createElement("li",{className:"my-column",key:a},G.a.createElement("span",{className:"column-label required"},"插槽",t.diskSlot,":"),G.a.createElement(U.a,{value:t.diskName,style:{width:400},disabled:!0}),G.a.createElement(Mt,{fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/diskmodel"),title:"选择硬盘型号",onSelect:function(n,r){e.selectDisk(a,t,r)}},t.diskModelId&&G.a.createElement(f.a,null,"替换"),!t.diskModelId&&G.a.createElement(f.a,null,"添加")),G.a.createElement(f.a,{onClick:function(){e.cancel(a,t)},style:{marginLeft:10}},"取消"),t.id&&G.a.createElement(f.a,{onClick:function(){e.del(a,t)},style:{marginLeft:10}},"移除"))})))}}]),n}(G.a.Component),T()(bn,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,defaultValues:K.a.any,houseId:K.a.any,setSolts:K.a.func}),wn=In))||wn;function Ln(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Tn,_n,zn,Fn,Un,An=v.a.Item,Bn=(U.a.TextArea,z.a.Option),qn=(he.a.TreeNode,Dn=Object(Y.b)("root"),Object(fe.g)(On=Dn((Nn=xn=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(Ln()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefSetRaid",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.formRefSetRaid.current.resetFields()})),t.state={isRaid:!1,isUseRaid:!1,radiInfo:{}},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"selectRadio",value:function(e,t){this.setState({radiInfo:t}),this.props.setSolts(t)}},{key:"changeRaid",value:function(e,t){"isRaid"!=e?"isUseRaid"==e&&this.setState({isUseRaid:t}):this.setState({isRaid:t})}},{key:"render",value:function(){var e=this;return G.a.createElement(G.a.Fragment,null,G.a.createElement(An,{name:"isRaid",label:"是否支持raid卡"},G.a.createElement(z.a,{disabled:!0,style:{width:100},allowClear:!0,onChange:function(t){e.changeRaid("isRaid",t)}},G.a.createElement(Bn,{value:1,key:1}," 是 "),G.a.createElement(Bn,{value:0,key:0}," 否 "))),G.a.createElement(An,{name:"isUseRaid",label:"是否有raid卡"},G.a.createElement(z.a,{style:{width:100},allowClear:!0,disabled:!this.state.isRaid,onChange:function(t){e.changeRaid("isUseRaid",t)}},G.a.createElement(Bn,{value:1,key:1}," 是 "),G.a.createElement(Bn,{value:0,key:0}," 否 "))),G.a.createElement(An,{label:"raid卡型号",name:"raidName"},G.a.createElement(U.a,{disabled:!0})))}}]),n}(G.a.Component),T()(xn,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,powers:K.a.array,defaultData:K.a.any,setSolts:K.a.func}),On=Nn))||On)||On);function Gn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Vn,Kn,Wn,Hn,Zn,Jn,Qn=z.a.Option,Xn=(Tn=Object(Y.b)("root"),_n=Object(Y.b)("portDict"),Object(fe.g)(zn=Tn(zn=_n((Un=Fn=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(Gn()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefNetCardTable",G.a.createRef()),T()(D()(t),"netCard",(function(e,a,n){var r=aa()(t.state.lists);"ipmi"==e&&(t.setState({ipmiIndex:a}),t.props.setSolts(r)),"speed"!=e&&"interfaceType"!=e||(r[a-1][e]=n,t.setState({lists:r}),t.props.setSolts(r)),"networkDevice"==e&&(n.id?(r[a-1].networkDevice={id:n.id,deviceName:n.deviceName},$.a.get("".concat(BSS_ADMIN_URL,"/api/product/network/devices/port?networkDeviceId=").concat(n.id,"&status=1")).then((function(e){if(e=e.data,ee.a.hasStatusOk(e)&&e.data.length>0){var n=e.data[0];r[a-1].devicePort={id:n.id,port:n.port}}else ee.a.dealFail(e),r[a-1].devicePort={id:null,port:null};t.setState({lists:r}),t.props.setSolts(r)})).catch((function(){r[a-1].devicePort={id:null,port:null},t.setState({lists:r}),t.props.setSolts(r)}))):(r[a-1].networkDevice={id:null,deviceName:null},r[a-1].devicePort={id:null,port:null},t.props.setSolts(r))),"devicePort"==e&&(n.id?r[a-1].devicePort={id:n.id,port:n.port}:r[a-1].devicePort={id:null,port:null},t.setState({lists:r}),t.props.setSolts(r))})),T()(D()(t),"columns",[{title:"网卡序号",dataIndex:"index",width:80,render:function(e,t,a){return"网卡".concat(a+1)}},{title:"网卡名称",dataIndex:"network",width:100},{title:"ipmi",dataIndex:"isIpmi",width:80,render:function(e,a,n){return G.a.createElement(z.a,{value:e,disabled:!0,style:{width:80},onChange:function(e){t.netCard("ipmi",n+1,e)}},G.a.createElement(Qn,{value:1},"是"),G.a.createElement(Qn,{value:0},"否"))}},{title:"网卡速率（M）",dataIndex:"speed",width:120,render:function(e,a,n){return G.a.createElement(ce.a,{value:e,onChange:function(e){t.netCard("speed",n+1,e)},maxLength:10})}},{title:"网口类型",width:150,dataIndex:"interfaceType",render:function(e,a,n){return G.a.createElement(z.a,{defaultValue:e,allowClear:!0,style:{width:120},onChange:function(e){t.netCard("interfaceType",n+1,e)}},H.a.map(te.h.port_type,(function(e,t){return G.a.createElement(Qn,{value:parseInt(t),key:t},e)})))}},{title:"网络设备",dataIndex:"networkDevice",width:340,render:function(e,a,n){return G.a.createElement("span",{className:"my-input"},G.a.createElement(pa,{title:"选择网络设备",allowClear:!0,disabledTip:"请先选择入库位置！",disabled:!t.props.houseId,fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/network/devices/choose?houseId=").concat(t.props.houseId),onSelect:function(e,a){t.netCard("networkDevice",n+1,a)}},G.a.createElement(U.a,{style:{width:340},placeholder:"请选择网络设备",value:a.networkDevice&&a.networkDevice.deviceName||""})))}},{title:"端口",dataIndex:"networkDevicePort",width:130,render:function(e,a,n){return G.a.createElement("span",{className:"my-input"},G.a.createElement(Ea,{title:"选择端口",disabled:!(a.networkDevice&&a.networkDevice.id),disabledTip:"请选择网络设备！",allowClear:!0,fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/network/devices/port?networkDeviceId=").concat(a.networkDevice&&a.networkDevice.id),onSelect:function(e,a){t.netCard("devicePort",n+1,a)}},G.a.createElement(U.a,{style:{width:120},placeholder:"请选择端口",value:a.devicePort&&a.devicePort.port||""})))}}]),t.state={serverId:t.props.serverInfo.id,houseId:t.props.houseId,ipmiIndex:1,lists:t.props.NetCardList},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this.state.lists;return G.a.createElement(G.a.Fragment,null,G.a.createElement(p.a,{bordered:!0,key:function(e){return e.id},dataSource:e,columns:this.columns,scroll:{x:1200}}))}}]),n}(G.a.Component),T()(Fn,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,portDict:K.a.any,powers:K.a.array,NetCardList:K.a.any,serverInfo:K.a.any,houseId:K.a.any,setSolts:K.a.func}),zn=Un))||zn)||zn)||zn);function Yn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var er,tr,ar,nr=v.a.Item,rr=z.a.Option,or=(Vn=Object(Y.b)("root"),Kn=Object(Y.b)("deviceDict"),Wn=Object(Y.b)("portDict"),Object(fe.g)(Hn=Vn(Hn=Kn(Hn=Wn((Jn=Zn=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if($n()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefSetNetworkCard",G.a.createRef()),T()(D()(t),"resetNum",(function(e){if(e<2)B.a.warning({title:"至少两张网卡"});else{var a=t.state.lists.length,n=H.a.cloneDeep(t.state.lists);if(e!=a){if(a>e)n.splice(e,a-e);else for(var r=a+1;r<=e;r++)n.push({index:r,speed:1e3,interfaceType:0,networkDeviceId:"",networkDevicePort:"",networkDevice:{},devicePort:{}});t.setState({lists:n})}}})),T()(D()(t),"netCard",(function(e,a,n){var r=aa()(t.state.lists);return"ipmi"==e?(t.setState({ipmiIndex:a}),void t.props.setSolts(r)):"speed"==e||"interfaceType"==e?(r[a-1][e]=n,t.setState({lists:r}),void t.props.setSolts(r)):"networkDevice"!=e?"devicePort"==e?(n.id?r[a-1].devicePort={id:n.id,port:n.port}:r[a-1].devicePort={id:null,port:null},t.setState({lists:r}),void t.props.setSolts(r)):void 0:void(n.id?(r[a-1].networkDevice={id:n.id,deviceName:n.deviceName},$.a.get("".concat(BSS_ADMIN_URL,"/api/product/network/devices/port?networkDeviceId=").concat(n.id,"&status=1")).then((function(e){if(e=e.data,ee.a.hasStatusOk(e)&&e.data.length>0){var n=e.data[0];r[a-1].devicePort={id:n.id,port:n.port}}else ee.a.dealFail(e),r[a-1].devicePort={id:null,port:null};t.setState({lists:r}),t.props.setSolts(r)})).catch((function(){r[a-1].devicePort={id:null,port:null},t.setState({lists:r}),t.props.setSolts(r)}))):(r[a-1].networkDevice={id:null,deviceName:null},r[a-1].devicePort={id:null,port:null},t.props.setSolts(r)))})),T()(D()(t),"columns",[{title:"网卡序号",dataIndex:"index",width:80,render:function(e,t,a){return"网卡".concat(a+1)}},{title:"网卡名称",dataIndex:"network",width:100},{title:"ipmi",dataIndex:"isIpmi",width:80,render:function(e,a,n){return G.a.createElement(z.a,{value:e,disabled:!0,style:{width:80},onChange:function(e){t.netCard("ipmi",n+1,e)}},G.a.createElement(rr,{value:1},"是"),G.a.createElement(rr,{value:0},"否"))}},{title:"网卡速率（M）",dataIndex:"speed",width:150,render:function(e,a,n){return G.a.createElement(ce.a,{value:e,maxLength:10,style:{width:150},onChange:function(e){t.netCard("speed",n+1,e)}})}},{title:"网口类型",width:150,dataIndex:"interfaceType",render:function(e,a,n){return G.a.createElement(z.a,{defaultValue:e,allowClear:!0,onChange:function(e){t.netCard("interfaceType",n+1,e)}},H.a.map(te.h.port_type,(function(e,t){return G.a.createElement(rr,{value:parseInt(t),key:t},e)})))}},{title:"网络设备",dataIndex:"networkDevice",width:340,render:function(e,a,n){return G.a.createElement("div",{className:"my-input"},G.a.createElement(pa,{title:"选择网络设备",allowClear:!0,disabledTip:"请先选择入库位置！",disabled:null==t.props.houseId,fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/network/devices/choose?houseId=").concat(t.props.houseId),onSelect:function(e,a){t.netCard("networkDevice",n+1,a)}},G.a.createElement(U.a,{style:{width:320},placeholder:"请选择网络设备",value:a.networkDevice&&a.networkDevice.deviceName||""})))}},{title:"端口",dataIndex:"devicePort",width:120,render:function(e,a,n){return G.a.createElement(G.a.Fragment,null,G.a.createElement(Ea,{title:"选择端口",disabled:!(a.networkDevice&&a.networkDevice.id),disabledTip:"请选择交换机！",allowClear:!0,fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/network/devices/port?networkDeviceId=").concat(a.networkDevice&&a.networkDevice.id),onSelect:function(e,a){t.netCard("devicePort",n+1,a)}},G.a.createElement(U.a,{style:{width:100},placeholder:"请选择端口",value:a.devicePort&&a.devicePort.port||""})))}}]),t.state={houseId:t.props.houseId,orgionLists:[],lists:t.props.defaultValues},t.resetNum=ra()(t.resetNum,800),t}return C()(n,[{key:"componentDidMount",value:function(){Object.keys(this.props.deviceDict.devicebrand).length<=0&&this.props.deviceDict.fetchDeviceBrand(),Object.keys(this.props.deviceDict.devicemodel).length<=0&&this.props.deviceDict.fetchDeviceModel()}},{key:"componentWillReceiveProps",value:function(e){if(e.houseId!=this.state.houseId&&this.state.lists.length>0){var t=[];H.a.map(this.state.lists,(function(e){t.push(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Yn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{networkDevice:{},devicePort:{}}))})),this.setState({lists:t,houseId:e.houseId})}}},{key:"render",value:function(){var e=this.state.lists;return G.a.createElement(G.a.Fragment,null,G.a.createElement(oe.a,null,G.a.createElement(nr,{name:"networkNumber",label:"网卡数量",rules:[{required:!0,pattern:me.a.num,message:"请输入数字"}]},G.a.createElement(ce.a,{onChange:this.resetNum,maxLength:2})),G.a.createElement("span",{style:{paddingLeft:10}},"(ipmi 和NIC1 的信息为必填项)")),G.a.createElement(p.a,{bordered:!0,key:function(e){return e.index},dataSource:e,columns:this.columns,scroll:{x:1e3}}))}}]),n}(G.a.Component),T()(Zn,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,portDict:K.a.any,deviceDict:K.a.any,powers:K.a.array,defaultValues:K.a.any,houseId:K.a.string,setSolts:K.a.func}),Hn=Jn))||Hn)||Hn)||Hn)||Hn);function ir(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function sr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var lr=v.a.Item,cr=U.a.TextArea,ur=z.a.Option,dr=(he.a.TreeNode,Object(Y.b)("root")(er=Object(Y.b)("deviceDict")(er=Object(Y.b)("serverDict")(er=Object(Y.b)("areaResouse")(er=Object(Y.b)("serverPartDict")(er=Object(Y.c)((ar=tr=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(sr()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefEdit",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.formRefEdit.current.resetFields()})),T()(D()(t),"onClose",(function(){t.props.onClose()})),T()(D()(t),"resetNodeNum",(function(e){t.setState({us:e,ubitInfo:{},regionInfo:{},cabinetInfo:{},nodeInfo:{},locationCode:null})})),T()(D()(t),"resetServerType",(function(e){t.setState({serverType:e,regionInfo:{},cabinetInfo:{},uBitInfo:{},nodeInfo:{},locationCode:null})})),T()(D()(t),"onSelectUBit",(function(e){var a=e.uBitInfo.uw+t.state.uw-1,n="".concat(e.regionInfo.fullLocationCode,"-").concat(e.cabinetInfo.row,"-").concat(e.cabinetInfo.coulmn,"-").concat(e.uBitInfo.uw,"U-").concat(a,"U");t.setState({ubitInfo:e.uBitInfo,regionInfo:e.regionInfo,cabinetInfo:e.cabinetInfo,locationCode:n,houseIdChange:e.regionInfo.houseId!=t.props.data.houseId})})),T()(D()(t),"onChange",(function(e){t.setState({serverStatus:e})})),t.state={showModal:!1,modalLoading:!1,uw:1,us:1,houseIdChange:!1,ubitInfo:{},regionInfo:{},cabinetInfo:{},masterInfo:{},nodeInfo:{},locationCode:t.props.data.serverLocationCode,serverCpuInfo:t.props.data.serverCpus,bussineTypeInfo:t.props.data.businessTypes||{},serverHardDiskInfo:t.props.data.serverDisk,serverRamInfo:t.props.data.serverMemory,serverRaidInfo:{},serverNetworkInfo:t.props.data.serverNetwork,serverType:t.props.data.serverType,serverStatus:t.props.data.serverStatus},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"onFinish",value:function(e){var t={},a=e;if(a.serverEditRecord&&(a.serverEditRecord.status=a.serverStatus,t.serverEditRecord=a.serverEditRecord),null!=this.state.bussineTypeInfo.id){if(a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ir(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,{version:this.props.data.version,businessType:this.state.bussineTypeInfo.id}),this.state.serverCpuInfo.length>0){var n=!1,r=[];if(console.log(this.state.serverCpuInfo),H.a.map(this.state.serverCpuInfo,(function(e,t){ee.a.isEmpty(e.cpuModelId)||(n=!0,r.push({cpuModelId:e.cpuModelId,cpuSlot:e.cpuSlot,version:e.version,workOrder:0}))})),!n)return void B.a.error({title:"cpu配置报错",content:"CPU型号是必填项！"});t.partCpuUpdateList=r}if(this.state.serverRamInfo.length>0){var o=[];H.a.map(this.state.serverRamInfo,(function(e,t){ee.a.isEmpty(e.memoryModelId)||o.push({memoryModelId:e.memoryModelId,memorySlot:e.memorySlot,version:e.version,workOrder:0})})),o.length>0&&(t.partMemoryUpdateList=o)}if(this.state.serverHardDiskInfo.length>0){var i=[];H.a.map(this.state.serverHardDiskInfo,(function(e){ee.a.isEmpty(e.diskModelId)||i.push({diskModelId:e.diskModelId,diskSlot:e.diskSlot,version:e.version,workOrder:0})})),i.length>0&&(t.partDiskUpdateList=i)}if(this.state.serverNetworkInfo){var s=[];H.a.map(this.state.serverNetworkInfo,(function(e){s.push(ee.a.clearNull({id:e.id,serverId:e.serverId,network:e.network,networkDeviceId:e.networkDevice&&e.networkDevice.id,networkDevicePort:e.devicePort&&e.devicePort.id,status:e.status,speed:e.speed,isIpmi:e.isIpmi,interfaceType:e.interfaceType,version:e.version}))})),t.partNetowrkUpdateList=s}t.server=a,console.log(t),this.props.onOk(t)}else B.a.error({title:"请选择业务类型！"})}},{key:"onSelectNode",value:function(e){var t="".concat(e.masterInfo.physicsLocationCode,"-").concat(e.nodeInfo.sort,"M");this.setState({regionInfo:e.regionInfo,cabinetInfo:e.cabinetInfo,masterInfo:e.masterInfo,nodeInfo:e.nodeInfo,locationCode:t,houseIdChange:e.regionInfo.houseId!=this.props.data.houseId})}},{key:"setBussineType",value:function(e,t){this.setState({bussineTypeInfo:t})}},{key:"setCpuSolts",value:function(e){console.log(e),this.setState({serverCpuInfo:e})}},{key:"setRamSolts",value:function(e){this.setState({serverRamInfo:e})}},{key:"setHardDiskSolts",value:function(e){this.setState({serverHardDiskInfo:e})}},{key:"setRaidSolts",value:function(e){this.setState({serverRaidInfo:e})}},{key:"setNetworkSolts",value:function(e){this.setState({serverNetworkInfo:e})}},{key:"render",value:function(){var e=this,t=this.state,a=(t.regionInfo,t.cabinetInfo,t.bussineTypeInfo),n=t.serverType,r=t.locationCode,o=t.serverStatus,i=this.props.areaResouse.houseList;return G.a.createElement(G.a.Fragment,null,G.a.createElement(v.a,{name:"form_in_modal",ref:this.formRefEdit,className:"g-modal-field",initialValues:this.props.data,onFinish:function(t){e.onFinish(t)}},G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:"服务器类型",name:"serverType",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{onChange:function(t){e.resetServerType(t)},disabled:!0},H.a.map(te.j.se_unittype,(function(e,t){return G.a.createElement(ur,{value:parseInt(t),key:t}," ",e)}))))),1==n&&G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:G.a.createElement("span",{className:"required"}," 入库位置"),style:{marginBottom:0}},ae.a),G.a.createElement(lr,{name:"serverUs",rules:[{required:!0,pattern:me.a.num,message:"请输入数字"}],style:{display:"inline-block",width:150}},G.a.createElement(ce.a,{disabled:!0})),G.a.createElement(f.a,{style:{width:120},disabled:!0}," 选择U位"))),2==n&&G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:G.a.createElement("span",{className:"required"}," 入库位置"),style:{marginBottom:0}},ae.a),G.a.createElement(lr,{name:"serverUs",rules:[{required:!0}],style:{display:"inline-block",width:150}},G.a.createElement(ce.a,{disabled:!0})),G.a.createElement(f.a,{style:{width:120},disabled:!0}," 选择节点"))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:G.a.createElement("span",{className:"required"}," 位置码")},ae.a),G.a.createElement(U.a,{placeholder:"自动生成",type:"text",disabled:!0,value:r}))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({name:"houseId",label:G.a.createElement("span",{className:"required"}," 机房")},ae.a),G.a.createElement(z.a,{disabled:!0,style:{width:200}},H.a.map(i,(function(e){return G.a.createElement(ur,{value:e.id,key:e.id},e.name)}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:"设备品牌",name:"serverBrand",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{disabled:!0},H.a.map(this.props.serverDict.server_brand,(function(e,t){return G.a.createElement(ur,{value:parseInt(t),key:t}," ",e," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:"机房",name:"houseId",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{disabled:!0},H.a.map(i,(function(e,t){return G.a.createElement(ur,{value:e.id,key:e.id}," ",e.fullName," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:"设备型号",name:"serverModel",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{disabled:!0},H.a.map(this.props.serverDict.server_model,(function(e,t){return G.a.createElement(ur,{value:parseInt(t),key:t}," ",e," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:"管理IP",name:"serverIp",rules:[{required:!0,pattern:me.a.ipv4,message:"请输入IPv4格式IP"}]},ae.a),G.a.createElement(U.a,{type:"text",placeholder:"请输入"}))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:"显示类型",name:"showMode",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{placeholder:"请选择",allowClear:!0},H.a.map(te.j.show_type,(function(e,t){return G.a.createElement(ur,{value:parseInt(t),key:t}," ",e," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:G.a.createElement("span",{className:"required"},"业务类型"),className:"my-input",rules:[{required:!0}]},ae.a),G.a.createElement(He,{title:"选择业务类型",allowClear:!0,fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/server/business/types"),onSelect:function(t,a){e.setBussineType(t,a)}},G.a.createElement(U.a,{style:{width:"100%"},placeholder:"选择业务类型",value:a.name||""})))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:"用途",name:"serverUseType",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{placeholder:"请选择",allowClear:!0},H.a.map(te.j.server_useage,(function(e,t){return G.a.createElement(ur,{value:parseInt(t),key:t}," ",e," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:"服务器状态",name:"serverStatus",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{placeholder:"服务器状态",allowClear:!0,onChange:this.onChange},H.a.map(te.j.server_status,(function(e,t){return G.a.createElement(ur,{value:parseInt(t),key:t}," ",e.text," ")}))))),3===o&&G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:"故障分类",name:["serverEditRecord","childStatusName"],rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{placeholder:"故障分类",allowClear:!0},H.a.map(this.props.serverDict.server_fault_category,(function(e,t){return G.a.createElement(ur,{value:parseInt(t),key:t}," ",e," ")}))))),3===o&&G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:"保留原因",name:["serverEditRecord","content"],rules:[{required:!0}]},ae.a),G.a.createElement(U.a,{type:"text",placeholder:"请输入"}))),4===o&&G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:"保留原因",name:["serverEditRecord","content"],rules:[{required:!0}]},ae.a),G.a.createElement(U.a,{type:"text",placeholder:"请输入"}))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:"销售状态",name:"status",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{placeholder:"销售状态",allowClear:!0},H.a.map(te.j.market,(function(e,t){return G.a.createElement(ur,{value:parseInt(t),key:t,disabled:2==t}," ",e.text," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(lr,d()({label:"发布状态",name:"releaseStatus",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{placeholder:"发布状态",allowClear:!0},H.a.map(te.j.releaseStatus,(function(e,t){return G.a.createElement(ur,{value:parseInt(t),key:t}," ",e," ")})))))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(lr,d()({label:"CPU配置"},ae.b),G.a.createElement(tn,{defaultValues:this.props.data.serverCpus,houseId:this.props.data.houseId,setSolts:function(t){e.setCpuSolts(t)}})))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(lr,d()({label:"内存配置"},ae.b),G.a.createElement(gn,{defultSolts:this.props.data.serverMemorySlot,defaultValues:this.props.data.serverMemory,houseId:this.props.data.houseId,houseIdChange:this.state.houseIdChange,setSolts:function(t){e.setRamSolts(t)}})))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(lr,d()({label:"硬盘配置"},ae.b),G.a.createElement(jn,{defultSolts:this.props.data.serverDiskSlot,defaultValues:this.props.data.serverDisk,houseId:this.props.data.houseId,setSolts:function(t){e.setHardDiskSolts(t)}})))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(lr,d()({label:"网卡配置"},ae.b),G.a.createElement(or,{defultSolts:this.props.data.networkNumber,houseId:this.props.data&&this.props.data.houseId,defaultValues:this.props.data.serverNetwork,setSolts:function(t){e.setNetworkSolts(t)}})))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(lr,d()({label:"raid卡配置"},ae.b),G.a.createElement(qn,{defaultValues:this.props.data.raidName,setSolts:function(t){e.setRaidSolts(t)}})))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(lr,d()({label:"备注",name:"remarks"},ae.b),G.a.createElement(cr,{autoSize:{minRows:5},placeholder:"请输入",maxLength:250})))),G.a.createElement("div",{className:"actions-btn"},G.a.createElement(f.a,{htmlType:"submit",className:"action-btn ok"},"确认提交"),G.a.createElement(f.a,{onClick:this.onClose,className:"action-btn ok"},"取消"))))}}]),n}(G.a.Component),T()(tr,"propTypes",{location:K.a.any,history:K.a.any,root:K.a.any,deviceDict:K.a.any,serverDict:K.a.any,areaResouse:K.a.any,serverPartDict:K.a.any,powers:K.a.array,data:K.a.any,onOk:K.a.func,onClose:K.a.func}),er=ar))||er)||er)||er)||er)||er)||er);function mr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var pr=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(mr()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefSeeNetCard",G.a.createRef()),T()(D()(t),"columns",[{title:"网卡名称",dataIndex:"network",width:80},{title:"ipmi",dataIndex:"isIpmi",width:50,render:function(e,t,a){return e?"是":"否"}},{title:"网卡速率（M）",dataIndex:"speed",width:120},{title:"网口类型",width:150,dataIndex:"interfaceType",render:function(e,t,a){return te.h.port_type[e]}},{title:"交换机",dataIndex:"switch",width:340,render:function(e,t){return t.networkDevice&&t.networkDevice.deviceName||""}},{title:"端口",dataIndex:"port",width:120,render:function(e,t){return t.devicePort&&t.devicePort.port||""}}]),t.state={ipmiIndex:1,lists:[]},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return G.a.createElement(G.a.Fragment,null,G.a.createElement(p.a,{bordered:!0,key:function(e){return e.id},dataSource:this.props.data,columns:this.columns}))}}]),n}(G.a.Component);T()(pr,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,powers:K.a.array,data:K.a.array});var hr,fr,yr,vr=pr;function gr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Sr,kr,Er,wr,br=v.a.Item,Ir=U.a.TextArea,Cr=z.a.Option,Rr=Object(Y.b)("root")(hr=Object(Y.b)("deviceDict")(hr=Object(Y.b)("serverDict")(hr=Object(Y.b)("serverPartDict")(hr=Object(Y.c)((yr=fr=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(gr()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),(t=a.call(this,e)).state={serverDetail:{},uw:1,us:1,ubitInfo:{},regionInfo:{},cabinetInfo:{},masterInfo:{},nodeInfo:{},locationCode:"",serverCpuInfo:{},bussineTypeInfo:{},serverHardDiskInfo:{},serverRamInfo:{},serverRaidInfo:{},serverNetworkInfo:{ipmiIndex:1,lists:[]},serverType:1},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this.props.data;return G.a.createElement(G.a.Fragment,null,G.a.createElement(v.a,{name:"form_in_modal",initialValues:e,className:"g-modal-field"},G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({label:"服务器类型",name:"serverType",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{disabled:!0},H.a.map(te.j.se_unittype,(function(e,t){return G.a.createElement(Cr,{value:parseInt(t),key:t}," ",e)}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({name:"serverLocationCode",label:G.a.createElement("span",{className:"required"}," 位置码")},ae.a),G.a.createElement(U.a,{placeholder:"自动生成",type:"text",disabled:!0}))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({label:"设备品牌",name:"serverBrand",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{disabled:!0},H.a.map(this.props.serverDict.server_brand,(function(e,t){return G.a.createElement(Cr,{value:parseInt(t),key:t}," ",e," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({label:"设备型号",name:"serverModel",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{disabled:!0},H.a.map(this.props.serverDict.server_model,(function(e,t){return G.a.createElement(Cr,{value:parseInt(t),key:t}," ",e," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({label:"管理IP",name:"serverIp",rules:[{required:!0}]},ae.a),G.a.createElement(U.a,{disabled:!0,type:"text",placeholder:"请输入"}))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({label:"服务器名称",name:"serverName",rules:[{required:!0}]},ae.a),G.a.createElement(U.a,{disabled:!0,type:"text",placeholder:"请输入"}))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({label:"显示类型",name:"showMode",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{disabled:!0,placeholder:"请选择",allowClear:!0},H.a.map(te.j.show_type,(function(e,t){return G.a.createElement(Cr,{value:parseInt(t),key:t}," ",e," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({label:G.a.createElement("span",{className:"required"},"业务类型")},ae.a),G.a.createElement(U.a,{disabled:!0,style:{width:"100%"},value:e.businessTypes&&e.businessTypes.name}))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({label:"用途",name:"serverUseType",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{disabled:!0,placeholder:"请选择",allowClear:!0},H.a.map(te.j.server_useage,(function(e,t){return G.a.createElement(Cr,{value:parseInt(t),key:t}," ",e," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({label:"服务器状态",name:"serverStatus",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{disabled:!0,placeholder:"服务器状态",allowClear:!0},H.a.map(te.j.server_status,(function(e,t){return G.a.createElement(Cr,{value:parseInt(t),key:t}," ",e.text," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({label:"故障分类",name:["serverEditRecord","childStatusName"],rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{disabled:!0,placeholder:"故障分类",allowClear:!0},H.a.map(this.props.serverDict.server_fault_category,(function(e,t){return G.a.createElement(Cr,{value:parseInt(t),key:t}," ",e," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({label:"保留原因",name:["serverEditRecord","content"],rules:[{required:!0}]},ae.a),G.a.createElement(U.a,{type:"text",placeholder:"请输入",disabled:!0}))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({label:"销售状态",name:"status",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{disabled:!0,placeholder:"销售状态",allowClear:!0},H.a.map(te.j.market,(function(e,t){return G.a.createElement(Cr,{value:parseInt(t),key:t}," ",e.text," ")}))))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({label:"采购时间",name:"purchasingTime",rules:[{required:!0}]},ae.a),G.a.createElement(se.a,{disabled:!0}))),G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:12,xl:12},G.a.createElement(br,d()({label:"入库时间",name:"storageTime",rules:[{required:!0}]},ae.a),G.a.createElement(se.a,{disabled:!0})))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(br,d()({label:G.a.createElement("span",{className:"required"},"cpu型号")},ae.b),G.a.createElement(oe.a,null,G.a.createElement(br,{name:"serverCpuSlot",label:"CPU数量",rules:[{required:!0}]},G.a.createElement(U.a,{style:{width:200},disabled:!0}))),G.a.createElement(oe.a,null,H.a.map(e.serverCpus,(function(e){return G.a.createElement("li",{className:"my-column",key:e.cpuSlot},G.a.createElement("span",{className:"column-label"},"序号",e.cpuSlot,":"),G.a.createElement(U.a,{value:e.cpuName,style:{width:400},disabled:!0}))})))))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(br,d()({label:G.a.createElement("span",{className:"required"},"内存配置")},ae.b),G.a.createElement(oe.a,null,G.a.createElement(br,{name:"serverMemorySlot",label:"内存插槽数",rules:[{required:!0}]},G.a.createElement(U.a,{disabled:!0})),G.a.createElement(br,{name:"serverMaxMemory",label:"最大支持容量（G）",rules:[{required:!0}]},G.a.createElement(ce.a,{disabled:!0})),G.a.createElement(br,{name:"serverOneMemory",label:"单槽支持最大容量（G）",rules:[{required:!0}]},G.a.createElement(ce.a,{disabled:!0})),G.a.createElement(br,{name:"serverMemoryType",label:"支持类型",rules:[{required:!0}]},G.a.createElement(z.a,{style:{width:150},disabled:!0},H.a.map(te.k.memory_type,(function(e,t){return G.a.createElement(Cr,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(br,{name:"serverMemorySpec",label:"支持规格",rules:[{required:!0}]},G.a.createElement(z.a,{style:{width:150},disabled:!0},H.a.map(te.k.mem_spec,(function(e,t){return G.a.createElement(Cr,{value:parseInt(t),key:t}," ",e," ")}))))),H.a.map(e.serverMemory,(function(e){return G.a.createElement("li",{className:"my-column",key:e.memorySlot},G.a.createElement("span",{className:"column-label"},"插槽",e.memorySlot,":"),G.a.createElement(U.a,{value:e.memoryName,style:{width:400},disabled:!0}))}))))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(br,d()({label:G.a.createElement("span",{className:"required"},"硬盘配置")},ae.b),G.a.createElement(oe.a,null,G.a.createElement(br,{name:"serverDiskSlot",label:"硬盘插槽数",maxLength:200,rules:[{required:!0}]},G.a.createElement(U.a,{disabled:!0})),G.a.createElement(br,{name:"serverDiskHot",label:"是否支持热插拔",rules:[{required:!0}]},G.a.createElement(z.a,{style:{width:150},disabled:!0},G.a.createElement(Cr,{value:1,key:1}," 是 "),G.a.createElement(Cr,{value:0,key:0}," 否 "))),G.a.createElement(br,{name:"diskInterfaceType",label:"接口类型",rules:[{required:!0}]},G.a.createElement(z.a,{style:{width:150},disabled:!0},H.a.map(te.k.disk_interface_type,(function(e,t){return G.a.createElement(Cr,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(br,{name:"serverDiskSpec",label:"支持规格",rules:[{required:!0,message:"请选择"}]},G.a.createElement(z.a,{style:{width:150},disabled:!0},H.a.map(te.k.server_disk_spec,(function(e,t){return G.a.createElement(Cr,{value:parseInt(t),key:t}," ",e," ")}))))),H.a.map(e.serverDisk,(function(e){return G.a.createElement("li",{className:"my-column",key:e.diskSlot},G.a.createElement("span",{className:"column-label required"},"插槽",e.diskSlot,":"),G.a.createElement(U.a,{value:e.diskName,style:{width:400},disabled:!0}))}))))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(br,d()({label:"网卡配置"},ae.b),G.a.createElement(oe.a,null,G.a.createElement(br,{name:"networkNumber",label:"网卡数量",rules:[{required:!0}]},G.a.createElement(ce.a,{disabled:!0})),G.a.createElement("span",{style:{paddingLeft:10}},"(ipmi 和NIC1 的信息为必填项)")),G.a.createElement(vr,{data:e.serverNetwork})))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(S.a,null),G.a.createElement(br,d()({label:"raid卡配置"},ae.b),G.a.createElement(br,{name:"isRaid",label:"是否支持raid卡",rules:[{required:!0}]},G.a.createElement(z.a,{style:{width:100},disabled:!0},G.a.createElement(Cr,{value:1,key:1}," 是 "),G.a.createElement(Cr,{value:0,key:0}," 否 "))),G.a.createElement(br,{name:"isUseRaid",label:"是否有raid卡",rules:[{required:!!e.isRaid}]},G.a.createElement(z.a,{style:{width:100},disabled:!0},G.a.createElement(Cr,{value:1,key:1}," 是 "),G.a.createElement(Cr,{value:0,key:0}," 否 "))),G.a.createElement(br,{label:"raid卡型号"},G.a.createElement(U.a,{disabled:!0,value:e.raidModelId}))))),G.a.createElement(oe.a,null,G.a.createElement(de.a,{xs:24,sm:24,md:24,lg:24,xl:24},G.a.createElement(br,d()({label:"备注",name:"remarks"},ae.b),G.a.createElement(Ir,{disabled:!0,autoSize:{minRows:5},placeholder:"请输入",maxLength:250}))))))}}]),n}(G.a.Component),T()(fr,"propTypes",{location:K.a.any,history:K.a.any,root:K.a.any,deviceDict:K.a.any,serverDict:K.a.any,serverPartDict:K.a.any,powers:K.a.array,data:K.a.any,onOk:K.a.func,onClose:K.a.func}),hr=yr))||hr)||hr)||hr)||hr)||hr;function Dr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Or(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Dr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function xr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.a.Item,U.a.TextArea;var Nr,Pr,Mr,jr,Lr=z.a.Option;he.a.TreeNode,Sr=Object(Y.b)("root"),Object(fe.g)(kr=Sr((wr=Er=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(xr()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefAdd",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.formRefAdd.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectAreaNode={},t.selectedRows=[],t.regionId="",t.uw=0,t.state={nwoData:{},lists:[],page:1,pageSize:10,loading:!1,showModal:!1},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=H.a.assign({},{page:this.state.page,pageSize:this.state.pageSize},this.searchParam,Or({},t));this.setState({loading:!0}),$.a.get(this.props.fetchPath,{params:a}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data.records,total:t.data.total}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t[0]),this.setState({showModal:!1})}},{key:"onSearch",value:function(e){this.searchParam=e,this.setState({page:1}),this.getDetail(e)}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.getDetail(Or({page:e,pageSize:t},this.searchParam))}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.getDetail(Or({page:e,pageSize:t},this.searchParam))}},{key:"modalShow",value:function(){this.props.disabled&&B.a.warning({titile:this.props.disabledTip}),this.getDetail(),this.setState({showModal:!0})}},{key:"makeColumns",value:function(){return[{title:"内存编号",dataIndex:"memCode",key:"memCode"},{title:"内存位置码",dataIndex:"houseLocationCode",key:"houseLocationCode"},{title:"内存型号名称",dataIndex:"memName",key:"memName",render:function(e,t){return t.memorymodelList[0]&&t.memorymodelList[0].memName||""}},{title:"内存类型",dataIndex:"memType",key:"memType",render:function(e,t){var a=t.memorymodelList[0]&&t.memorymodelList[0].memType||"";return te.k.memory_type[a]}},{title:"支持规格",dataIndex:"memSpec",key:"memSpec",render:function(e,t){var a=t.memorymodelList[0]&&t.memorymodelList[0].memSpec||"";return te.k.mem_spec[a]}},{title:"内存容量(GB)",dataIndex:"memSize",key:"memSize",render:function(e,t){return t.memorymodelList[0]&&t.memorymodelList[0].memSize||""}},{title:"存放机房",dataIndex:"houseName",key:"houseName"},{title:"采购时间",dataIndex:"purchasingTime",key:"purchasingTime",render:function(e,t){return ee.a.getTime(e)}},{title:"入库时间",dataIndex:"storageTime",key:"storageTime",render:function(e,t){return ee.a.getTime(e)}},{title:"资源归属",dataIndex:"resourceAttribution",key:"resourceAttribution",render:function(e,t){return te.k.resource_attribution[e]}},{title:"归属方",dataIndex:"customerName",key:"customerName"},{title:"显示类型",dataIndex:"showType",key:"showType",render:function(e,t){return te.k.show_type[e]}},{title:"发布状态",dataIndex:"releaseStatus",key:"releaseStatus",render:function(e,t){return te.k.releaseStatus[e]}},{title:"资源状态",dataIndex:"saleStatus",key:"saleStatus",render:function(e,t){return ee.a.renderStatus(te.k.parts_res_status,e)}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:this.props.title||"选择内存卡",maskClosable:!1,width:"98%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"memCode"},G.a.createElement(U.a,{allowClear:!0,placeholder:"请输入内存编号"})),G.a.createElement(v.a.Item,{name:"memName"},G.a.createElement(U.a,{allowClear:!0,placeholder:"请输入内存名称"})),G.a.createElement(v.a.Item,{name:"memSize"},G.a.createElement(U.a,{allowClear:!0,placeholder:"请输入内存容量"})),G.a.createElement(v.a.Item,{name:"resourceAttribution"},G.a.createElement(z.a,{style:{width:140},allowClear:!0,placeholder:"请选择资源归属"},H.a.map(te.k.resource_attribution,(function(e,t){return G.a.createElement(Lr,{key:t,value:parseInt(t)},e)})))),G.a.createElement(v.a.Item,{name:"customerName"},G.a.createElement(U.a,{allowClear:!0,placeholder:"请输入资源归属方名称"})),G.a.createElement(v.a.Item,{name:"showType"},G.a.createElement(z.a,{style:{width:140},allowClear:!0,placeholder:"请选择显示类型"},H.a.map(te.k.show_type,(function(e,t){return G.a.createElement(Lr,{key:t,value:parseInt(t)},e)})))),G.a.createElement(v.a.Item,null,G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}})),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:this.state.page,total:this.state.total,pageSize:this.state.pageSize,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))),G.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(G.a.Component),T()(Er,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,children:K.a.any,powers:K.a.array,disabled:K.a.bool,disabledTip:K.a.string,title:K.a.string,style:K.a.any,fetchPath:K.a.string,onSelect:K.a.func}),kr=wr))||kr);function Tr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function zr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.a.Item,U.a.TextArea;var Fr,Ur,Ar,Br,qr,Gr=z.a.Option,Vr=(he.a.TreeNode,Nr=Object(Y.b)("root"),Object(fe.g)(Pr=Nr((jr=Mr=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(zr()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"formRefSearch",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.formRefSearch.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectedRows=[],t.searchParam={},t.state={lists:[],page:1,pageSize:10,loading:!1,showModal:!1},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=H.a.assign({},{page:this.state.page,pageSize:this.state.pageSize},this.searchParam,_r({},t));this.setState({loading:!0}),$.a.get(this.props.fetchPath,{params:a}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data.records,total:t.data.total}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t[0]),this.setState({showModal:!1})}},{key:"onSearch",value:function(e){this.searchParam=e,this.setState({page:1}),this.getDetail(e)}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.getDetail({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.getDetail({page:e,pageSize:t})}},{key:"modalShow",value:function(){this.getDetail(),this.setState({showModal:!0})}},{key:"makeColumns",value:function(){return[{title:"内存型号名称",dataIndex:"memName",key:"memName"},{title:"产品组",dataIndex:"productMapId",key:"productMapId"},{title:"内存容量(GB)",dataIndex:"memSize",key:"memSize"},{title:"内存主频(MHZ)",dataIndex:"memHz",key:"memHz"},{title:"内存品牌",dataIndex:"memBrand",key:"memBrand"},{title:"内存型号",dataIndex:"memModel",key:"memModel"},{title:"内存规格",dataIndex:"memSpec",key:"memSpec",render:function(e,t){return te.k.mem_spec[e]||""}},{title:"内存类型",dataIndex:"memType",key:"memType",render:function(e,t){return te.k.memory_type[e]||""}},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:"选择内存卡型号",maskClosable:!1,width:"98%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"memType"},G.a.createElement(z.a,{style:{width:240},allowClear:!0,placeholder:"请选择内存类型"},H.a.map(te.k.memory_type,(function(e,t){return G.a.createElement(Gr,{value:t,key:t},e)})))),G.a.createElement(v.a.Item,{name:"memSize"},G.a.createElement(U.a,{placeholder:"请输入内存容量",allowClear:!0})),G.a.createElement(v.a.Item,{name:"memBrand"},G.a.createElement(U.a,{allowClear:!0,placeholder:"请输入内存品牌"})),G.a.createElement(v.a.Item,{name:"memSpec"},G.a.createElement(z.a,{style:{width:240},allowClear:!0,placeholder:"请选择内存规格"},H.a.map(te.k.mem_spec,(function(e,t){return G.a.createElement(Gr,{value:t,key:t},e)})))),G.a.createElement(v.a.Item,{shouldUpdate:!0},G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索"),G.a.createElement(f.a,{type:"primary",onClick:this.onResetSearch},"重置")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}})),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:this.state.page,total:this.state.total,pageSize:this.state.pageSize,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))),G.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(G.a.Component),T()(Mr,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,children:K.a.any,powers:K.a.array,onSelect:K.a.func,fetchPath:K.a.func}),Pr=jr))||Pr)||Pr);function Kr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Wr,Hr,Zr,Jr,Qr=(Fr=Object(Y.b)("root"),Ur=Object(Y.b)("deviceDict"),Object(fe.g)(Ar=Fr(Ar=Ur(Ar=Object(Y.c)((qr=Br=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(Kr()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"onClose",(function(){t.flag_updateList&&t.props.updateList(),t.setState({modalShow:!1})})),t.formRefAdd=G.a.createRef(),t.searchFormRef=G.a.createRef(),t.flag_updateList=!1,t.state={nowData:{},lists:[],page:1,pageSize:10,total:0,loading:!1,modalShow:!1,modalLoading:!1},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"onGetListData",value:function(e){var t=this;this.setState({loading:!0}),$.a.get("".concat(BSS_ADMIN_URL,"/api/product/server/memory?ServerId=").concat(this.props.Serverinfo.id),{params:e}).then((function(e){e=e.data,ee.a.hasStatusOk(e)?t.setState({lists:e.data.records,total:e.data.total}):ee.a.dealFail(e),t.setState({loading:!1})})).catch((function(){t.setState({loading:!1})}))}},{key:"onDel",value:function(e){var t=this;B.a.confirm({icon:G.a.createElement(X.a,null),content:"确认要移除这个内存条吗？",onOk:function(){t.setState({loading:!0}),$.a.delete("".concat(BSS_ADMIN_URL,"/api/product/server/memory/").concat(e,"/delete")).then((function(e){e=e.data,ee.a.hasStatusOk(e)?(ee.a.auto_close_result("ok","操作成功"),t.onGetListData(),t.flag_updateList=!0):(ee.a.dealFail(e),t.setState({loading:!1}))})).catch((function(){t.setState({loading:!1})}))},onCancel:function(){console.log("Cancel")}})}},{key:"onModalShow",value:function(e,t){if(null==this.props.Serverinfo.id)return B.a.error({title:"这条服务器没有id"}),!1;this.onGetListData(),this.setState({modalShow:!0})}},{key:"onEditRam",value:function(e,t,a){var n=this;this.setState({modalLoading:!0}),$.a.put("".concat(BSS_ADMIN_URL,"/api/product/server/memory/").concat(e.id,"/edit"),{replaceMemoryId:a.id,version:e.version,workOrder:0}).then((function(e){e=e.data,ee.a.hasStatusOk(e)?(n.setState({modalLoading:!1}),ee.a.auto_close_result("ok","操作成功"),n.flag_updateList=!0,n.onGetListData()):(ee.a.dealFail(e),n.setState({modalLoading:!1}))})).catch((function(){n.setState({modalLoading:!1})}))}},{key:"onAddRam",value:function(e,t,a){var n=this;$.a.post("".concat(BSS_ADMIN_URL,"/api/product/server/memory/add"),{serverId:e.serverId,memoryModelId:a.id,memorySlot:e.memorySlot,isInit:1,workOrder:0}).then((function(e){e=e.data,ee.a.hasStatusOk(e)?(n.setState({modalLoading:!1}),ee.a.auto_close_result("ok","操作成功"),n.flag_updateList=!0,n.onGetListData()):ee.a.dealFail(e),n.setState({modalLoading:!1})})).catch((function(){n.setState({modalLoading:!1})}))}},{key:"makeColumns",value:function(){var e=this,t=[{title:"卡槽",dataIndex:"memorySlot",width:150,key:"memorySlot"},{title:"内存大小",dataIndex:"memorySize",width:150,key:"memorySize",render:function(e,t){return t.memoryModelId&&t.memoryModelId.trim()?e:""}},{title:"内存型号名称",dataIndex:"memoryName",width:150,key:"memoryName"},{title:"资源状态",dataIndex:"memoryStatus",width:150,key:"memoryStatus",render:function(e,t){return t.memoryModelId&&t.memoryModelId.trim()&&e?(e=parseInt(e),ee.a.renderStatus(te.k.parts_res_status,e)):""}}];return this.props.canOpt&&t.push({title:"操作",key:"control",fixed:"right",width:160,render:function(t,a){var n=[],r=(e.props.root.userinfo,e.props.root.powers,!(!a.memoryModelId||!a.memoryModelId.trim()));r&&n.push(G.a.createElement(Vr,{fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/memorymodel"),title:"选择内存型号",onSelect:function(t,n){e.onEditRam(a,t,n)}},G.a.createElement(E.a,{placement:"top",title:"修改"},G.a.createElement(J.a,null)))),!r&&n.push(G.a.createElement(Vr,{fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/memorymodel"),title:"选择内存型号",onSelect:function(t,n){e.onAddRam(a,t,n)}},G.a.createElement(E.a,{placement:"top",title:"添加"},G.a.createElement(J.a,null)))),r&&n.push(G.a.createElement("span",{key:"1",className:"control-btn red",onClick:function(){return e.onDel(a.id)}},G.a.createElement(E.a,{placement:"top",title:"移除"},G.a.createElement(Q.a,null))));var o=[];return n.forEach((function(e,t){t&&o.push(G.a.createElement(S.a,{key:"line".concat(t),type:"vertical"})),o.push(e)})),o}}),t}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.onGetListData({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.onGetListData({page:e,pageSize:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.loading,r=t.page,o=t.pageSize,i=t.total,s=(t.modalLoading,t.modalShow);t.operateType,t.nowData;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:this.props.title||"内存卡",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:s},G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:n,dataSource:a,pagination:!1}),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:r,total:i,pageSize:o,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}})))),G.a.createElement("span",{onClick:function(){e.onModalShow()}},this.props.children))}}]),n}(G.a.Component),T()(Br,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,powers:K.a.array,Serverinfo:K.a.any,canOpt:K.a.bool}),Ar=qr))||Ar)||Ar)||Ar)||Ar);function Xr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Yr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function $r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var eo,to,ao,no=z.a.Option;Wr=Object(Y.b)("root"),Object(fe.g)(Hr=Wr((Jr=Zr=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if($r()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"searchFormRef",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.searchFormRef.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectAreaNode={},t.selectedRows=[],t.searchParam={},t.state={lists:[],page:1,pageSize:10,loading:!1,showModal:!1},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({loading:!0}),$.a.get(this.props.fetchPath,{params:Yr({},t,{},this.searchParam)}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data.records,total:t.data.total}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t[0]),this.setState({showModal:!1})}},{key:"onSearch",value:function(e){this.searchParam=ee.a.clearEmpty(e),this.setState({page:1}),this.getDetail({page:1})}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.getDetail({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.getDetail({page:e,pageSize:t})}},{key:"modalShow",value:function(){this.props.disabled&&B.a.warning({titile:this.props.disabledTip}),this.getDetail(),this.setState({showModal:!0})}},{key:"makeColumns",value:function(){return[{title:"硬盘编号",dataIndex:"diskCode",key:"diskCode"},{title:"位置码",dataIndex:"houseLocationCode",key:"houseLocationCode"},{title:"硬盘型号名称",dataIndex:"diskName",key:"diskName",render:function(e,t){return t.diskmodelList[0]&&t.diskmodelList[0].diskName||""}},{title:"硬盘容量(G)",dataIndex:"diskSize",key:"diskSize",render:function(e,t){return t.diskmodelList[0]&&t.diskmodelList[0].diskSize||""}},{title:"规格",dataIndex:"diskMeasure",key:"diskMeasure",render:function(e,t){return te.k.server_disk_spec[t.diskmodelList[0]&&t.diskmodelList[0].diskMeasure]||""}},{title:"接口类型",dataIndex:"interfaceType",key:"interfaceType",render:function(e,t){return te.k.disk_interface_type[t.diskmodelList[0]&&t.diskmodelList[0].interfaceType]||""}},{title:"存放机房",dataIndex:"houseName",key:"houseName"},{title:"归属方",dataIndex:"customerName",key:"customerName"},{title:"使用服务器",dataIndex:"serverManagerIp",key:"serverManagerIp"},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:this.props.title||"选择硬盘",maskClosable:!1,width:"98%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"diskName"},G.a.createElement(U.a,{allowClear:!0,placeholder:"请输入硬盘名称"})),G.a.createElement(v.a.Item,{name:"interfaceType"},G.a.createElement(z.a,{style:{width:150},placeholder:"硬盘接口类型",allowClear:!0},H.a.map(te.k.disk_interface_type,(function(e,t){return G.a.createElement(no,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(v.a.Item,{name:"diskMeasure"},G.a.createElement(z.a,{style:{width:150},placeholder:"硬盘规格",allowClear:!0},H.a.map(te.k.server_disk_spec,(function(e,t){return G.a.createElement(no,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(v.a.Item,null,G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}})),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:this.state.page,total:this.state.total,pageSize:this.state.pageSize,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))),G.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(G.a.Component),T()(Zr,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,children:K.a.any,powers:K.a.array,disabled:K.a.bool,disabledTip:K.a.string,title:K.a.string,style:K.a.any,fetchPath:K.a.string,onSelect:K.a.func}),Hr=Jr))||Hr);function ro(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function oo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ro(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function io(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.a.Item,U.a.TextArea;var so,lo,co,uo,mo,po=z.a.Option,ho=(he.a.TreeNode,Object(fe.g)((ao=to=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(io()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"searchFormRef",G.a.createRef()),T()(D()(t),"onResetSearch",(function(){t.searchFormRef.current.resetFields()})),T()(D()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectedRows=[],t.searchParam={},t.state={lists:[],page:1,pageSize:10,loading:!1,showModal:!1},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({loading:!0});var a=oo({},t,{},this.searchParam);$.a.get(this.props.fetchPath,{params:a}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data.records,total:t.data.total}):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t[0]),this.setState({showModal:!1})}},{key:"onSearch",value:function(e){this.searchParam=ee.a.clearEmpty(e),this.setState({page:1}),this.getDetail({page:1})}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.getDetail({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.getDetail({page:e,pageSize:t})}},{key:"modalShow",value:function(){this.getDetail(),this.setState({showModal:!0})}},{key:"makeColumns",value:function(){return[{title:"硬盘型号名称",dataIndex:"diskName",key:"diskName"},{title:"品牌",dataIndex:"diskBrand",key:"diskBrand"},{title:"型号",dataIndex:"diskModel",key:"diskModel"},{title:"硬盘类型简称",dataIndex:"diskShort",key:"diskShort",render:function(e,t){return te.k.disk_short[e]||""}},{title:"规格",dataIndex:"diskMeasure",key:"diskMeasure",render:function(e,t){return te.k.server_disk_spec[e]||""}},{title:"接口类型",dataIndex:"interfaceType",key:"interfaceType",render:function(e,t){return te.k.disk_interface_type[e]||""}},{title:"缓存(MB)",dataIndex:"diskCache",key:"diskCache"},{title:"转速",dataIndex:"diskRpm",key:"diskRpm"},{title:"硬盘容量",dataIndex:"diskSize",key:"diskSize"},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:"选择硬盘型号",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:n},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"diskName"},G.a.createElement(U.a,{placeholder:"硬盘型号名称",allowClear:!0})),G.a.createElement(v.a.Item,{name:"interfaceType"},G.a.createElement(z.a,{style:{width:150},placeholder:"硬盘接口类型",allowClear:!0},H.a.map(te.k.disk_interface_type,(function(e,t){return G.a.createElement(po,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(v.a.Item,{name:"diskMeasure"},G.a.createElement(z.a,{style:{width:150},placeholder:"硬盘规格",allowClear:!0},H.a.map(te.k.server_disk_spec,(function(e,t){return G.a.createElement(po,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(v.a.Item,null,G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索"),G.a.createElement(f.a,{type:"primary",onClick:this.onResetSearch},"重置")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}})),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:this.state.page,total:this.state.total,pageSize:this.state.pageSize,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))),G.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(G.a.Component),T()(to,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,children:K.a.any,onSelect:K.a.func,fetchPath:K.a.string}),eo=ao))||eo);function fo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var yo,vo,go,So,ko,Eo=(so=Object(Y.b)("root"),lo=Object(Y.b)("deviceDict"),Object(fe.g)(co=so(co=lo(co=Object(Y.c)((mo=uo=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(fo()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"onClose",(function(){t.flag_updateList&&t.props.updateList(),t.setState({modalShow:!1})})),t.formRefAdd=G.a.createRef(),t.searchFormRef=G.a.createRef(),t.flag_updateList=!1,t.state={nowData:{},lists:[],page:1,pageSize:10,total:0,loading:!1,modalShow:!1,modalLoading:!1},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"onGetListData",value:function(e){var t=this;this.setState({loading:!0}),$.a.get("".concat(BSS_ADMIN_URL,"/api/product/server/disk?ServerId=").concat(this.props.Serverinfo.id),{params:e}).then((function(e){e=e.data,ee.a.hasStatusOk(e)?t.setState({lists:e.data.records,total:e.data.total}):ee.a.dealFail(e),t.setState({loading:!1})})).catch((function(){t.setState({loading:!1})}))}},{key:"onDel",value:function(e){var t=this;B.a.confirm({icon:G.a.createElement(X.a,null),content:"确认要移除这个硬盘条吗？",onOk:function(){t.setState({loading:!0}),$.a.delete("".concat(BSS_ADMIN_URL,"/api/product/server/disk/").concat(e,"/delete")).then((function(e){e=e.data,ee.a.hasStatusOk(e)?(ee.a.auto_close_result("ok","操作成功"),t.onGetListData(),t.flag_updateList=!0):(ee.a.dealFail(e),t.setState({loading:!1}))})).catch((function(){t.setState({loading:!1})}))},onCancel:function(){console.log("Cancel")}})}},{key:"onModalShow",value:function(e,t){if(null==this.props.Serverinfo.id)return B.a.error({title:"这条服务器没有id"}),!1;this.onGetListData(),this.setState({modalShow:!0})}},{key:"onEditHardDisk",value:function(e,t,a){var n=this;this.setState({modalLoading:!0}),$.a.put("".concat(BSS_ADMIN_URL,"/api/product/server/disk/").concat(e.id,"/edit"),{diskReplaceId:a.id,version:e.version,workOrder:0}).then((function(e){e=e.data,ee.a.hasStatusOk(e)?(n.setState({modalLoading:!1}),ee.a.auto_close_result("ok","操作成功"),n.flag_updateList=!0,n.onGetListData()):(n.setState({modalLoading:!1}),ee.a.dealFail(e))})).catch((function(){n.setState({modalLoading:!1})}))}},{key:"onAddHardDisk",value:function(e,t,a){var n=this;$.a.post("".concat(BSS_ADMIN_URL,"/api/product/server/disk/add"),{serverId:e.serverId,diskModelId:a.id,diskSlot:e.diskSlot,isInit:1,workOrder:0}).then((function(e){e=e.data,ee.a.hasStatusOk(e)?(n.setState({modalLoading:!1}),ee.a.auto_close_result("ok","操作成功"),n.flag_updateList=!0,n.onGetListData()):ee.a.dealFail(e),n.setState({modalLoading:!1})})).catch((function(){n.setState({modalLoading:!1})}))}},{key:"makeColumns",value:function(){var e=this,t=[{title:"卡槽",dataIndex:"diskSlot",width:150,key:"diskSlot"},{title:"硬盘大小",dataIndex:"diskSize",width:150,key:"diskSize",render:function(e,t){return t.diskModelId&&t.diskModelId.trim()?e:""}},{title:"硬盘型号名称",dataIndex:"diskName",width:150,key:"diskName"},{title:"资源状态",dataIndex:"diskStatus",width:150,key:"diskStatus",render:function(e,t){return t.diskModelId&&t.diskModelId.trim()&&e?(e=parseInt(e),ee.a.renderStatus(te.k.parts_res_status,e)):""}}];return this.props.canOpt&&t.push({title:"操作",key:"control",fixed:"right",width:160,render:function(t,a){var n=[],r=(e.props.root.userinfo,e.props.root.powers,!(!a.diskModelId||!a.diskModelId.trim()));r&&n.push(G.a.createElement(ho,{fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/diskmodel"),title:"选择硬盘型号",onSelect:function(t,n){e.onEditHardDisk(a,t,n)}},G.a.createElement(E.a,{placement:"top",title:"修改"},G.a.createElement(J.a,null)))),!r&&n.push(G.a.createElement(ho,{fetchPath:"".concat(BSS_ADMIN_URL,"/api/product/diskmodel"),title:"选择硬盘型号",onSelect:function(t,n){e.onAddHardDisk(a,t,n)}},G.a.createElement(E.a,{placement:"top",title:"添加"},G.a.createElement(J.a,null)))),r&&n.push(G.a.createElement("span",{key:"1",className:"control-btn red",onClick:function(){return e.onDel(a.id)}},G.a.createElement(E.a,{placement:"top",title:"移除"},G.a.createElement(Q.a,null))));var o=[];return n.forEach((function(e,t){t&&o.push(G.a.createElement(S.a,{key:"line".concat(t),type:"vertical"})),o.push(e)})),o}}),t}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.onGetListData({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.onGetListData({page:e,pageSize:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.loading,r=t.page,o=t.pageSize,i=t.total,s=(t.modalLoading,t.modalShow);t.operateType,t.nowData;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:this.props.title||"硬盘卡",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:s},G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:n,dataSource:a,pagination:!1}),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,{current:r,total:i,pageSize:o,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}})))),G.a.createElement("span",{onClick:function(){e.onModalShow()}},this.props.children))}}]),n}(G.a.Component),T()(uo,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,powers:K.a.array,Serverinfo:K.a.any,canOpt:K.a.bool}),co=mo))||co)||co)||co)||co);function wo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}yo=Object(Y.b)("root"),vo=Object(Y.b)("deviceDict"),Object(fe.g)(go=yo(go=vo(go=Object(Y.c)((ko=So=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(wo()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"onClose",(function(){t.flag_updateList&&t.props.updateList(),t.setState({modalShow:!1})})),t.formRefAdd=G.a.createRef(),t.searchFormRef=G.a.createRef(),t.flag_updateList=!1,t.state={lists:t.props.data,page:1,pageSize:10,total:0,loading:!1,modalShow:!1,modalLoading:!1},t}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"onSearch",value:function(e){var t=new RegExp(e.ipAddr),a=H.a.filter(this.props.data,(function(e){return t.test(e.ipAddr)}));this.setState({lists:a})}},{key:"onModalShow",value:function(){this.setState({modalShow:!0})}},{key:"makeColumns",value:function(){return[{title:"IP",dataIndex:"ipAddr",width:150,key:"ipAddr"},{title:"客户名称",dataIndex:"customerName",width:150,key:"customerName"}]}},{key:"render",value:function(){var e=this,t=this.state.modalShow;return G.a.createElement(G.a.Fragment,null,G.a.createElement(B.a,{title:this.props.title||"业务ip",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:t},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"ipAddr",label:"业务IP"},G.a.createElement(U.a,null)),G.a.createElement(v.a.Item,null,G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索")))),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},dataSource:this.state.lists}))),G.a.createElement("span",{className:"mytag light-blue",onClick:function(){e.onModalShow()},style:{cursor:"pointer"}},this.props.data&&this.props.data[0]&&this.props.data[0].ipAddr,"(",this.props.data&&this.props.data.length||"null",")"))}}]),n}(G.a.Component),T()(So,"propTypes",{location:K.a.any,history:K.a.any,match:K.a.any,root:K.a.any,powers:K.a.array,Serverinfo:K.a.any,canOpt:K.a.bool}),go=ko))||go)||go)||go);var bo,Io,Co,Ro=a(16),Do=a.n(Ro),Oo=a(52);a(1736);function xo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function No(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xo(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Po(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Mo=B.a.confirm,jo=U.a.TextArea,Lo=z.a.Option,To=Object(Y.b)("root")(bo=Object(Y.b)("serverDict")(bo=Object(Y.b)("areaResouse")(bo=Object(Y.c)((Co=Io=function(e){x()(n,e);var t,a=(t=n,function(){var e,a=j()(t);if(Po()){var n=j()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return P()(this,e)});function n(e){var t;return b()(this,n),t=a.call(this,e),T()(D()(t),"searchFormRef",G.a.createRef()),T()(D()(t),"export",(function(){ee.a.download("".concat(BSS_ADMIN_URL,"/api/product/server/excel/export"),t.searchParam)})),T()(D()(t),"onGetListData",(function(e){var a=H.a.assign({},{page:t.state.page,pageSize:t.state.pageSize},t.searchParam,No({},e));t.setState({loading:!0}),$.a.get("".concat(BSS_ADMIN_URL,"/api/product/server"),{params:ee.a.clearEmpty(a)}).then((function(e){e=e.data,ee.a.hasStatusOk(e)?(t.selectedRows=[],t.setState({lists:e.data.records,total:e.data.total,loading:!1,selectedRowKeys:[]})):(t.setState({loading:!1}),ee.a.dealFail(e))})).catch((function(){t.setState({loading:!1})}))})),T()(D()(t),"onResetSearch",(function(){t.searchFormRef.current.resetFields()})),T()(D()(t),"onReserveShow",(function(){if(t.selectedRows.length<=0)return B.a.warning({title:"请至少选择一条可用的数据",content:""}),!1;var e=!0;if(t.selectedRows.forEach((function(t){1!=t.status&&(e=!1)})),!e)return B.a.warning({title:"请选择可用的数据预约",content:""}),!1;t.setState({customerShow:!0})})),T()(D()(t),"onSelectCustomer",(function(e){t.setState({subscribeCustomer:e[0]})})),t.selectedRows=[],t.searchParam={},t.state={lists:[],loading:!1,page:1,pageSize:5,total:0,selectedRowKeys:[],modalShow:!1,modalLoading:!1,nowData:{},modalEditShow:!1,modalSeeShow:!1,customerShow:!1,statusShow:!1,subscribeCustomer:{},NetCardList:[],currentNetCard:{}},t}return C()(n,[{key:"componentDidMount",value:function(){this.onGetListData(),this.props.areaResouse.houseList.length<=0&&this.props.areaResouse.fetchHouse(),this.props.areaResouse.vareaList.length<=0&&this.props.areaResouse.fetchVarea(),Object.keys(this.props.serverDict.server_model).length<=0&&this.props.serverDict.fetchServerModel(),Object.keys(this.props.serverDict.server_brand).length<=0&&this.props.serverDict.fetchServerBrand(),Object.keys(this.props.serverDict.server_fault_category).length<=0&&this.props.serverDict.fetchServerFaultStatus()}},{key:"makeColumns",value:function(){var e=this,t=this.props.serverDict.server_brand,a=this.props.serverDict.server_model;return[{title:"服务器类型",dataIndex:"serverType",key:"serverType",width:110,render:function(e,t){return te.j.se_unittype[e]||"未知类型"}},{title:"管理IP",dataIndex:"serverIp",key:"serverIp",width:150,render:function(t,a,n){return G.a.createElement("span",{className:"mytag light-blue",onClick:function(){e.onModalShowEdit("see",a.id)}},t)}},{title:"区域",dataIndex:"locationId",key:"locationId",render:function(t){var a=H.a.find(e.props.areaResouse.vareaList,(function(e){return e.fullLocationId==t}));return a&&a.fullLocationName}},{title:"机柜号",dataIndex:"cabinetsName",key:"cabinetsName",width:100},{title:"内存(G)",width:120,dataIndex:"serverCurrentMemory",key:"serverCurrentMemory",render:function(t,a){return G.a.createElement(Qr,{Serverinfo:a,canOpt:2!=a.status,updateList:e.onGetListData},G.a.createElement("span",{className:"mytag light-blue"},"内存：",t))}},{title:"硬盘(G)",width:120,dataIndex:"serverCurrentDisk",key:"serverCurrentDisk",render:function(t,a){return G.a.createElement(Eo,{Serverinfo:a,canOpt:2!=a.status,updateList:e.onGetListData},G.a.createElement("span",{className:"mytag light-blue"},"硬盘：",t))}},{title:"网卡",dataIndex:"networkNumber",key:"networkNumber",width:80,render:function(t,a){return G.a.createElement("span",{className:"mytag light-blue",onClick:function(){e.onModalShowNetCard(a)}},t)}},{title:"CPU个数",dataIndex:"serverCpu",key:"serverCpu",width:70,render:function(e,t){return t.serverCpuSlot}},{title:"CPU型号",dataIndex:"serverCpus",key:"serverCpus",width:200,render:function(e,t){return t.serverCpus?t.serverCpus[0].cpuName:"UNKNOW"}},{title:"销售状态",dataIndex:"status",key:"status",width:100,render:function(e){return ee.a.renderStatus(te.j.market,e)}},{title:"品牌",dataIndex:"serverModel",key:"serverModel",width:100,render:function(e,a){return t[a.serverBrand]||void 0}},{title:"型号",dataIndex:"serverBrand",key:"serverBrand",width:100,render:function(e,t){return a[t.serverModel]||void 0}},{title:"业务类型",dataIndex:"businessTypes",key:"businessTypes",width:120,render:function(e,t){return t.businessTypes&&t.businessTypes.name||"UNKNOW"}},{title:"服务器状态",dataIndex:"serverStatus",key:"serverStatus",width:110,render:function(e){return ee.a.renderStatus(te.j.server_status,e)}},{title:"Raid卡",dataIndex:"raidName",key:"raidName",width:120},{title:"发布状态",dataIndex:"releaseStatus",key:"releaseStatus",width:100,render:function(e,t){return te.j.releaseStatus[e]||"unknow"}},{title:"备注",dataIndex:"remarks",key:"remarks",width:100},{title:"操作",key:"control",fixed:"right",width:120,render:function(t,a){var n=[];n.push(G.a.createElement("span",{key:"0",className:"control-btn green"},G.a.createElement(E.a,{placement:"top",title:"查看"},G.a.createElement(Z.a,{onClick:function(){e.onModalShowEdit("see",a.id)}})))),Oo.a.hasPermission("server-update")&&2!=a.status&&n.push(G.a.createElement("span",{key:"1",className:"control-btn blue"},G.a.createElement(E.a,{placement:"top",title:"修改"},G.a.createElement(J.a,{onClick:function(){e.onModalShowEdit("up",a.id)}})))),Oo.a.hasPermission("server-update")&&2==a.status&&n.push(G.a.createElement("span",{key:"1",className:"control-btn blue"},G.a.createElement(E.a,{placement:"top",title:"修改备注"},G.a.createElement(J.a,{onClick:function(){e.onModalShowRemark(a)}})))),Oo.a.hasPermission("server-del1")&&a.status,n.push(G.a.createElement("span",{key:"2",className:"control-btn red"},G.a.createElement(E.a,{placement:"top",title:"删除"},G.a.createElement(Q.a,{onClick:function(){e.onDel(a.id)}}))));var r=[];return n.forEach((function(e,t){t&&r.push(G.a.createElement(S.a,{key:"line".concat(t),type:"vertical"})),r.push(e)})),r}}]}},{key:"onSearch",value:function(e){this.searchParam=ee.a.clearEmpty(e),this.setState({page:1}),this.onGetListData(this.searchParam)}},{key:"onPageChange",value:function(e,t){this.setState({page:e}),this.onGetListData({page:e,pageSize:t})}},{key:"onPageSizeChange",value:function(e,t){this.setState({page:e,pageSize:t}),this.onGetListData({page:e,pageSize:t})}},{key:"onModalShow",value:function(e){var t={serverType:1,serverUs:1,networkNumber:3,status:1,serverStatus:2};if("tempadd"==e&&1!=this.state.selectedRowKeys.length)return B.a.warning({title:"请选择一条数据作为模板"}),!1;if("tempadd"==e){var a=this.selectedRows[0];t={remarks:a.remarks,serverBrand:a.serverBrand,serverModel:a.serverModel,serverType:a.serverType||1,serverDiskSpec:a.serverDiskSpec,serverDiskHot:a.serverDiskHot,serverDiskSlot:a.serverDiskSlot,diskInterfaceType:a.diskInterfaceType,serverOneMemory:a.serverOneMemory,serverMemorySlot:a.serverMemorySlot,serverCpuSlot:a.serverCpuSlot,serverMaxMemory:a.serverMaxMemory,serverMemoryType:a.serverMemoryType,serverMemorySpec:a.serverMemorySpec,serverUs:1,serverUseType:a.serverUseType,status:a.status,market:a.market,showMode:a.showMode,businessType:a.businessType,networkNumber:a.networkNumber||3,releaseStatus:a.releaseStatus}}this.setState({nowData:t,modalShow:!0})}},{key:"onStatusShow",value:function(){if(this.state.selectedRowKeys.length<1)return B.a.warning({title:"请选择至少一条服务器信息"}),!1;this.setState({statusShow:!0})}},{key:"onStatusOk",value:function(e){var t=this;if(null!=e.status){this.setState({modalLoading:!0});var a=[];H.a.map(this.selectedRows,(function(t){a.push({serverId:t.id,version:t.version,saleStatus:e.status})})),$.a.post("".concat(BSS_ADMIN_URL,"/api/product/server/batch/status"),a).then((function(e){e=e.data,ee.a.hasStatusOk(e)?(ee.a.auto_close_result("ok","操作成功"),t.setState({modalLoading:!1,statusShow:!1}),t.onGetListData()):(t.setState({modalLoading:!1}),ee.a.dealFail(e))})).catch((function(){t.setState({modalLoading:!1})}))}}},{key:"onModalShowEdit",value:function(e,t){this.getDetail(e,t)}},{key:"onModalShowRemark",value:function(e){this.setState({nowData:e,remarksShow:!0})}},{key:"onModalShowNetCard",value:function(e){var t=this;this.setState({loading:!0}),$.a.get("".concat(BSS_ADMIN_URL,"/api/product/server/network"),{params:{serverId:e.id}}).then((function(a){if(a=a.data,ee.a.hasStatusOk(a)){var n=a.data;t.setState({nowData:e,NetCardList:n,onModalShowNetCard:!0,loading:!1})}else t.setState({loading:!1}),ee.a.dealFail(a)})).catch((function(){t.setState({loading:!1})}))}},{key:"onNetCardOk",value:function(){var e=this;if(0!=this.state.currentNetCard.length){var t=[];H.a.map(this.state.currentNetCard,(function(e){t.push(ee.a.clearNull({id:e.id,serverId:e.serverId,network:e.network,networkDeviceId:e.networkDevice&&e.networkDevice.id,networkDevicePort:e.devicePort&&e.devicePort.id,status:e.status,speed:e.speed,isIpmi:e.isIpmi,interfaceType:e.interfaceType,version:e.version}))})),this.setState({modalLoading:!0}),$.a.put("".concat(BSS_ADMIN_URL,"/api/product/server/network/batch/edit"),t).then((function(t){t=t.data,ee.a.hasStatusOk(t)?(ee.a.auto_close_result("ok","操作成功"),e.setState({modalLoading:!1,onModalShowNetCard:!1}),e.onGetListData()):(e.setState({modalLoading:!1}),ee.a.dealFail(t))})).catch((function(){e.setState({modalLoading:!1})}))}else B.a.warning({title:"没有数据发生变更！"})}},{key:"changeNetCard",value:function(e){this.setState({currentNetCard:e})}},{key:"onRemarkOk",value:function(e){var t=this,a={server:No({},e,{version:this.state.nowData.version})};this.setState({modalLoading:!0}),$.a.put("".concat(BSS_ADMIN_URL,"/api/product/server/").concat(this.state.nowData.id,"/edit"),ee.a.clearNull(a)).then((function(e){e=e.data,ee.a.hasStatusOk(e)?(ee.a.auto_close_result("ok","操作成功"),t.setState({modalLoading:!1,remarksShow:!1}),t.onGetListData()):(t.setState({modalLoading:!1}),ee.a.dealFail(e))})).catch((function(){t.setState({modalLoading:!1})}))}},{key:"setReserveCustomer",value:function(){console.log("缺少接口")}},{key:"getDetail",value:function(e,t){var a=this;this.setState({loading:!0}),$.a.get("".concat(BSS_ADMIN_URL,"/api/product/server/").concat(t,"/get")).then((function(t){if(t=t.data,ee.a.hasStatusOk(t)){var n=t.data,r=a.props.serverDict.server_brand,o=a.props.serverDict.server_model[n.serverModel]||void 0,i=r[n.serverBrand]||void 0,s="".concat(i,"_").concat(o,"_").concat(n.serverSpec);return n.serverName=s,n.purchasingTime=Do()(n.purchasingTime),n.storageTime=Do()(n.storageTime),"see"==e?void a.setState({nowData:n,modalSeeShow:!0,loading:!1}):void a.setState({nowData:n,modalEditShow:!0,loading:!1})}a.setState({loading:!1}),ee.a.dealFail(t)})).catch((function(){a.setState({loading:!1})}))}},{key:"onModalOk",value:function(e){var t=this;this.setState({modalLoading:!0}),$.a.post("".concat(BSS_ADMIN_URL,"/api/product/server/add"),ee.a.clearNull(e)).then((function(e){e=e.data,ee.a.hasStatusOk(e)?(ee.a.auto_close_result("ok","操作成功"),t.setState({modalLoading:!1,modalShow:!1}),t.onGetListData()):(t.setState({modalLoading:!1}),ee.a.dealFail(e))})).catch((function(){t.setState({modalLoading:!1})}))}},{key:"onModalEditOk",value:function(e){var t=this;this.setState({modalLoading:!0}),$.a.put("".concat(BSS_ADMIN_URL,"/api/product/server/").concat(this.state.nowData.id,"/edit"),ee.a.clearNull(e)).then((function(e){e=e.data,ee.a.hasStatusOk(e)?(ee.a.auto_close_result("ok","操作成功"),t.setState({modalLoading:!1,modalEditShow:!1}),t.onGetListData()):(t.setState({modalLoading:!1}),ee.a.dealFail(e))})).catch((function(){t.setState({modalLoading:!1})}))}},{key:"onModalClose",value:function(){this.setState({modalShow:!1,modalEditShow:!1,modalSeeShow:!1,customerShow:!1,remarksShow:!1,onModalShowNetCard:!1,statusShow:!1})}},{key:"batchDel",value:function(){var e=this;if(this.state.selectedRowKeys.length<=0)return B.a.warning({title:"请至少选择一条数据!"}),!1;Mo({icon:G.a.createElement(X.a,null),content:"确认要执行批量删除吗？",onOk:function(){e.setState({loading:!0}),$.a.delete("".concat(BSS_ADMIN_URL,"/api/product/server/batch/delete"),{data:{serverIds:e.state.selectedRowKeys}}).then((function(t){t=t.data,ee.a.hasStatusOk(t)?(ee.a.auto_close_result("ok","操作成功"),e.onGetListData(),e.setState({selectedRowKeys:[]})):(ee.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))},onCancel:function(){console.log("Cancel")}})}},{key:"onDel",value:function(e){var t=this;Mo({icon:G.a.createElement(X.a,null),content:"确认要删除这条数据吗？",onOk:function(){t.setState({loading:!0}),$.a.delete("".concat(BSS_ADMIN_URL,"/api/product/server/").concat(e,"/delete")).then((function(e){e=e.data,ee.a.hasStatusOk(e)?(ee.a.auto_close_result("ok","操作成功"),t.onGetListData()):(ee.a.dealFail(e),t.setState({loading:!1}))})).catch((function(){t.setState({loading:!1})}))},onCancel:function(){console.log("Cancel")}})}},{key:"onSelectedRow",value:function(e,t){this.setState({selectedRowKeys:e}),this.selectedRows=t}},{key:"render",value:function(){var e=this,t=this.props.areaResouse,a=t.houseList,n=t.vareaList,r=this.state,o=r.lists,i=r.loading,s=r.page,l=r.pageSize,u=r.total,m=r.nowData,h=r.selectedRowKeys,y=r.subscribeCustomer;return G.a.createElement("main",{className:"mian"},G.a.createElement("div",{className:"g-search"},G.a.createElement(v.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.onSearch(t)}},G.a.createElement(v.a.Item,{name:"houseId"},G.a.createElement(z.a,{allowClear:!0,placeholder:"请选择机房",style:{width:300},showSearch:!0,filterOption:ee.a.filterOption},a.map((function(e){return G.a.createElement(Lo,{value:e.id,key:e.id},e.fullName)})))),G.a.createElement(v.a.Item,{name:"locationId"},G.a.createElement(z.a,{allowClear:!0,placeholder:"请选择区域",style:{width:300},showSearch:!0,filterOption:ee.a.filterOption},n.map((function(e){return G.a.createElement(Lo,{value:e.fullLocationId,key:e.fullLocationId},e.fullLocationName)})))),G.a.createElement(v.a.Item,{name:"serverType"},G.a.createElement(z.a,{style:{width:150},placeholder:"设备类型",allowClear:!0},H.a.map(te.j.se_unittype,(function(e,t){return G.a.createElement(Lo,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(v.a.Item,{name:"cabinetName"},G.a.createElement(U.a,{placeholder:"机柜名称",allowClear:!0})),G.a.createElement(v.a.Item,{name:"serverIp"},G.a.createElement(U.a,{placeholder:"管理IP",allowClear:!0})),G.a.createElement(v.a.Item,{name:"businessIp"},G.a.createElement(U.a,{placeholder:"业务IP",allowClear:!0})),G.a.createElement(v.a.Item,{name:"status"},G.a.createElement(z.a,{style:{width:150},placeholder:"销售状态",allowClear:!0},H.a.map(te.j.market,(function(e,t){return G.a.createElement(Lo,{value:parseInt(t),key:t}," ",e.text," ")})))),G.a.createElement(v.a.Item,{name:"serverStatus"},G.a.createElement(z.a,{style:{width:150},placeholder:"服务器状态",allowClear:!0},H.a.map(te.j.server_status,(function(e,t){return G.a.createElement(Lo,{value:parseInt(t),key:t}," ",e.text," ")})))),G.a.createElement(v.a.Item,{name:"releaseStatus"},G.a.createElement(z.a,{style:{width:150},placeholder:"发布状态",allowClear:!0},H.a.map(te.j.releaseStatus,(function(e,t){return G.a.createElement(Lo,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(v.a.Item,{name:"serverUseType"},G.a.createElement(z.a,{style:{width:150},placeholder:"用途",allowClear:!0},H.a.map(te.j.server_useage,(function(e,t){return G.a.createElement(Lo,{value:parseInt(t),key:t}," ",e," ")})))),G.a.createElement(v.a.Item,{name:"remarks"},G.a.createElement(U.a,{placeholder:"备注",allowClear:!0,style:{width:300}})),G.a.createElement(v.a.Item,{shouldUpdate:!0},G.a.createElement(f.a,{type:"primary",htmlType:"submit"},"搜索")),G.a.createElement(v.a.Item,{shouldUpdate:!0},G.a.createElement(f.a,{type:"primary",onClick:this.onResetSearch},"重置")))),G.a.createElement("div",{className:"g-operate"},Oo.a.hasPermission("server-del")&&G.a.createElement(f.a,{className:"actions-btn",size:"middle",onClick:function(){e.batchDel()}},"批量出库"),Oo.a.hasPermission("server-add")&&G.a.createElement(f.a,{className:"actions-btn",size:"middle",onClick:function(){e.onModalShow("add")}},"服务器入库"),Oo.a.hasPermission("server-add")&&G.a.createElement(f.a,{className:"actions-btn",size:"middle",onClick:function(){e.onModalShow("tempadd")}},"服务器模板入库"),Oo.a.hasPermission("server-update")&&G.a.createElement(f.a,{className:"actions-btn",size:"middle",onClick:function(){e.onStatusShow()}},"批量修改销售状态"),G.a.createElement(f.a,{onClick:this.export,className:"actions-btn",size:"middle"},"导出"),G.a.createElement(f.a,{onClick:function(){ee.a.download("".concat(BSS_ADMIN_URL,"/api/product/server/template/download"))},className:"actions-btn",size:"middle"},"下载模板"),Oo.a.hasPermission("server-update")&&G.a.createElement(ne.a,{filetext:"上传模板",url:"".concat(BSS_ADMIN_URL,"/api/product/server/excel/import")},G.a.createElement(f.a,{className:"actions-btn",size:"middle"},"服务器导入")),G.a.createElement(f.a,{disabled:!0,size:"middle",onClick:function(){e.onReserveShow()}},"预留")),G.a.createElement("div",{className:"g-table"},G.a.createElement(p.a,{scroll:{x:2200},columns:this.makeColumns(),rowKey:function(e){return e.id},loading:i,dataSource:o,pagination:!1,rowSelection:{type:"checkbox",selectedRowKeys:h,onChange:function(t,a){e.onSelectedRow(t,a)}}}),G.a.createElement("div",{className:"g-pagination"},G.a.createElement(c.a,d()({current:s,total:u,pageSize:l},ae.i,{showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}})))),G.a.createElement(B.a,{title:"服务器入库",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:null,onCancel:function(){return e.onModalClose()},visible:this.state.modalShow,modalLoading:this.state.modalLoading},G.a.createElement(Aa,{data:m,onOk:function(t){return e.onModalOk(t)},onClose:function(){return e.onModalClose()}})),G.a.createElement(B.a,{title:"服务器编辑",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:null,onCancel:function(){return e.onModalClose()},visible:this.state.modalEditShow,modalLoading:this.state.modalLoading},G.a.createElement(dr,{data:m,onOk:function(t){return e.onModalEditOk(t)},onClose:function(){return e.onModalClose()}})),G.a.createElement(B.a,{title:"服务器查看",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:null,onCancel:function(){return e.onModalClose()},visible:this.state.modalSeeShow,modalLoading:this.state.modalLoading},G.a.createElement(Rr,{data:m,onClose:function(){return e.onModalClose()}})),G.a.createElement(B.a,{visible:this.state.customerShow,width:500,destroyOnClose:!0,onCancel:function(){e.onModalClose},onOk:this.onCutomerok,title:"选择预约方",okText:"确定",cancelText:"取消"},G.a.createElement(v.a,{className:"g-modal-field"},G.a.createElement(v.a.Item,d()({label:"预约客户"},ae.a),G.a.createElement(U.a,{placeholder:"请选择",disabled:!0,style:{width:120},value:y.name}),G.a.createElement(f.a,{style:{display:"inline-block"}},G.a.createElement(Ba.a,{onSelect:this.onSelectCustomer},"选择"))))),G.a.createElement(B.a,{visible:this.state.remarksShow,modalLoading:this.state.modalLoading,width:600,destroyOnClose:!0,onCancel:function(){e.onModalClose()},footer:!1,title:"修改服务器备注"},G.a.createElement(v.a,{className:"g-modal-field",initialValues:{remarks:m&&m.remarks},onFinish:function(t){e.onRemarkOk(t)}},G.a.createElement(v.a.Item,d()({label:"备注",name:"remarks"},ae.a),G.a.createElement(jo,{placeholder:"请输入",maxLength:250})),G.a.createElement("div",{className:"actions-btn"},G.a.createElement(f.a,{htmlType:"submit",className:"action-btn ok"},"确认提交"),G.a.createElement(f.a,{onClick:function(){e.onModalClose()},className:"action-btn ok"},"取消")))),G.a.createElement(B.a,{visible:this.state.statusShow,modalLoading:this.state.modalLoading,width:600,destroyOnClose:!0,onCancel:function(){e.onModalClose()},footer:!1,title:"批量修改销售状态"},G.a.createElement(v.a,{className:"g-modal-field",onFinish:function(t){e.onStatusOk(t)}},G.a.createElement(v.a.Item,d()({label:"销售状态",name:"status",rules:[{required:!0}]},ae.a),G.a.createElement(z.a,{placeholder:"销售状态",allowClear:!0},H.a.map(te.j.market,(function(e,t){return G.a.createElement(Lo,{value:parseInt(t),key:t,disabled:2==t}," ",e.text," ")})))),G.a.createElement("div",{className:"actions-btn"},G.a.createElement(f.a,{htmlType:"submit",className:"action-btn ok"},"确认提交"),G.a.createElement(f.a,{onClick:function(){e.onModalClose()},className:"action-btn ok"},"取消")))),G.a.createElement(B.a,{visible:this.state.onModalShowNetCard,modalLoading:this.state.modalLoading,width:"90%",destroyOnClose:!0,onCancel:function(){e.onModalClose()},onOk:function(){e.onNetCardOk()},title:"修改服务器网卡连接"},G.a.createElement(Xn,{serverInfo:m,houseId:m&&m.houseId,NetCardList:this.state.NetCardList,setSolts:function(t){e.changeNetCard(t)}})))}}]),n}(G.a.Component),T()(Io,"propTypes",{location:K.a.any,history:K.a.any,deviceDict:K.a.any,serverDict:K.a.any,areaResouse:K.a.any}),bo=Co))||bo)||bo)||bo)||bo},1599:function(e,t,a){"use strict";a(47);var n,r,o,i=a(17),s=a.n(i),l=a(15),c=a.n(l),u=a(19),d=a.n(u),m=a(6),p=a.n(m),h=a(20),f=a.n(h),y=a(21),v=a.n(y),g=a(13),S=a.n(g),k=a(2),E=a.n(k),w=(a(58),a(11)),b=a.n(w),I=a(0),C=a.n(I),R=a(1),D=a.n(R),O=a(23),x=a(5),N=a.n(x),P=a(9);function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var j=b.a.Option,L=Object(O.b)("root")(n=Object(O.b)("areaResouse")(n=Object(O.c)((o=r=function(e){f()(n,e);var t,a=(t=n,function(){var e,a=S()(t);if(M()){var n=S()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return v()(this,e)});function n(e){var t;return c()(this,n),t=a.call(this,e),E()(p()(t),"onSelect",(function(e,a){if(console.log(a),!e)return!1;t.selectNode={regionId:e,regionTitle:a.title,record:a.rowdata},t.props.onSearch(e,t.selectNode)})),E()(p()(t),"onUpdate",(function(){t.props.areaResouse.fetchRegion()})),t.selectNode={},t.state={selectNode:null,data:[]},t}return d()(n,[{key:"componentDidMount",value:function(){this.props.areaResouse.regionList.length<=0&&this.props.areaResouse.fetchRegion()}},{key:"render",value:function(){var e=this.props.areaResouse.regionList;return C.a.createElement(C.a.Fragment,null,C.a.createElement(b.a,{onChange:this.onSelect,placeholder:"请选择区域：地区-机房-区域",style:{width:300},onSearch:this.onSearch,allowClear:!0,showSearch:!0,filterOption:P.a.filterOption},N.a.map(e,(function(e){return C.a.createElement(j,{value:e.id,key:e.id,rowdata:e,title:e.locationCode}," ",e.locationCode," ")}))),C.a.createElement(s.a,{onClick:this.onUpdate},"更新区域"))}}]),n}(C.a.Component),E()(r,"propTypes",{areaResouse:D.a.any,onSearch:D.a.func,onClose:D.a.func,visible:D.a.bool,selectedIds:D.a.string}),n=o))||n)||n)||n;t.a=L},1601:function(e,t,a){"use strict";a(173);var n,r,o,i=a(84),s=a.n(i),l=(a(65),a(25)),c=a.n(l),u=(a(172),a(105)),d=a.n(u),m=(a(152),a(78)),p=a.n(m),h=a(15),f=a.n(h),y=a(19),v=a.n(y),g=a(6),S=a.n(g),k=a(20),E=a.n(k),w=a(21),b=a.n(w),I=a(13),C=a.n(I),R=a(2),D=a.n(R),O=a(0),x=a.n(O),N=a(1),P=a.n(N),M=(a(5),a(18)),j=a(1596),L=a(23),T=a(99),_=a(9),z=a(26);function F(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var U=Object(T.g)(n=Object(L.c)((o=r=function(e){E()(n,e);var t,a=(t=n,function(){var e,a=C()(t);if(F()){var n=C()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return b()(this,e)});function n(e){var t;return f()(this,n),t=a.call(this,e),D()(S()(t),"onClose",(function(){t.setState({modalShow:!1})})),t.selectAreaNode={},t.state={lists:[],loading:!1,modalShow:!1,page:1,pageSize:20,total:0},t}return v()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getLog",value:function(e){var t=this;this.setState({loading:!0}),M.a.get("".concat(BSS_ADMIN_URL,"/api/product/usagerecord"),{params:{uLocationId:this.props.uLocationId}}).then((function(e){e=e.data,_.a.hasStatusOk(e)?t.setState({loading:!1,lists:e.data.records}):(_.a.dealFail(e),t.setState({loading:!1}))})).catch((function(){t.setState({loading:!1})}))}},{key:"onPageChange",value:function(e,t){this.getLog(e,t)}},{key:"onPageSizeChange",value:function(e,t){this.getLog(e,t)}},{key:"onModalShow",value:function(){this.setState({modalShow:!0}),this.getLog()}},{key:"makeColumns",value:function(){return[{title:"管理ip",dataIndex:"managementIp",key:"managementIp"},{title:"设备",dataIndex:"deviceName",key:"deviceName"},{title:"设备类型",dataIndex:"type",key:"type",render:function(e,t){return z.f.uw_facility[e]}},{title:"出库时间",dataIndex:"outboundTime",key:"outboundTime",render:function(e,t){return _.a.getTime(e)}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.modalShow,r=t.loading,o=t.page,i=t.total;return x.a.createElement(x.a.Fragment,null,x.a.createElement("main",{className:"mian"},x.a.createElement(c.a,{title:"出库记录",maskClosable:!1,width:"80%",destroyOnClose:!0,onCancel:this.onClose,footer:null,visible:n},x.a.createElement("div",{className:"g-table"},x.a.createElement(p.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a}),x.a.createElement(d.a,{size:"small",current:o,total:i,showSizeChanger:!0,onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}})))),x.a.createElement("span",{className:"control-btn green",onClick:function(){return e.onModalShow()}},x.a.createElement(s.a,{placement:"top",title:"出库记录"},x.a.createElement(j.a,null))))}}]),n}(x.a.Component),D()(r,"propTypes",{location:P.a.any,history:P.a.any,match:P.a.any,root:P.a.any,powers:P.a.array,data:P.a.any,uLocationId:P.a.string}),n=o))||n)||n;t.a=U},1604:function(e,t,a){"use strict";a(65);var n,r,o,i,s,l=a(25),c=a.n(l),u=(a(152),a(78)),d=a.n(u),m=(a(47),a(17)),p=a.n(m),h=a(15),f=a.n(h),y=a(19),v=a.n(y),g=a(6),S=a.n(g),k=a(20),E=a.n(k),w=a(21),b=a.n(w),I=a(13),C=a.n(I),R=a(2),D=a.n(R),O=(a(416),a(192)),x=a.n(O),N=(a(58),a(11)),P=a.n(N),M=(a(98),a(55)),j=a.n(M),L=(a(60),a(12)),T=a.n(L),_=a(0),z=a.n(_),F=a(1),U=a.n(F),A=a(5),B=a.n(A),q=a(18),G=a(23),V=a(99),K=(a(3),a(28),a(9));function W(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}T.a.Item,j.a.TextArea,P.a.Option,x.a.TreeNode;var H=(n=Object(G.b)("root"),r=Object(G.b)("cabinetDict"),Object(V.g)(o=n(o=r(o=Object(G.c)((s=i=function(e){E()(n,e);var t,a=(t=n,function(){var e,a=C()(t);if(W()){var n=C()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return b()(this,e)});function n(e){var t;return f()(this,n),t=a.call(this,e),D()(S()(t),"onReset",(function(){t.searchFormRef.current.resetFields()})),D()(S()(t),"onClose",(function(){t.setState({showModal:!1})})),D()(S()(t),"selectedRow",(function(e,a){t.props.onSelect(a),t.setState({showModal:!1})})),t.selectedRows=[],t.searchFormRef=z.a.createRef(),t.searchCondition={},t.state={lists:[],loading:!1,showModal:!1,pageNum:1,page_size:20,total:0,pages:0},t}return v()(n,[{key:"componentDidMount",value:function(){this.onGetMListData(this.state.pageNum,this.state.page_size)}},{key:"onGetMListData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=B.a.assign({},this.searchCondition,t);this.setState({loading:!0}),q.a.get("".concat(BSS_ADMIN_URL,"/api/customer/manage/options"),{params:K.a.clearNull(a)}).then((function(t){if(t=t.data,K.a.hasStatusOk(t)){var a=t.data.records;e.setState({lists:a,total:t.data.total,pages:t.data.pages,pageNum:t.data.current})}else K.a.dealFail(t);e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"modalShow",value:function(){this.setState({showModal:!0})}},{key:"onSearch",value:function(e){this.searchCondition=e,this.onGetMListData(e)}},{key:"makeColumns",value:function(){return[{title:"名称",dataIndex:"name",key:"name"},{title:"简称",dataIndex:"account",key:"account"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading,o=t.total,i=t.page_size,s={current:t.pageNum,total:o,defaultPageSize:i,onChange:function(t){return e.onGetMListData({page:t})}},l=this.props.operateType;return z.a.createElement("main",{className:"mian"},z.a.createElement(c.a,{title:this.props.title||"选择",maskClosable:!1,width:"55%",destroyOnClose:!0,footer:null,onCancel:this.onClose,visible:"uw"===this.props.type?this.props.visible:n},z.a.createElement("div",{className:"g-search"},z.a.createElement(T.a,{ref:this.searchFormRef,name:"horizontal_login",layout:"inline",onFinish:function(t){e.onSearch(t)}},z.a.createElement(T.a.Item,{name:"keyword"},z.a.createElement(j.a,{style:{width:150},allowClear:!0,placeholder:"请输入名称"})),z.a.createElement(T.a.Item,{shouldUpdate:!0},z.a.createElement(p.a,{type:"primary",htmlType:"submit"},"搜索")),z.a.createElement(T.a.Item,{shouldUpdate:!0},z.a.createElement(p.a,{type:"primary",htmlType:"reset",onClick:this.onReset},"重置")),z.a.createElement(T.a.Item,{shouldUpdate:!0},z.a.createElement(p.a,{type:"primary",htmlType:"submit",onClick:function(){return e.onGetMListData}},"刷新")))),z.a.createElement("div",{className:"g-table"},z.a.createElement(d.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:s,size:"small",rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}}))),z.a.createElement("span",{onClick:function(){e.modalShow()},style:"see"===l?{display:"none"}:{display:"flex"}},this.props.children))}}]),n}(z.a.Component),D()(i,"propTypes",{location:U.a.any,history:U.a.any,match:U.a.any,root:U.a.any,cabinetDict:U.a.any,powers:U.a.array,defaultData:U.a.any,onOk:U.a.func,onClose:U.a.func}),o=s))||o)||o)||o)||o);t.a=H},1622:function(e,t,a){"use strict";a(47);var n,r,o,i=a(17),s=a.n(i),l=a(15),c=a.n(l),u=a(19),d=a.n(u),m=a(6),p=a.n(m),h=a(20),f=a.n(h),y=a(21),v=a.n(y),g=a(13),S=a.n(g),k=a(2),E=a.n(k),w=(a(65),a(25)),b=a.n(w),I=(a(58),a(11)),C=a.n(I),R=(a(60),a(12)),D=a.n(R),O=a(0),x=a.n(O),N=a(1),P=a.n(N),M=a(23),j=a(5),L=a.n(j),T=(a(18),a(9));a(28);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}D.a.Item;var F=C.a.Option,U=(b.a.confirm,Object(M.b)("root")(n=Object(M.b)("areaResouse")(n=Object(M.c)((o=r=function(e){f()(n,e);var t,a=(t=n,function(){var e,a=S()(t);if(z()){var n=S()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return v()(this,e)});function n(e){var t;return c()(this,n),t=a.call(this,e),E()(p()(t),"onSelect",(function(e,a){if(console.log(a),!e)return!1;t.selectNode=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){E()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.rowdata),t.props.onSearch(e,t.selectNode)})),E()(p()(t),"onUpdate",(function(){t.props.areaResouse.fetchVarea()})),t.selectNode={},t.state={selectNode:null,data:[]},t}return d()(n,[{key:"componentDidMount",value:function(){this.props.areaResouse.vareaList.length<=0&&this.props.areaResouse.fetchVarea()}},{key:"render",value:function(){var e=this.props.areaResouse.vareaList;return x.a.createElement(x.a.Fragment,null,x.a.createElement(C.a,{onChange:this.onSelect,placeholder:"请选择区域：地区-机房-区域",style:{width:300},allowClear:!0,showSearch:!0,defaultValue:this.props.defaultKey,filterOption:T.a.filterOption},L.a.map(e,(function(e){return x.a.createElement(F,{value:e.fullLocationId,key:e.fullLocationId,rowdata:e,title:e.fullLocationName}," ",e.fullLocationName," ")}))),x.a.createElement(s.a,{onClick:this.onUpdate},"更新区域"))}}]),n}(x.a.Component),E()(r,"propTypes",{areaResouse:P.a.any,onSearch:P.a.func,onClose:P.a.func,defaultKey:P.a.string}),n=o))||n)||n)||n);t.a=U},1623:function(e,t,a){"use strict";a(152);var n,r,o,i,s=a(78),l=a.n(s),c=(a(47),a(17)),u=a.n(c),d=(a(65),a(25)),m=a.n(d),p=a(15),h=a.n(p),f=a(19),y=a.n(f),v=a(6),g=a.n(v),S=a(20),k=a.n(S),E=a(21),w=a.n(E),b=a(13),I=a.n(b),C=a(2),R=a.n(C),D=(a(416),a(192)),O=a.n(D),x=(a(58),a(11)),N=a.n(x),P=(a(98),a(55)),M=a.n(P),j=(a(60),a(12)),L=a.n(j),T=a(0),_=a.n(T),z=a(1),F=a.n(z),U=(a(5),a(18)),A=a(23),B=a(99),q=(a(3),a(28),a(26)),G=a(9);a(153),a(1599);function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}L.a.Item,M.a.TextArea,N.a.Option,O.a.TreeNode;var K=(n=Object(A.b)("root"),Object(B.g)(r=n((i=o=function(e){k()(n,e);var t,a=(t=n,function(){var e,a=I()(t);if(V()){var n=I()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return w()(this,e)});function n(e){var t;return h()(this,n),t=a.call(this,e),R()(g()(t),"formRefAdd",_.a.createRef()),R()(g()(t),"onResetSearch",(function(){t.formRefAdd.current.resetFields()})),R()(g()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectAreaNode={},t.selectedRows=[],t.uw=0,t.state={fetchPath:t.props.fetchPath,nwoData:{},orgionLists:[],lists:[],loading:!1,showModal:!1,cabinetName:""},t}return y()(n,[{key:"getDetail",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({loading:!0}),U.a.get(this.props.fetchPath,{params:t}).then((function(t){t=t.data,G.a.hasStatusOk(t)?e.setState({loading:!1,lists:t.data,orgionLists:t.data}):(G.a.dealFail(t),e.setState({loading:!1}))})).catch((function(){e.setState({loading:!1})}))}},{key:"selectedRow",value:function(e,t){this.selectedRows=t,this.props.onSelect(e,t),this.setState({showModal:!1,cabinetName:t[0].name})}},{key:"modalShow",value:function(){if(this.props.disabled)return m.a.error({title:this.props.disabledTip}),!1;this.getDetail(),this.setState({showModal:!0})}},{key:"makeColumns",value:function(){return[{title:"机柜名称",dataIndex:"name",width:150,key:"name"},{title:"位置码",dataIndex:"physicsLocationCode",key:"physicsLocationCode"},{title:"行/列",dataIndex:"row",key:"row",render:function(e,t){return"".concat(t.row,"/").concat(t.coulmn)}},{title:"规格",dataIndex:"spec",key:"spec"},{title:"机柜属性",dataIndex:"attribute",width:100,key:"attribute",render:function(e,t){return q.a.cabinet_attribute[e]||"未知属性"}},{title:"总U位数",dataIndex:"us",key:"us"},{title:"剩余U位",dataIndex:"usremain",key:"usremain"},{title:"剩余最大U位数",dataIndex:"usmaxremain",key:"usmaxremain"},{title:"备注",dataIndex:"remark",key:"remark"}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.showModal,r=t.loading;t.cabinetName;return _.a.createElement("main",{className:"mian"},_.a.createElement(m.a,{title:this.props.title||"选择机柜",maskClosable:!1,width:"90%",destroyOnClose:!0,footer:!1,onOk:this.onModalOk,onCancel:this.onClose,visible:n},_.a.createElement("div",{className:"g-search"},_.a.createElement(L.a,{ref:this.searchFormRef,name:"searchbox",layout:"inline",onFinish:function(t){e.getDetail(t)}},_.a.createElement(L.a.Item,{name:"name"},_.a.createElement(M.a,{placeholder:"机柜名称",allowClear:!0})),_.a.createElement(L.a.Item,null,_.a.createElement(u.a,{type:"primary",htmlType:"submit"},"搜索")))),_.a.createElement("div",{className:"g-table"},_.a.createElement(l.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a,pagination:!1,rowSelection:{type:"radio",onChange:function(t,a){e.selectedRow(t,a)}}}))),_.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(_.a.Component),R()(o,"propTypes",{location:F.a.any,history:F.a.any,match:F.a.any,root:F.a.any,children:F.a.any,title:F.a.string,uw:F.a.number,disabled:F.a.bool,disabledTip:F.a.string,style:F.a.any,fetchPath:F.a.string,powers:F.a.array,defaultData:F.a.any,onSelect:F.a.func}),r=i))||r)||r);t.a=K},1643:function(e,t,a){"use strict";a.d(t,"a",(function(){return K}));a(725);var n,r,o,i,s=a(423),l=a.n(s),c=(a(47),a(17)),u=a.n(c),d=(a(65),a(25)),m=a.n(d),p=a(15),h=a.n(p),f=a(19),y=a.n(f),v=a(6),g=a.n(v),S=a(20),k=a.n(S),E=a(21),w=a.n(E),b=a(13),I=a.n(b),C=a(2),R=a.n(C),D=(a(416),a(192)),O=a.n(D),x=(a(58),a(11)),N=a.n(x),P=(a(98),a(55)),M=a.n(P),j=(a(60),a(12)),L=a.n(j),T=a(0),_=a.n(T),z=a(1),F=a.n(z),U=(a(5),a(18),a(1919)),A=a(23),B=a(99),q=(a(3),a(28),a(9)),G=(a(153),a(1601),a(1599),a(52));a(16);function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}L.a.Item,M.a.TextArea,N.a.Option,O.a.TreeNode;var K=(n=Object(A.b)("root"),Object(B.g)(r=n((i=o=function(e){k()(n,e);var t,a=(t=n,function(){var e,a=I()(t);if(V()){var n=I()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return w()(this,e)});function n(e){var t;return h()(this,n),t=a.call(this,e),R()(g()(t),"formRefAdd",_.a.createRef()),R()(g()(t),"onClose",(function(){t.setState({showModal:!1})})),t.selectAreaNode={},t.selectedRows=[],t.houseId="",t.uw=0,t.state={fileList:[],uploading:!1},t}return y()(n,[{key:"componentDidMount",value:function(){}},{key:"modalShow",value:function(){this.setState({showModal:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=(t.uploading,t.fileList,t.showModal),n={name:"file",method:"post",action:this.props.url,headers:{Authorization:"token "+G.a.getToken()},onChange:function(e){"uploading"!==e.file.status&&console.log("已上传"),"done"===e.file.status?2e4==e.file.response.code?(q.a.auto_close_result("ok","上传成功！"),this.setState({showModal:!1})):q.a.dealFail(e.file.response):"error"===e.file.status&&m.a.error({title:"上传失败！"})}};return _.a.createElement(_.a.Fragment,null,_.a.createElement(m.a,{title:this.props.title||"上传文件",maskClosable:!1,width:"600px",destroyOnClose:!0,footer:!1,onCancel:this.onClose,visible:a},_.a.createElement(l.a,n,_.a.createElement(u.a,null," ",_.a.createElement(U.a,null)," ",this.props.filetext," "))),_.a.createElement("span",{onClick:function(){e.modalShow()}},this.props.children))}}]),n}(_.a.Component),R()(o,"propTypes",{location:F.a.any,history:F.a.any,match:F.a.any,root:F.a.any,children:F.a.any,houseId:F.a.string,title:F.a.string,powers:F.a.array,onSelect:F.a.func,filetext:F.a.any,url:F.a.string}),r=i))||r)||r)},1644:function(e,t,a){"use strict";a(173);var n,r,o,i,s=a(84),l=a.n(s),c=(a(65),a(25)),u=a.n(c),d=(a(172),a(105)),m=a.n(d),p=(a(152),a(78)),h=a.n(p),f=a(15),y=a.n(f),v=a(19),g=a.n(v),S=a(6),k=a.n(S),E=a(20),w=a.n(E),b=a(21),I=a.n(b),C=a(13),R=a.n(C),D=a(2),O=a.n(D),x=(a(416),a(192)),N=a.n(x),P=(a(58),a(11)),M=a.n(P),j=(a(98),a(55)),L=a.n(j),T=(a(60),a(12)),_=a.n(T),z=a(0),F=a.n(z),U=a(1),A=a.n(U),B=(a(5),a(18)),q=a(1596),G=a(23),V=a(99),K=(a(3),a(28),a(9));a(153);function W(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}_.a.Item,L.a.TextArea,M.a.Option,N.a.TreeNode;var H=(n=Object(G.b)("root"),Object(V.g)(r=n(r=Object(G.c)((i=o=function(e){w()(n,e);var t,a=(t=n,function(){var e,a=R()(t);if(W()){var n=R()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return I()(this,e)});function n(e){var t;return y()(this,n),t=a.call(this,e),O()(k()(t),"formRefAdd",F.a.createRef()),O()(k()(t),"onResetSearch",(function(){t.formRefAdd.current.resetFields()})),O()(k()(t),"onClose",(function(){t.setState({modalShow:!1})})),t.selectAreaNode={},t.state={lists:[],loading:!1,modalShow:!1,page:1,pageSize:20,total:0},t}return g()(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getLog",value:function(e){var t=this;this.setState({loading:!0}),B.a.get("".concat(BSS_ADMIN_URL,"/api/product/nodeserver/outboundrecord"),{params:{id:this.props.nodeMasterId}}).then((function(e){e=e.data,K.a.hasStatusOk(e)?t.setState({loading:!1,lists:e.data.records}):(K.a.dealFail(e),t.setState({loading:!1}))})).catch((function(){t.setState({loading:!1})}))}},{key:"onFinish",value:function(e){}},{key:"onPageChange",value:function(e,t){this.getLog(e,t)}},{key:"onPageSizeChange",value:function(e,t){this.getLog(e,t)}},{key:"onModalShow",value:function(){this.setState({modalShow:!0}),this.getLog()}},{key:"makeColumns",value:function(){return[{title:"节点位",dataIndex:"node",key:"node"},{title:"服务器IP",dataIndex:"serverIp",key:"serverIp"},{title:"服务器名称",dataIndex:"serverName",key:"serverName"},{title:"出库时间",dataIndex:"serverName",key:"serverName"},{title:"备注",dataIndex:"remark ",key:"remark "}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.lists,n=t.modalShow,r=t.loading,o=t.page,i=t.total;return F.a.createElement(F.a.Fragment,null,F.a.createElement("main",{className:"mian"},F.a.createElement(u.a,{title:"出库记录",maskClosable:!1,width:"80%",onCancel:this.onClose,footer:null,visible:n},F.a.createElement("div",{className:"g-table"},F.a.createElement(h.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:r,dataSource:a}),F.a.createElement("div",{className:"g-pagination"},F.a.createElement(m.a,{size:"small",current:o,total:i,showSizeChanger:!0,onChange:function(t,a){e.onPageChange(t,a)},onShowSizeChange:function(t,a){e.onPageSizeChange(t,a)}}))))),F.a.createElement("span",{className:"control-btn green",onClick:function(){return e.onModalShow()}},F.a.createElement(l.a,{placement:"top",title:"出库记录"},F.a.createElement(q.a,null))))}}]),n}(F.a.Component),O()(o,"propTypes",{location:A.a.any,history:A.a.any,match:A.a.any,root:A.a.any,powers:A.a.array,nodeMasterId:A.a.string}),r=i))||r)||r)||r);t.a=H},1761:function(e,t){},1762:function(e,t){}}]);