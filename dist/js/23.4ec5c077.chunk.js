(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1558:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return He}));t(172);var n,l,s,o,r,c=t(105),i=t.n(c),u=(t(152),t(78)),d=t.n(u),m=(t(47),t(17)),p=t.n(m),h=(t(98),t(55)),f=t.n(h),g=(t(254),t(116)),y=t.n(g),E=(t(255),t(133)),b=t.n(E),k=(t(173),t(84)),C=t.n(k),w=(t(132),t(35)),v=t.n(w),S=t(15),x=t.n(S),M=t(19),I=t.n(M),R=t(6),T=t.n(R),N=t(20),D=t.n(N),L=t(21),O=t.n(L),U=t(13),P=t.n(U),B=t(2),F=t.n(B),z=(t(65),t(25)),G=t.n(z),q=(t(60),t(12)),j=t.n(q),A=(t(58),t(11)),K=t.n(A),H=t(0),V=t.n(H),J=t(1),W=t.n(J),Q=t(1591),Z=t(1596),X=t(1592),Y=t(1589),$=t(23),ee=(t(1794),t(9)),ae=(t(71),t(5)),te=t.n(ae),ne=t(18),le=(t(724),t(417)),se=t.n(le),oe=(t(171),t(89)),re=t.n(oe),ce=(t(193),t(75)),ie=t.n(ce),ue=t(33),de=t.n(ue),me=(t(416),t(192)),pe=t.n(me),he=(t(3),t(16)),fe=t.n(he),ge=t(99);function ye(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}j.a.Item,f.a.TextArea;var Ee,be,ke,Ce=K.a.Option,we=(pe.a.TreeNode,n=Object($.b)("root"),l=Object($.b)("cabinetDict"),Object(ge.g)(s=n(s=l(s=Object($.c)((r=o=function(e){D()(n,e);var a,t=(a=n,function(){var e,t=P()(a);if(ye()){var n=P()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O()(this,e)});function n(e){var a;return x()(this,n),a=t.call(this,e),F()(T()(a),"onReset",(function(){a.searchFormRef.current.resetFields()})),F()(T()(a),"onClose",(function(){a.setState({showModal:!1})})),F()(T()(a),"selectedRow",(function(e,t){a.props.onSelect(t),a.setState({showModal:!1})})),a.selectedRows=[],a.searchFormRef=V.a.createRef(),a.searchCondition={},a.state={lists:[],loading:!1,showModal:!1,pageNum:1,page_size:20,total:0,pages:0,lists2:[],lists3:[]},a}return I()(n,[{key:"componentDidMount",value:function(){this.onGetMListData(this.state.pageNum,this.state.page_size),this.onGetBrand(),this.onGetModel()}},{key:"onGetMListData",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=te.a.assign({},this.searchCondition,a);this.setState({loading:!0}),ne.a.get("".concat(BSS_ADMIN_URL,"/api/product/cpumodel"),{params:ee.a.clearNull(t)}).then((function(a){if(a=a.data,ee.a.hasStatusOk(a)){var t=a.data.records;e.setState({lists:t,total:a.data.total,pages:a.data.pages,pageNum:a.data.current})}else ee.a.dealFail(a);e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"onGetBrand",value:function(){var e=this;ne.a.get("".concat(BSS_ADMIN_URL,"/api/product/cpumodel/cpubrand")).then((function(a){2e4===(a=a.data).code?e.setState({lists2:a.data}):message.error(a.data)})).catch((function(){}))}},{key:"onGetModel",value:function(){var e=this;ne.a.get("".concat(BSS_ADMIN_URL,"/api/product/cpumodel/modelname")).then((function(a){2e4===(a=a.data).code?e.setState({lists3:a.data}):message.error(a.data)})).catch((function(){}))}},{key:"modalShow",value:function(){this.setState({showModal:!0})}},{key:"onSearch",value:function(e){this.searchCondition=e,this.onGetMListData(e)}},{key:"makeColumns",value:function(){return[{title:"型号名称",dataIndex:"cpuName",key:"cpuName"},{title:"cpu类型",dataIndex:"cpuModel",key:"cpuModel"},{title:"cpu品牌",dataIndex:"cpuBrand",key:"cpuBrand"},{title:"主频(GHZ)",dataIndex:"cpuHz",key:"cpuHz"},{title:"核心数",dataIndex:"cpuCore",key:"cpuCore"},{title:"线程数",dataIndex:"cpuThread",key:"cpuThread"},{title:"接口类型",dataIndex:"interfaceType",key:"interfaceType"}]}},{key:"render",value:function(){var e=this,a=this.state,t=a.lists,n=a.showModal,l=a.loading,s=a.total,o=a.page_size,r=a.pageNum,c=a.lists2,i=a.lists3,u=this.props.operateType,m={current:r,total:s,defaultPageSize:o,onChange:function(a){return e.onGetMListData({page:a})}};return V.a.createElement("main",{className:"mian"},V.a.createElement(G.a,{title:this.props.title||"选择",maskClosable:!1,width:"70%",destroyOnClose:!0,footer:null,onCancel:this.onClose,visible:n},V.a.createElement("div",{className:"g-search"},V.a.createElement(j.a,{ref:this.searchFormRef,name:"horizontal_login",layout:"inline",onFinish:function(a){e.onSearch(a)}},V.a.createElement(j.a.Item,{name:"cpuName"},V.a.createElement(f.a,{allowClear:!0,placeholder:"请输入型号名称"})),V.a.createElement(j.a.Item,{name:"cpuModel"},V.a.createElement(K.a,{style:{width:240},allowClear:!0,placeholder:"请选择cpu型号"},i.map((function(e){return V.a.createElement(Ce,{key:e},e)})))),V.a.createElement(j.a.Item,{name:"cpuBrand"},V.a.createElement(K.a,{style:{width:240},allowClear:!0,placeholder:"请选择cpu品牌"},c.map((function(e){return V.a.createElement(Ce,{key:e},e)})))),V.a.createElement(j.a.Item,{shouldUpdate:!0},V.a.createElement(p.a,{type:"primary",htmlType:"submit"},"搜索")),V.a.createElement(j.a.Item,{shouldUpdate:!0},V.a.createElement(p.a,{type:"primary",htmlType:"reset",onClick:this.onReset},"重置")),V.a.createElement(j.a.Item,{shouldUpdate:!0},V.a.createElement(p.a,{type:"primary",htmlType:"submit",onClick:function(){return e.onGetMListData}},"刷新")))),V.a.createElement("div",{className:"g-table"},V.a.createElement(d.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:l,dataSource:t,pagination:m,size:"small",rowSelection:{type:"radio",onChange:function(a,t){e.selectedRow(a,t)}}}))),V.a.createElement("span",{onClick:function(){e.modalShow()},style:"see"===u?{display:"none"}:{display:"flex"}},this.props.children))}}]),n}(V.a.Component),F()(o,"propTypes",{location:W.a.any,history:W.a.any,match:W.a.any,root:W.a.any,cabinetDict:W.a.any,powers:W.a.array,defaultData:W.a.any,onOk:W.a.func,onClose:W.a.func}),s=r))||s)||s)||s)||s),ve=t(153);t(28);function Se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var xe,Me,Ie,Re=j.a.Item,Te=f.a.TextArea,Ne=K.a.Option,De=(pe.a.TreeNode,pe.a.SHOW_PARENT,Object($.b)("root")(Ee=Object($.b)("authManage")(Ee=Object($.b)("pageUserstore")(Ee=Object($.c)((ke=be=function(e){D()(n,e);var a,t=(a=n,function(){var e,t=P()(a);if(Se()){var n=P()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O()(this,e)});function n(e){var a;return x()(this,n),a=t.call(this,e),F()(T()(a),"onClose",(function(){a.props.pageUserstore.changeShowmodal("off")})),F()(T()(a),"onFinish",(function(e){if("see"!==a.props.operateType){if("add"===a.props.operateType&&(e.purchasingTime=a.purchasingTime,e.storageTime=a.storageTime,e.cpuModelId=a.id,e.number=parseInt(e.number),a.props.onOk(e)),"up"===a.props.operateType){var t=a.props.nowData.id;e.purchasingTime=a.purchasingTime,!0===a.state.flag?e.cpuModelId=a.props.cpuModelId:e.cpuModelId=a.id,a.props.edit(t,e)}}else a.onClose()})),F()(T()(a),"reset",(function(){a.formRef.current.resetFields()})),F()(T()(a),"onChange",(function(e){a.setState({value:e})})),F()(T()(a),"onSelect",(function(e){a.formRef.current.setFieldsValue({cpuBrand:e[0].cpuBrand,cpuModelId:e[0].cpuName,cpuModel:e[0].cpuModel}),a.id=e[0].id,a.setState({flag:!1})})),a.formRef=V.a.createRef(),a.purchasingTime=fe()(a.props.nowData.purchasingTime),a.storageTime=fe()().format(),a.state={modalLoading:!1,nowData:null,flag:!0},a}return I()(n,[{key:"componentDidMount",value:function(){}},{key:"getPtime1",value:function(e,a){this.purchasingTime=e.format()}},{key:"getPtime2",value:function(e,a){this.storageTime=a}},{key:"render",value:function(){var e=this,a=this.props,t=(a.releaseStatus,a.source),n=a.house,l=a.operateType,s=a.nowData,o=a.sale_status,r=(this.props.root.powers,{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}}),c=this.props.pageUserstore.showmodal;return V.a.createElement("div",null,V.a.createElement(G.a,{title:{add:"CPU入库",up:"CPU修改",see:"查看"}[l],maskClosable:!1,width:"80%",destroyOnClose:!0,visible:c,onCancel:this.onClose,confirmLoading:this.state.modalLoading,footer:null},V.a.createElement(j.a,{name:"form_in_modal",ref:this.formRef,initialValues:s,onFinish:function(a){e.onFinish(a)},className:"g-modal-field"},V.a.createElement(re.a,null,V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Re,de()({label:"CPU编号",name:"cpuCode"},r,{style:"see"===l?{display:"flex"}:{display:"none"}}),V.a.createElement(f.a,{disabled:"see"===l}))),V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Re,de()({label:"位置码",name:"houseLocationCode"},r,{style:"see"===l?{display:"flex"}:{display:"none"}}),V.a.createElement(f.a,{placeholder:"请输入位置码",disabled:"see"===l})))),V.a.createElement(re.a,null,V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Re,de()({label:"机房",name:"houseId"},r,{rules:[{required:!0,message:"必填"}]}),V.a.createElement(K.a,{allowClear:!0,placeholder:"请选择机房",disabled:"see"===l||1===s.status},n.map((function(e){return V.a.createElement(Ne,{value:e.id,key:e.id},e.fullName)}))))),V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Re,de()({label:"数量",name:"number"},r,{rules:"add"===l?[{required:!0,message:"必填"},{max:4,message:"最多输入4位字符"},{pattern:ve.a.num,message:"请输入数字"}]:null}),V.a.createElement(f.a,{placeholder:"数量",disabled:"see"===l||"up"===l})))),V.a.createElement(re.a,null,V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Re,de()({label:V.a.createElement("span",{className:"required"},"CPU型号名称")},r),V.a.createElement(Re,{name:"cpuModelId",rules:[{required:!0,message:"必填"}],style:{display:"inline-block"}},V.a.createElement(f.a,{disabled:!0,placeholder:"请选择cpu型号名称"})),V.a.createElement(p.a,{style:"see"===l?{display:"none"}:{display:"inline-block"},disabled:1===s.status},V.a.createElement(we,{operateType:l,onSelect:this.onSelect},"选择")))),V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Re,de()({label:"CPU品牌",name:"cpuBrand"},r,{rules:[{required:!0,message:"必填"}]}),V.a.createElement(f.a,{disabled:!0,placeholder:"请输入cpu品牌"})))),V.a.createElement(re.a,null,V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Re,de()({label:"CPU型号",name:"cpuModel"},r,{rules:[{required:!0,message:"必填"}]}),V.a.createElement(f.a,{placeholder:"请输入cpu型号",disabled:!0}))),V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Re,de()({label:V.a.createElement("span",{className:"required"},"采购时间")},r),V.a.createElement(Re,{name:"purchasingTime",rules:[{required:!0,message:"必填"}]},V.a.createElement(se.a,{onChange:function(a,t){e.getPtime1(a,t)},disabled:"see"===l||"up"===l,style:{display:"flex"}}))))),V.a.createElement(re.a,null,V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Re,de()({label:"来源",name:"source"},r,{rules:[{required:!0,message:"必填"}]}),V.a.createElement(K.a,{allowClear:!0,placeholder:"请选择来源",disabled:!0},_.map(t,(function(e,a){return V.a.createElement(Ne,{key:a,value:parseInt(a)},e)}))))),V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Re,de()({label:"资源状态",name:"status"},r,{rules:[{required:!0,message:"必填"}]}),V.a.createElement(K.a,{allowClear:!0,placeholder:"请选择资源状态",disabled:"see"===l||1===s.status},_.map(o,(function(e,a){return V.a.createElement(Ne,{value:parseInt(a),key:a,style:1===parseInt(a)?{display:"none"}:{display:"block"}},e.text)})))))),V.a.createElement(re.a,null,V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Re,{label:"服务器",name:"serverManagerIp",style:"see"===l?{display:"flex"}:{display:"none"}},V.a.createElement(f.a,{disabled:!0})))),V.a.createElement(re.a,null,V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:24,xl:24},V.a.createElement(Re,{label:"备注",name:"remark",rules:[{max:250,message:"最多输入250个字符"}]},V.a.createElement(Te,{placeholder:"请输入备注",disabled:"see"===l,style:{height:"100px"}})))),V.a.createElement(re.a,null,V.a.createElement(ie.a,{span:24},V.a.createElement("div",{className:"actions-btn"},V.a.createElement(p.a,{htmlType:"submit",className:"action-btn ok",style:"see"===l?{display:"none"}:{display:"inline-block"}},"提交"),V.a.createElement(p.a,{htmlType:"reset",className:"action-btn ok",onClick:this.reset,style:"see"===l?{display:"none"}:{display:"inline-block"}},"重置"),V.a.createElement(p.a,{onClick:this.onClose,className:"action-btn ok"},"取消")))))))}}]),n}(V.a.Component),F()(be,"propTypes",{location:W.a.any,history:W.a.any,userinfo:W.a.any,powers:W.a.array}),Ee=ke))||Ee)||Ee)||Ee)||Ee);function Le(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Oe,_e,Ue,Pe=j.a.Item,Be=f.a.TextArea,Fe=K.a.Option,ze=(pe.a.TreeNode,pe.a.SHOW_PARENT,Object($.b)("root")(xe=Object($.b)("authManage")(xe=Object($.b)("pageUserstore")(xe=Object($.c)((Ie=Me=function(e){D()(n,e);var a,t=(a=n,function(){var e,t=P()(a);if(Le()){var n=P()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O()(this,e)});function n(e){var a;return x()(this,n),a=t.call(this,e),F()(T()(a),"onClose",(function(){a.props.onCancel()})),F()(T()(a),"onFinish",(function(e){e.storageTime=a.storageTime,!0===a.state.flag?e.cpuModelId=a.props.cpuModelId:e.cpuModelId=a.id,!0===a.state.tFlag?console.log(e.purchasingTime):e.purchasingTime=a.purchasingTime,a.props.onOk(e)})),F()(T()(a),"reset",(function(){a.formRef.current.resetFields()})),F()(T()(a),"onSelect",(function(e){a.formRef.current.setFieldsValue({cpuBrand:e[0].cpuBrand,cpuModelId:e[0].cpuName,cpuModel:e[0].cpuModel}),a.id=e[0].id,a.setState({flag:!1})})),a.formRef=V.a.createRef(),a.purchasingTime="",a.storageTime=fe()().format(),a.state={modalLoading:!1,nowData:null,flag:!0,tFlag:!0},a}return I()(n,[{key:"componentDidMount",value:function(){}},{key:"getPtime1",value:function(e,a){this.purchasingTime=e.format(),this.state({tFlag:!1})}},{key:"getPtime2",value:function(e,a){this.storageTime=a}},{key:"render",value:function(){var e=this,a=this.props,t=(a.releaseStatus,a.source),n=a.house,l=a.title,s=a.visible,o=a.selectedRows,r=a.sale_status,c={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}};return V.a.createElement("div",null,V.a.createElement(G.a,{title:l,maskClosable:!1,width:"80%",destroyOnClose:!0,visible:s,onCancel:this.props.onCancel,footer:null},V.a.createElement(j.a,{name:"form_in_modal",ref:this.formRef,initialValues:o,onFinish:function(a){e.onFinish(a)},className:"g-modal-field"},V.a.createElement(re.a,null,V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Pe,de()({label:"机房",name:"houseId"},c,{rules:[{required:!0,message:"必填"}]}),V.a.createElement(K.a,{allowClear:!0,placeholder:"请选择机房"},n.map((function(e){return V.a.createElement(Fe,{value:e.id,key:e.id},e.fullName)}))))),V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Pe,de()({label:"数量",name:"number"},c,{rules:[{required:!0,message:"必填"},{max:4,message:"最多输入4位字符"},{pattern:ve.a.num,message:"请输入数字"}]}),V.a.createElement(f.a,{placeholder:"请输入数量"})))),V.a.createElement(re.a,null,V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Pe,de()({label:V.a.createElement("span",{className:"required"},"CPU型号名称")},c),V.a.createElement(Pe,{name:"cpuModelId",style:{display:"inline-block"},rules:[{required:!0,message:"必填"}]},V.a.createElement(f.a,{disabled:!0,placeholder:"请选择cpu型号名称"})),V.a.createElement(p.a,{style:{display:"inline-block"}},V.a.createElement(we,{onSelect:this.onSelect},"选择")))),V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Pe,de()({label:"CPU品牌",name:"cpuBrand"},c,{rules:[{required:!0,message:"必填"}]}),V.a.createElement(f.a,{disabled:!0,placeholder:"请输入cpu品牌"})))),V.a.createElement(re.a,null,V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Pe,de()({label:"CPU型号",name:"cpuModel"},c,{rules:[{required:!0,message:"必填"}]}),V.a.createElement(f.a,{placeholder:"请输入cpu型号",disabled:!0}))),V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Pe,de()({label:V.a.createElement("span",{className:"required"},"采购时间")},c),V.a.createElement(Pe,{name:"purchasingTime",rules:[{required:!0,message:"必填"}]},V.a.createElement(se.a,{onChange:function(a,t){e.getPtime1(a,t)},style:{display:"flex"}}))))),V.a.createElement(re.a,null,V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Pe,de()({label:"资源状态",name:"status",rules:[{required:!0,message:"必填"}]},c),V.a.createElement(K.a,{allowClear:!0,placeholder:"请选择资源状态"},_.map(r,(function(e,a){return V.a.createElement(Fe,{value:parseInt(a),key:a,style:1===parseInt(a)?{display:"none"}:{display:"block"}},e.text)}))))),V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Pe,de()({label:"来源",name:"source"},c,{rules:[{required:!0,message:"必填"}]}),V.a.createElement(K.a,{allowClear:!0,placeholder:"请选择来源",disabled:!0},_.map(t,(function(e,a){return V.a.createElement(Fe,{key:a,value:parseInt(a)},e)})))))),V.a.createElement(re.a,null,V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Pe,de()({label:"入库时间",name:"storageTime"},c,{style:{display:"none"}}),V.a.createElement("div",null,V.a.createElement(se.a,{onChange:function(a,t){e.getPtime2(a,t)},defaultValue:fe()(),disabled:!0,style:{display:"none"}})))),V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:12,xl:12},V.a.createElement(Pe,de()({label:"服务器",name:"serverManagerIp"},c,{style:{display:"none"}}),V.a.createElement(f.a,{placeholder:"请输入服务器",style:{display:"none"},disabled:!0})))),V.a.createElement(re.a,null,V.a.createElement(ie.a,{xs:24,sm:24,md:24,lg:24,xl:24},V.a.createElement(Pe,{label:"备注",name:"remark",rules:[{max:250,message:"最多输入250个字符"}]},V.a.createElement(Be,{placeholder:"请输入备注",style:{height:"100px"}})))),V.a.createElement(re.a,null,V.a.createElement(ie.a,{span:24},V.a.createElement("div",{className:"actions-btn"},V.a.createElement(p.a,{htmlType:"submit",className:"action-btn ok"},"提交"),V.a.createElement(p.a,{htmlType:"reset",className:"action-btn ok",onClick:this.reset},"重置"),V.a.createElement(p.a,{onClick:this.onClose,className:"action-btn ok"},"取消")))))))}}]),n}(V.a.Component),F()(Me,"propTypes",{location:W.a.any,history:W.a.any,userinfo:W.a.any,powers:W.a.array}),xe=Ie))||xe)||xe)||xe)||xe),Ge=t(52),qe=t(26);function je(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ae=K.a.Option,Ke=(j.a.Item,G.a.confirm);var He=Object($.b)("root")(Oe=Object($.b)("serverPartDict")(Oe=Object($.b)("authManage")(Oe=Object($.b)("pageUserstore")(Oe=Object($.b)("areaResouse")(Oe=Object($.c)((Ue=_e=function(e){D()(n,e);var a,t=(a=n,function(){var e,t=P()(a);if(je()){var n=P()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O()(this,e)});function n(e){var a;return x()(this,n),a=t.call(this,e),F()(T()(a),"updateURL",(function(){var e,t,n,l,s=(e={query:a.state.inputValue},t=e.query,n=void 0===t?"":t,(l=new URLSearchParams).set("query",n),l.toString());a.props.history.push("?".concat(s))})),F()(T()(a),"onReset",(function(){a.searchFormRef.current.resetFields()})),F()(T()(a),"onModalOk",(function(e){ne.a.post("".concat(BSS_ADMIN_URL,"/api/product/cpudetail/add"),ee.a.clearEmpty(e)).then((function(e){2e4===(e=e.data).code?(a.onGetListData({page:1}),a.onClose(),v.a.success("添加成功")):ee.a.dealFail(e)})).catch((function(){a.setState({modalLoading:!1})}))})),F()(T()(a),"edit",(function(e,t){t.version=a.state.version,t.cpuName="",ne.a.put("".concat(BSS_ADMIN_URL,"/api/product/cpudetail/").concat(e,"/update"),ee.a.clearNull(t)).then((function(e){2e4===(e=e.data).code?(a.onClose(),a.onGetListData({page:1}),v.a.success("修改成功")):ee.a.dealFail(e)})).catch((function(){a.setState({modalLoading:!1})}))})),F()(T()(a),"onClose",(function(){a.props.pageUserstore.changeShowmodal("off")})),F()(T()(a),"onModalClose",(function(){a.props.pageUserstore.changeShowmodal("off")})),F()(T()(a),"onSelectChange",(function(e,t){a.setState({selectedRowKeys:e}),a.selectedRows=t,a.setState({nowData2:{houseId:a.selectedRows[0]&&a.selectedRows[0].houseId,cpuModelId:a.selectedRows[0]&&a.selectedRows[0].cpuModelList[0].cpuName,cpuBrand:a.selectedRows[0]&&a.selectedRows[0].cpuModelList[0].cpuBrand,cpuModel:a.selectedRows[0]&&a.selectedRows[0].cpuModelList[0].cpuModel,purchasingTime:a.selectedRows[0]&&fe()(a.selectedRows[0].purchasingTime),source:1,status:0},id:a.selectedRows[0]&&a.selectedRows[0].cpuModelId})})),F()(T()(a),"showDeleteConfirm",(function(){var e=a.state.selectedRowKeys,t=T()(a);if(e.length<1)return G.a.warning({title:"提示",content:"请选择至少一条数据！",destroyOnClose:!0}),!1;Ke({title:"你确定要批量出库吗？",icon:V.a.createElement(Q.a,null),okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){t.onDel(e),t.setState({selectedRowKeys:[]})},onCancel:function(){}})})),F()(T()(a),"onTemplateShow",(function(){switch(a.state.selectedRowKeys.length){case 0:G.a.warning({title:"提示",content:"请选择一条数据作为模板！",destroyOnClose:!0});break;case 1:a.setState({TemplateShow:!0});break;default:G.a.warning({title:"提示",content:"只能一次选择一条数据作为模板！",destroyOnClose:!0})}})),F()(T()(a),"handleCancel",(function(){a.setState({TemplateShow:!1})})),F()(T()(a),"handleOk",(function(e){a.setState({loading:!0}),ne.a.post("".concat(BSS_ADMIN_URL,"/api/product/cpudetail/add"),e).then((function(e){a.setState({loading:!1}),2e4===(e=e.data).code?(a.onGetListData({page:1}),a.handleCancel(),v.a.success("添加成功")):ee.a.dealFail(e)})).catch((function(){a.setState({modalLoading:!1})}))})),a.searchFormRef=V.a.createRef(),a.searchCondition={},a.selectedRows=[],a.state={lists:[],operateType:"add",loading:!1,modalShow:!1,modalLoading:!1,nowData:{},pageNum:1,pageSize:20,total:0,nowData2:{},selectedRowKeys:[],TemplateShow:!1,editId:"",id:"",version:0,lists2:[],lists3:[]},a}return I()(n,[{key:"componentDidMount",value:function(){this.onGetListData(this.state.pageNum,this.state.pageSize),this.props.areaResouse.fetchHouse(),this.onGetBrand(),this.onGetModel()}},{key:"onGetListData",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=te.a.assign({},this.searchCondition,a);this.setState({loading:!0}),ne.a.get("".concat(BSS_ADMIN_URL,"/api/product/cpudetail"),{params:ee.a.clearEmpty(t)}).then((function(a){if(a=a.data,ee.a.hasStatusOk(a)){var t=a.data.records;e.setState({lists:t,total:a.data.total,pages:a.data.pages,pageNum:a.data.current,selectedRowKeys:[]})}else ee.a.dealFail(a);e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},{key:"onGetBrand",value:function(){var e=this;ne.a.get("".concat(BSS_ADMIN_URL,"/api/product/cpumodel/cpubrand")).then((function(a){2e4===(a=a.data).code?e.setState({lists2:a.data}):ee.a.dealFail(a)})).catch((function(){}))}},{key:"onGetModel",value:function(){var e=this;ne.a.get("".concat(BSS_ADMIN_URL,"/api/product/cpumodel/modelname")).then((function(a){2e4===(a=a.data).code?e.setState({lists3:a.data}):ee.a.dealFail(a)})).catch((function(){}))}},{key:"makeColumns",value:function(){var e=this;return[{title:"CPU编号",dataIndex:"cpuCode",key:"cpuCode"},{title:"CPU型号名称",dataIndex:"cpuName",key:"cpuName",render:function(e,a){return a.cpuModelList[0]&&a.cpuModelList[0].cpuName}},{title:"CPU品牌",dataIndex:"cpuBrand",key:"cpuBrand",render:function(e,a){return a.cpuModelList[0]&&a.cpuModelList[0].cpuBrand}},{title:"CPU型号",dataIndex:"cpuModel",key:"cpuModel",render:function(e,a){return a.cpuModelList[0]&&a.cpuModelList[0].cpuModel}},{title:"存放机房",dataIndex:"houseName",key:"houseName",render:function(a,t){var n=t.houseId,l=e.props.areaResouse.houseList,s="";return l.forEach((function(e){e.id===n&&(s=e.fullName)})),s}},{title:"采购时间",dataIndex:"purchasingTime",key:"purchasingTime",render:function(e,a){return ee.a.getTime(e)}},{title:"入库时间",dataIndex:"storageTime",key:"storageTime",render:function(e,a){return ee.a.getTime(e)}},{title:"资源状态",dataIndex:"status",key:"status",render:function(e,a){return ee.a.renderStatus(qe.k.parts_res_status,e)}},{title:"来源",dataIndex:"source",key:"source",render:function(e,a){return qe.k.source[e]}},{title:"使用服务器",dataIndex:"serverManagerIp",key:"serverManagerIp"},{title:"备注",dataIndex:"remark",key:"remark"},{title:"操作",key:"control",fixed:"right",width:100,render:function(a,t){var n=[],l=Ge.a.getPermission()||[];l.includes("cpudetail-view")&&n.push(V.a.createElement("span",{key:"0",className:"control-btn green",onClick:function(){return e.onModalShow("see",t)}},V.a.createElement(C.a,{placement:"top",title:"查看"},V.a.createElement(Z.a,null)))),l.includes("cpudetail-edit")&&n.push(V.a.createElement("span",{key:"1",className:"control-btn blue",onClick:function(){return e.onModalShow("up",t)}},V.a.createElement(C.a,{placement:"top",title:"修改"},V.a.createElement(X.a,null)))),l.includes("cpudetail-del")&&n.push(V.a.createElement(b.a,{key:"2",title:"确定删除吗?",onConfirm:function(){return e.onDel(t.id)},okText:"确定",cancelText:"取消"},V.a.createElement("span",{className:"control-btn red"},V.a.createElement(C.a,{placement:"top",title:"删除"},V.a.createElement(Y.a,null)))));var s=[];return n.forEach((function(e,a){a&&s.push(V.a.createElement(y.a,{key:"line".concat(a),type:"vertical"})),s.push(e)})),s}}]}},{key:"onSearch",value:function(e){this.searchCondition=e,this.onGetListData(e)}},{key:"onPageChange",value:function(e,a){this.onGetListData({page:e,pageSize:a})}},{key:"onPageSizeChange",value:function(e,a){this.onGetListData({page:e,pageSize:a})}},{key:"onModalShow",value:function(e,a){this.props.pageUserstore.changeShowmodal("on"),"add"!==e?this.setState({modalShow:!0,nowData:{id:a.id,houseLocationCode:a.houseLocationCode,cpuBrand:a&&a.cpuModelList[0]&&a.cpuModelList[0].cpuBrand,cpuCode:a.cpuCode,cpuModelId:a&&a.cpuModelList[0]&&a.cpuModelList[0].cpuName,cpuModel:a&&a.cpuModelList[0]&&a.cpuModelList[0].cpuModel,houseId:a.houseId,purchasingTime:fe()(a.purchasingTime),remark:a.remark,serverId:a.serverId,serverManagerIp:a.serverManagerIp,storageTime:a.storageTime,source:a.source,status:a.status},operateType:e,editId:a.cpuModelId||"",version:a&&a.version}):this.setState({modalShow:!0,operateType:e,nowData:{status:0,source:1}})}},{key:"onDel",value:function(e){var a=this,t={};if("string"==typeof e){var n=[];n.push(e),t={id:n}}else t={id:e};var l=JSON.stringify(t);ne.a.delete("".concat(BSS_ADMIN_URL,"/api/product/cpudetail/delete"),{data:l}).then((function(e){2e4===(e=e.data).code?(a.onGetListData({page:1}),v.a.success("出库成功")):(ee.a.dealFail(e),a.setState({loading:!1}))})).catch((function(){a.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,a=(this.props.root.powers,this.state),t=a.loading,n=a.operateType,l=a.lists,s=a.pageNum,o=a.pageSize,r=a.modalShow,c=a.nowData,u=a.total,m=a.selectedRowKeys,h=a.TemplateShow,g=a.nowData2,y=a.lists2,E=a.lists3,b=qe.k.releaseStatus,k=qe.k.source,C=qe.k.parts_res_status,w=this.props.areaResouse.houseList,v={selectedRowKeys:m,onChange:this.onSelectChange},S=Ge.a.getPermission()||[];return V.a.createElement("main",{className:"mian"},V.a.createElement("div",{className:"c-search"},V.a.createElement(j.a,{ref:this.searchFormRef,name:"horizontal_login",layout:"inline",onFinish:function(a){e.onSearch(a)}},V.a.createElement(j.a.Item,{name:"cpuName"},V.a.createElement(f.a,{placeholder:"请输入cpu型号名称",allowClear:!0})),V.a.createElement(j.a.Item,{name:"houseId"},V.a.createElement(K.a,{style:{width:240},allowClear:!0,placeholder:"请选择机房"},w.map((function(e){return V.a.createElement(Ae,{value:e.id,key:e.id},e.fullName)})))),V.a.createElement(j.a.Item,{name:"status"},V.a.createElement(K.a,{style:{width:240},allowClear:!0,placeholder:"请选择资源状态"},te.a.map(C,(function(e,a){return V.a.createElement(Ae,{key:a,value:parseInt(a)},e.text)})))),V.a.createElement(j.a.Item,{name:"cpuModel"},V.a.createElement(K.a,{style:{width:240},allowClear:!0,placeholder:"请选择cpu型号"},E.map((function(e){return V.a.createElement(Ae,{key:e},e)})))),V.a.createElement(j.a.Item,{name:"cpuBrand"},V.a.createElement(K.a,{style:{width:240},allowClear:!0,placeholder:"请选择cpu品牌"},y.map((function(e){return V.a.createElement(Ae,{key:e},e)})))),V.a.createElement(j.a.Item,{shouldUpdate:!0},V.a.createElement(p.a,{type:"primary",htmlType:"submit"},"搜索")),V.a.createElement(j.a.Item,{shouldUpdate:!0},V.a.createElement(p.a,{type:"primary",htmlType:"reset",onClick:this.onReset},"重置")))),V.a.createElement("div",{className:"c-operate"},S.includes("cpudetail-add")&&V.a.createElement(p.a,{size:"middle",onClick:function(){e.onModalShow("add",{})},className:"actions-btn"},"入库"),S.includes("cpudetail-add")&&V.a.createElement(p.a,{size:"middle",onClick:this.onTemplateShow,className:"actions-btn"},"模板入库"),S.includes("cpudetail-del")&&V.a.createElement(p.a,{size:"middle",onClick:this.showDeleteConfirm,className:"actions-btn"},"批量出库")),V.a.createElement("div",{className:"g-table"},V.a.createElement(d.a,{columns:this.makeColumns(),rowKey:function(e){return e.id},loading:t,dataSource:l,pagination:!1,rowSelection:v,size:"small"})),V.a.createElement("div",{className:"pagination"},V.a.createElement(i.a,{size:"middle",className:"g-pagination",current:s,total:u,showSizeChanger:!0,showQuickJumper:!0,defaultPageSize:o,showTotal:function(e){return"一共".concat(e,"条数据")},onChange:function(a,t){e.onPageChange(a,t)},onShowSizeChange:function(a,t){e.onPageSizeChange(a,t)}})),V.a.createElement(De,{operateType:n,nowData:c,visible:r,updateLists:this.onGetListData,onOk:this.onModalOk,edit:this.edit,onClose:this.onModalClose,releaseStatus:b,source:k,house:w,sale_status:C,cpuModelId:this.state.editId}),V.a.createElement(ze,{visible:h,text:"模板入库",onOk:this.handleOk,onCancel:this.handleCancel,releaseStatus:b,source:k,house:w,selectedRows:g,sale_status:C,cpuModelId:this.state.id}))}}]),n}(V.a.Component),F()(_e,"propTypes",{location:W.a.any,history:W.a.any,userinfo:W.a.any,powers:W.a.array}),Oe=Ue))||Oe)||Oe)||Oe)||Oe)||Oe)||Oe},1596:function(e,a,t){"use strict";var n=t(0),l={name:"eye",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]}},s=t(69),o=function(e,a){return n.createElement(s.a,Object.assign({},e,{ref:a,icon:l}))};o.displayName="EyeOutlined";a.a=n.forwardRef(o)},1794:function(e,a,t){}}]);